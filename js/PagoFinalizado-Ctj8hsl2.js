import{j as e}from"./three-d1oHV3Mw.js";import{r as t}from"./vendor-Bon8Abu2.js";import{u as s}from"./index-B5Yfvb2d.js";import"./utils-tczIjzQR.js";import"./ui-CpRondkb.js";import"./payment-BMxBx81N.js";const n=()=>{const[n]=s(),[r,a]=t.useState(null),[o,l]=t.useState(!0);t.useEffect(()=>{const e=n.get("referenceCode")||n.get("reference_sale"),t=n.get("status")||n.get("state_pol"),s=n.get("amount")||n.get("value"),r=n.get("currency"),o=n.get("description"),c=n.get("transaction_id")||n.get("transactionId");let d="ERROR";"4"===t||"APPROVED"===t?d="APPROVED":"6"===t||"DECLINED"===t?d="DECLINED":"7"!==t&&"PENDING"!==t||(d="PENDING"),a({referenceCode:e||"N/A",status:d,amount:s,currency:r,description:o,transactionId:c}),l(!1),"APPROVED"===d&&e&&i(e)},[n]);const i=async e=>{try{const t=localStorage.getItem("payu_screenshot");if(t){(await fetch("http://localhost:4000/api/send-screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referenceCode:e,screenshot:t})})).ok&&localStorage.removeItem("payu_screenshot")}}catch(t){}};return o?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-white mx-auto"}),e.jsx("p",{className:"text-white mt-4 text-xl",children:"Procesando transacción..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-2xl p-8 max-w-md w-full",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-6",children:["APPROVED"===(null==r?void 0:r.status)&&e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),"DECLINED"===(null==r?void 0:r.status)&&e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),"PENDING"===(null==r?void 0:r.status)&&e.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:(e=>{switch(e){case"APPROVED":return"✅ Pago Aprobado";case"DECLINED":return"❌ Pago Rechazado";case"PENDING":return"⏳ Pago Pendiente";default:return"❓ Estado Desconocido"}})((null==r?void 0:r.status)||"ERROR")}),e.jsx("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-semibold mb-6 ${(e=>{switch(e){case"APPROVED":return"text-green-600 bg-green-100";case"DECLINED":return"text-red-600 bg-red-100";case"PENDING":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}})((null==r?void 0:r.status)||"ERROR")}`,children:null==r?void 0:r.status}),e.jsxs("div",{className:"space-y-3 text-left",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Referencia:"}),e.jsx("span",{className:"font-semibold",children:null==r?void 0:r.referenceCode})]}),(null==r?void 0:r.amount)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Monto:"}),e.jsxs("span",{className:"font-semibold",children:[r.amount," ",r.currency]})]}),(null==r?void 0:r.description)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Producto:"}),e.jsx("span",{className:"font-semibold",children:r.description})]}),(null==r?void 0:r.transactionId)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ID Transacción:"}),e.jsx("span",{className:"font-semibold text-sm",children:r.transactionId})]})]}),e.jsxs("div",{className:"mt-6 p-4 rounded-lg",children:["APPROVED"===(null==r?void 0:r.status)&&e.jsx("p",{className:"text-green-700 bg-green-50 p-3 rounded",children:"¡Tu pago ha sido procesado exitosamente! Recibirás un email de confirmación pronto."}),"DECLINED"===(null==r?void 0:r.status)&&e.jsx("p",{className:"text-red-700 bg-red-50 p-3 rounded",children:"El pago fue rechazado. Por favor, intenta nuevamente o contacta a tu banco."}),"PENDING"===(null==r?void 0:r.status)&&e.jsx("p",{className:"text-yellow-700 bg-yellow-50 p-3 rounded",children:"Tu pago está siendo procesado. Te notificaremos cuando se complete."})]}),e.jsx("button",{onClick:()=>{window.location.href="/"},className:"mt-6 w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold py-3 px-6 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105",children:"Volver al Inicio"})]})})})};export{n as default};
