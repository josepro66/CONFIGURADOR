const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/PagoFinalizado-Ctj8hsl2.js","js/three-d1oHV3Mw.js","js/vendor-Bon8Abu2.js","js/utils-tczIjzQR.js","js/ui-CpRondkb.js","js/payment-BMxBx81N.js","js/ConfiguratorWrapper-D31n2wfz.js","js/GLTFLoader-L0pBLRUW.js","js/OrbitControls-DFclDx1A.js"])))=>i.map(i=>d[i]);
import{j as e,u as t,_ as o,T as a,E as n,A as i,D as s,P as r,M as l,a as c,b as d,B as u,V as h,S as p,W as m,c as f,d as x,e as g,R as b,f as y,C as v,g as w,F as C,h as k,i as j}from"./three-d1oHV3Mw.js";import{r as E,R as S}from"./vendor-Bon8Abu2.js";import{A as _,m as F,g as O,S as N}from"./utils-tczIjzQR.js";import{P as R,h as z}from"./ui-CpRondkb.js";import{P as I,a as P,M}from"./payment-BMxBx81N.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();
/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
var L="popstate";function T(e={}){return function(e,t,o,a={}){let{window:n=document.defaultView,v5Compat:i=!1}=a,s=n.history,r="POP",l=null,c=d();null==c&&(c=0,s.replaceState({...s.state,idx:c},""));function d(){return(s.state||{idx:null}).idx}function u(){r="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:r,location:f.location,delta:t})}function h(e,t){r="PUSH";let o=$(f.location,e,t);c=d()+1;let a=B(o,c),u=f.createHref(o);try{s.pushState(a,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;n.location.assign(u)}i&&l&&l({action:r,location:f.location,delta:1})}function p(e,t){r="REPLACE";let o=$(f.location,e,t);c=d();let a=B(o,c),n=f.createHref(o);s.replaceState(a,"",n),i&&l&&l({action:r,location:f.location,delta:0})}function m(e){return function(e,t=!1){let o="http://localhost";"undefined"!=typeof window&&(o="null"!==window.location.origin?window.location.origin:window.location.href);D(o,"No window.location.(origin|href) available to create URL");let a="string"==typeof e?e:U(e);a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=o+a);return new URL(a,o)}(e)}let f={get action(){return r},get location(){return e(n,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(L,u),l=e,()=>{n.removeEventListener(L,u),l=null}},createHref:e=>t(n,e),createURL:m,encodeLocation(e){let t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:h,replace:p,go:e=>s.go(e)};return f}(function(e,t){let{pathname:o,search:a,hash:n}=e.location;return $("",{pathname:o,search:a,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"==typeof t?t:U(t)},0,e)}function D(e,t){if(!1===e||null==e)throw new Error(t)}function A(e,t){if(!e)try{throw new Error(t)}catch(o){}}function B(e,t){return{usr:e.state,key:e.key,idx:t}}function $(e,t,o=null,a){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?V(t):t,state:o,key:t&&t.key||a||Math.random().toString(36).substring(2,10)}}function U({pathname:e="/",search:t="",hash:o=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),o&&"#"!==o&&(e+="#"===o.charAt(0)?o:"#"+o),e}function V(e){let t={};if(e){let o=e.indexOf("#");o>=0&&(t.hash=e.substring(o),e=e.substring(0,o));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function H(e,t,o="/"){return function(e,t,o,a){let n="string"==typeof t?V(t):t,i=ne(n.pathname||"/",o);if(null==i)return null;let s=W(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let o=e.length===t.length&&e.slice(0,-1).every((e,o)=>e===t[o]);return o?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let r=null;for(let l=0;null==r&&l<s.length;++l){let e=ae(i);r=te(s[l],e,a)}return r}(e,t,o,!1)}function W(e,t=[],o=[],a=""){let n=(e,n,i)=>{let s={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};s.relativePath.startsWith("/")&&(D(s.relativePath.startsWith(a),`Absolute route path "${s.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),s.relativePath=s.relativePath.slice(a.length));let r=le([a,s.relativePath]),l=o.concat(s);e.children&&e.children.length>0&&(D(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${r}".`),W(e.children,t,l,r)),(null!=e.path||e.index)&&t.push({path:r,score:ee(r,e.index),routesMeta:l})};return e.forEach((e,t)=>{var o;if(""!==e.path&&(null==(o=e.path)?void 0:o.includes("?")))for(let a of G(e.path))n(e,t,a);else n(e,t)}),t}function G(e){let t=e.split("/");if(0===t.length)return[];let[o,...a]=t,n=o.endsWith("?"),i=o.replace(/\?$/,"");if(0===a.length)return n?[i,""]:[i];let s=G(a.join("/")),r=[];return r.push(...s.map(e=>""===e?i:[i,e].join("/"))),n&&r.push(...s),r.map(t=>e.startsWith("/")&&""===t?"/":t)}var q=/^:[\w-]+$/,K=3,Y=2,X=1,J=10,Q=-2,Z=e=>"*"===e;function ee(e,t){let o=e.split("/"),a=o.length;return o.some(Z)&&(a+=Q),t&&(a+=Y),o.filter(e=>!Z(e)).reduce((e,t)=>e+(q.test(t)?K:""===t?X:J),a)}function te(e,t,o=!1){let{routesMeta:a}=e,n={},i="/",s=[];for(let r=0;r<a.length;++r){let e=a[r],l=r===a.length-1,c="/"===i?t:t.slice(i.length)||"/",d=oe({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&o&&!a[a.length-1].route.index&&(d=oe({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),s.push({params:n,pathname:le([i,d.pathname]),pathnameBase:ce(le([i,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(i=le([i,d.pathnameBase]))}return s}function oe(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[o,a]=function(e,t=!1,o=!0){A("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,o)=>(a.push({paramName:t,isOptional:null!=o}),o?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let i=new RegExp(n,t?void 0:"i");return[i,a]}(e.path,e.caseSensitive,e.end),n=t.match(o);if(!n)return null;let i=n[0],s=i.replace(/(.)\/+$/,"$1"),r=n.slice(1);return{params:a.reduce((e,{paramName:t,isOptional:o},a)=>{if("*"===t){let e=r[a]||"";s=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const n=r[a];return e[t]=o&&!n?void 0:(n||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:s,pattern:e}}function ae(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return A(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ne(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let o=t.endsWith("/")?t.length-1:t.length,a=e.charAt(o);return a&&"/"!==a?null:e.slice(o)||"/"}function ie(e,t,o,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function se(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,o)=>o===t.length-1?e.pathname:e.pathnameBase)}function re(e,t,o,a=!1){let n;"string"==typeof e?n=V(e):(n={...e},D(!n.pathname||!n.pathname.includes("?"),ie("?","pathname","search",n)),D(!n.pathname||!n.pathname.includes("#"),ie("#","pathname","hash",n)),D(!n.search||!n.search.includes("#"),ie("#","search","hash",n)));let i,s=""===e||""===n.pathname,r=s?"/":n.pathname;if(null==r)i=o;else{let e=t.length-1;if(!a&&r.startsWith("..")){let t=r.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:o,search:a="",hash:n=""}="string"==typeof e?V(e):e,i=o?o.startsWith("/")?o:function(e,t){let o=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?o.length>1&&o.pop():"."!==e&&o.push(e)}),o.length>1?o.join("/"):"/"}(o,t):t;return{pathname:i,search:de(a),hash:ue(n)}}(n,i),c=r&&"/"!==r&&r.endsWith("/"),d=(s||"."===r)&&o.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var le=e=>e.join("/").replace(/\/\/+/g,"/"),ce=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),de=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ue=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";var he=["POST","PUT","PATCH","DELETE"];new Set(he);var pe=["GET",...he];new Set(pe);var me=E.createContext(null);me.displayName="DataRouter";var fe=E.createContext(null);fe.displayName="DataRouterState",E.createContext(!1);var xe=E.createContext({isTransitioning:!1});xe.displayName="ViewTransition",E.createContext(new Map).displayName="Fetchers",E.createContext(null).displayName="Await";var ge=E.createContext(null);ge.displayName="Navigation";var be=E.createContext(null);be.displayName="Location";var ye=E.createContext({outlet:null,matches:[],isDataRoute:!1});ye.displayName="Route";var ve=E.createContext(null);function we(){return null!=E.useContext(be)}function Ce(){return D(we(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(be).location}ve.displayName="RouteError";var ke="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function je(e){E.useContext(ge).static||E.useLayoutEffect(e)}function Ee(){let{isDataRoute:e}=E.useContext(ye);return e?function(){let{router:e}=function(e){let t=E.useContext(me);return D(t,ze(e)),t}("useNavigate"),t=Ie("useNavigate"),o=E.useRef(!1);return je(()=>{o.current=!0}),E.useCallback(async(a,n={})=>{A(o.current,ke),o.current&&("number"==typeof a?e.navigate(a):await e.navigate(a,{fromRouteId:t,...n}))},[e,t])}():function(){D(we(),"useNavigate() may be used only in the context of a <Router> component.");let e=E.useContext(me),{basename:t,navigator:o}=E.useContext(ge),{matches:a}=E.useContext(ye),{pathname:n}=Ce(),i=JSON.stringify(se(a)),s=E.useRef(!1);return je(()=>{s.current=!0}),E.useCallback((a,r={})=>{if(A(s.current,ke),!s.current)return;if("number"==typeof a)return void o.go(a);let l=re(a,JSON.parse(i),n,"path"===r.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:le([t,l.pathname])),(r.replace?o.replace:o.push)(l,r.state,r)},[t,o,i,n,e])}()}function Se(e,{relative:t}={}){let{matches:o}=E.useContext(ye),{pathname:a}=Ce(),n=JSON.stringify(se(o));return E.useMemo(()=>re(e,JSON.parse(n),a,"path"===t),[e,n,a,t])}function _e(e,t,o,a){D(we(),"useRoutes() may be used only in the context of a <Router> component.");let n,{navigator:i}=E.useContext(ge),{matches:s}=E.useContext(ye),r=s[s.length-1],l=r?r.params:{},c=r?r.pathname:"/",d=r?r.pathnameBase:"/",u=r&&r.route;{let e=u&&u.path||"";Me(c,!u||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}n=Ce();let h=n.pathname||"/",p=h;if("/"!==d){let e=d.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=H(e,{pathname:p});A(u||null!=m,`No routes matched location "${n.pathname}${n.search}${n.hash}" `),A(null==m||void 0!==m[m.length-1].route.element||void 0!==m[m.length-1].route.Component||void 0!==m[m.length-1].route.lazy,`Matched leaf route at location "${n.pathname}${n.search}${n.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let f=function(e,t=[],o=null){if(null==e){if(!o)return null;if(o.errors)e=o.matches;else{if(0!==t.length||o.initialized||!(o.matches.length>0))return null;e=o.matches}}let a=e,n=null==o?void 0:o.errors;if(null!=n){let e=a.findIndex(e=>e.route.id&&void 0!==(null==n?void 0:n[e.route.id]));D(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(n).join(",")}`),a=a.slice(0,Math.min(a.length,e+1))}let i=!1,s=-1;if(o)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(s=r),e.route.id){let{loaderData:t,errors:n}=o,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){i=!0,a=s>=0?a.slice(0,s+1):[a[0]];break}}}return a.reduceRight((e,r,l)=>{let c,d=!1,u=null,h=null;o&&(c=n&&r.route.id?n[r.route.id]:void 0,u=r.route.errorElement||Oe,i&&(s<0&&0===l?(Me("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,h=null):s===l&&(d=!0,h=r.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,l+1)),m=()=>{let t;return t=c?u:d?h:r.route.Component?E.createElement(r.route.Component,null):r.route.element?r.route.element:e,E.createElement(Re,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=o},children:t})};return o&&(r.route.ErrorBoundary||r.route.errorElement||0===l)?E.createElement(Ne,{location:o.location,revalidation:o.revalidation,component:u,error:c,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}(m&&m.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:le([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:le([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,o,a);return f}function Fe(){let e=function(){var e;let t=E.useContext(ve),o=function(e){let t=E.useContext(fe);return D(t,ze(e)),t}("useRouteError"),a=Ie("useRouteError");if(void 0!==t)return t;return null==(e=o.errors)?void 0:e[a]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),o=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a},i={padding:"2px 4px",backgroundColor:a},s=null;return s=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:i},"ErrorBoundary")," or"," ",E.createElement("code",{style:i},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},t),o?E.createElement("pre",{style:n},o):null,s)}E.createContext(null);var Oe=E.createElement(Fe,null),Ne=class extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){}render(){return void 0!==this.state.error?E.createElement(ye.Provider,{value:this.props.routeContext},E.createElement(ve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Re({routeContext:e,match:t,children:o}){let a=E.useContext(me);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),E.createElement(ye.Provider,{value:e},o)}function ze(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ie(e){let t=function(e){let t=E.useContext(ye);return D(t,ze(e)),t}(e),o=t.matches[t.matches.length-1];return D(o.route.id,`${e} can only be used on routes that contain a unique "id"`),o.route.id}var Pe={};function Me(e,t,o){t||Pe[e]||(Pe[e]=!0,A(!1,o))}function Le({basename:e="/",children:t=null,location:o,navigationType:a="POP",navigator:n,static:i=!1}){D(!we(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=e.replace(/^\/*/,"/"),r=E.useMemo(()=>({basename:s,navigator:n,static:i,future:{}}),[s,n,i]);"string"==typeof o&&(o=V(o));let{pathname:l="/",search:c="",hash:d="",state:u=null,key:h="default"}=o,p=E.useMemo(()=>{let e=ne(l,s);return null==e?null:{location:{pathname:e,search:c,hash:d,state:u,key:h},navigationType:a}},[s,l,c,d,u,h,a]);return A(null!=p,`<Router basename="${s}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==p?null:E.createElement(ge.Provider,{value:r},E.createElement(be.Provider,{children:t,value:p}))}E.memo(function({routes:e,future:t,state:o}){return _e(e,0,o,t)});var Te="get",De="application/x-www-form-urlencoded";function Ae(e){return null!=e&&"string"==typeof e.tagName}function Be(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,o)=>{let a=e[o];return t.concat(Array.isArray(a)?a.map(e=>[o,e]):[[o,a]])},[]))}var $e=null;var Ue=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ve(e){return null==e||Ue.has(e)?e:(A(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${De}"`),null)}function He(e,t){let o,a,n,i,s;if(Ae(r=e)&&"form"===r.tagName.toLowerCase()){let s=e.getAttribute("action");a=s?ne(s,t):null,o=e.getAttribute("method")||Te,n=Ve(e.getAttribute("enctype"))||De,i=new FormData(e)}else if(function(e){return Ae(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ae(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let s=e.form;if(null==s)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let r=e.getAttribute("formaction")||s.getAttribute("action");if(a=r?ne(r,t):null,o=e.getAttribute("formmethod")||s.getAttribute("method")||Te,n=Ve(e.getAttribute("formenctype"))||Ve(s.getAttribute("enctype"))||De,i=new FormData(s,e),!function(){if(null===$e)try{new FormData(document.createElement("form"),0),$e=!1}catch(e){$e=!0}return $e}()){let{name:t,type:o,value:a}=e;if("image"===o){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,a)}}else{if(Ae(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=Te,a=null,n=De,s=e}var r;return i&&"text/plain"===n&&(s=i,i=void 0),{action:a,method:o.toLowerCase(),encType:n,formData:i,body:s}}function We(e,t){if(!1===e||null==e)throw new Error(t)}function Ge(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}async function qe(e,t,o){return function(e,t){let o=new Set;return new Set(t),e.reduce((e,t)=>{let a=JSON.stringify(function(e){let t={},o=Object.keys(e).sort();for(let a of o)t[a]=e[a];return t}(t));return o.has(a)||(o.add(a),e.push({key:a,link:t})),e},[])}((await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let o=await import(e.module);return t[e.id]=o,o}catch(o){return window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(a,o);return e.links?e.links():[]}return[]}))).flat(1).filter(Ge).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}function Ke(e,t,o,a,n,i){let s=(e,t)=>!o[t]||e.route.id!==o[t].route.id,r=(e,t)=>{var a;return o[t].pathname!==e.pathname||(null==(a=o[t].route.path)?void 0:a.endsWith("*"))&&o[t].params["*"]!==e.params["*"]};return"assets"===i?t.filter((e,t)=>s(e,t)||r(e,t)):"data"===i?t.filter((t,i)=>{var l;let c=a.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(s(t,i)||r(t,i))return!0;if(t.route.shouldRevalidate){let a=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:(null==(l=o[0])?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof a)return a}return!0}):[]}function Ye(e,t,{includeHydrateFallback:o}={}){return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let n=[a.module];return a.clientActionModule&&(n=n.concat(a.clientActionModule)),a.clientLoaderModule&&(n=n.concat(a.clientLoaderModule)),o&&a.hydrateFallbackModule&&(n=n.concat(a.hydrateFallbackModule)),a.imports&&(n=n.concat(a.imports)),n}).flat(1),[...new Set(a)];var a}function Xe(){let e=E.useContext(me);return We(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Je=E.createContext(void 0);function Qe(){let e=E.useContext(Je);return We(e,"You must render this element inside a <HydratedRouter> element"),e}function Ze(e,t){return o=>{e&&e(o),o.defaultPrevented||t(o)}}function et({page:e,...t}){let{router:o}=Xe(),a=E.useMemo(()=>H(o.routes,e,o.basename),[o.routes,e,o.basename]);return a?E.createElement(tt,{page:e,matches:a,...t}):null}function tt({page:e,matches:t,...o}){let a=Ce(),{manifest:n,routeModules:i}=Qe(),{basename:s}=Xe(),{loaderData:r,matches:l}=function(){let e=E.useContext(fe);return We(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}(),c=E.useMemo(()=>Ke(e,t,l,n,a,"data"),[e,t,l,n,a]),d=E.useMemo(()=>Ke(e,t,l,n,a,"assets"),[e,t,l,n,a]),u=E.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let o=new Set,l=!1;if(t.forEach(e=>{var t;let a=n.routes[e.route.id];a&&a.hasLoader&&(!c.some(t=>t.route.id===e.route.id)&&e.route.id in r&&(null==(t=i[e.route.id])?void 0:t.shouldRevalidate)||a.hasClientLoader?l=!0:o.add(e.route.id))}),0===o.size)return[];let d=function(e,t,o){let a="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===a.pathname?a.pathname=`_root.${o}`:t&&"/"===ne(a.pathname,t)?a.pathname=`${t.replace(/\/$/,"")}/_root.${o}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${o}`,a}(e,s,"data");return l&&o.size>0&&d.searchParams.set("_routes",t.filter(e=>o.has(e.route.id)).map(e=>e.route.id).join(",")),[d.pathname+d.search]},[s,r,a,n,c,t,e,i]),h=E.useMemo(()=>Ye(d,n),[d,n]),p=function(e){let{manifest:t,routeModules:o}=Qe(),[a,n]=E.useState([]);return E.useEffect(()=>{let a=!1;return qe(e,t,o).then(e=>{a||n(e)}),()=>{a=!0}},[e,t,o]),a}(d);return E.createElement(E.Fragment,null,u.map(e=>E.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...o})),h.map(e=>E.createElement("link",{key:e,rel:"modulepreload",href:e,...o})),p.map(({key:e,link:t})=>E.createElement("link",{key:e,nonce:o.nonce,...t})))}function ot(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}Je.displayName="FrameworkContext";var at="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{at&&(window.__reactRouterVersion="7.8.0")}catch(Cl){}function nt({basename:e,children:t,window:o}){let a=E.useRef();null==a.current&&(a.current=T({window:o,v5Compat:!0}));let n=a.current,[i,s]=E.useState({action:n.action,location:n.location}),r=E.useCallback(e=>{E.startTransition(()=>s(e))},[s]);return E.useLayoutEffect(()=>n.listen(r),[n,r]),E.createElement(Le,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:n})}var it=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=E.forwardRef(function({onClick:e,discover:t="render",prefetch:o="none",relative:a,reloadDocument:n,replace:i,state:s,target:r,to:l,preventScrollReset:c,viewTransition:d,...u},h){let p,{basename:m}=E.useContext(ge),f="string"==typeof l&&it.test(l),x=!1;if("string"==typeof l&&f&&(p=l,at))try{let e=new URL(window.location.href),t=l.startsWith("//")?new URL(e.protocol+l):new URL(l),o=ne(t.pathname,m);t.origin===e.origin&&null!=o?l=o+t.search+t.hash:x=!0}catch(Cl){A(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=function(e,{relative:t}={}){D(we(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:a}=E.useContext(ge),{hash:n,pathname:i,search:s}=Se(e,{relative:t}),r=i;return"/"!==o&&(r="/"===i?o:le([o,i])),a.createHref({pathname:r,search:s,hash:n})}(l,{relative:a}),[b,y,v]=function(e,t){let o=E.useContext(Je),[a,n]=E.useState(!1),[i,s]=E.useState(!1),{onFocus:r,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:u}=t,h=E.useRef(null);E.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),E.useEffect(()=>{if(a){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[a]);let p=()=>{n(!0)},m=()=>{n(!1),s(!1)};return o?"intent"!==e?[i,h,{}]:[i,h,{onFocus:Ze(r,p),onBlur:Ze(l,m),onMouseEnter:Ze(c,p),onMouseLeave:Ze(d,m),onTouchStart:Ze(u,p)}]:[!1,h,{}]}(o,u),w=function(e,{target:t,replace:o,state:a,preventScrollReset:n,relative:i,viewTransition:s}={}){let r=Ee(),l=Ce(),c=Se(e,{relative:i});return E.useCallback(d=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(d,t)){d.preventDefault();let t=void 0!==o?o:U(l)===U(c);r(e,{replace:t,state:a,preventScrollReset:n,relative:i,viewTransition:s})}},[l,r,c,o,a,t,e,n,i,s])}(l,{replace:i,state:s,target:r,preventScrollReset:c,relative:a,viewTransition:d});let C=E.createElement("a",{...u,...v,href:p||g,onClick:x||n?e:function(t){e&&e(t),t.defaultPrevented||w(t)},ref:ot(h,y),target:r,"data-discover":f||"render"!==t?void 0:"true"});return b&&!f?E.createElement(E.Fragment,null,C,E.createElement(et,{page:g})):C});function rt(e){let t=E.useContext(me);return D(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}function lt(e){A("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=E.useRef(Be(e)),o=E.useRef(!1),a=Ce(),n=E.useMemo(()=>function(e,t){let o=Be(e);return t&&t.forEach((e,a)=>{o.has(a)||t.getAll(a).forEach(e=>{o.append(a,e)})}),o}(a.search,o.current?null:t.current),[a.search]),i=Ee(),s=E.useCallback((e,t)=>{const a=Be("function"==typeof e?e(new URLSearchParams(n)):e);o.current=!0,i("?"+a,t)},[i,n]);return[n,s]}st.displayName="Link",E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:o="",end:a=!1,style:n,to:i,viewTransition:s,children:r,...l},c){let d=Se(i,{relative:l.relative}),u=Ce(),h=E.useContext(fe),{navigator:p,basename:m}=E.useContext(ge),f=null!=h&&function(e,{relative:t}={}){let o=E.useContext(xe);D(null!=o,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=rt("useViewTransitionState"),n=Se(e,{relative:t});if(!o.isTransitioning)return!1;let i=ne(o.currentLocation.pathname,a)||o.currentLocation.pathname,s=ne(o.nextLocation.pathname,a)||o.nextLocation.pathname;return null!=oe(n.pathname,s)||null!=oe(n.pathname,i)}(d)&&!0===s,x=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,g=u.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(g=g.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&m&&(b=ne(b,m)||b);const y="/"!==x&&x.endsWith("/")?x.length-1:x.length;let v,w=g===x||!a&&g.startsWith(x)&&"/"===g.charAt(y),C=null!=b&&(b===x||!a&&b.startsWith(x)&&"/"===b.charAt(x.length)),k={isActive:w,isPending:C,isTransitioning:f},j=w?e:void 0;v="function"==typeof o?o(k):[o,w?"active":null,C?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let S="function"==typeof n?n(k):n;return E.createElement(st,{...l,"aria-current":j,className:v,ref:c,style:S,to:i,viewTransition:s},"function"==typeof r?r(k):r)}).displayName="NavLink",E.forwardRef(({discover:e="render",fetcherKey:t,navigate:o,reloadDocument:a,replace:n,state:i,method:s=Te,action:r,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:u,...h},p)=>{let m=function(){let{router:e}=rt("useSubmit"),{basename:t}=E.useContext(ge),o=Ie("useRouteId");return E.useCallback(async(a,n={})=>{let{action:i,method:s,encType:r,formData:l,body:c}=He(a,t);if(!1===n.navigate){let t=n.fetcherKey||dt();await e.fetch(t,o,n.action||i,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||s,formEncType:n.encType||r,flushSync:n.flushSync})}else await e.navigate(n.action||i,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||s,formEncType:n.encType||r,replace:n.replace,state:n.state,fromRouteId:o,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,o])}(),f=function(e,{relative:t}={}){let{basename:o}=E.useContext(ge),a=E.useContext(ye);D(a,"useFormAction must be used inside a RouteContext");let[n]=a.matches.slice(-1),i={...Se(e||".",{relative:t})},s=Ce();if(null==e){i.search=s.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let o=e.toString();i.search=o?`?${o}`:""}}e&&"."!==e||!n.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==o&&(i.pathname="/"===i.pathname?o:le([o,i.pathname]));return U(i)}(r,{relative:c}),x="get"===s.toLowerCase()?"get":"post",g="string"==typeof r&&it.test(r);return E.createElement("form",{ref:p,method:x,action:f,onSubmit:a?l:e=>{if(l&&l(e),e.defaultPrevented)return;e.preventDefault();let a=e.nativeEvent.submitter,r=(null==a?void 0:a.getAttribute("formmethod"))||s;m(a||e.currentTarget,{fetcherKey:t,method:r,navigate:o,replace:n,state:i,relative:c,preventScrollReset:d,viewTransition:u})},...h,"data-discover":g||"render"!==e?void 0:"true"})}).displayName="Form";var ct=0,dt=()=>`__${String(++ct)}__`;const ut=({isVisible:t})=>{const[o,a]=E.useState(0),[n]=E.useState(Date.now());return E.useEffect(()=>{if(t){const e=setInterval(()=>{const e=Date.now()-n,t=Math.min(e/3e3*100,100);a(t)},50);return()=>clearInterval(e)}a(0)},[t,n]),e.jsx(_,{children:t&&e.jsxs(F.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1.2,ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999,color:"white",fontFamily:"Arial, sans-serif"},children:[e.jsx(F.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},style:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px",color:"#00FFFF",textShadow:"0 0 20px #00FFFF, 0 0 40px #0080FF"},children:"BEATO8"}),e.jsx(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8,ease:"easeOut"},style:{fontSize:"18px",fontWeight:"bold",marginBottom:"40px",color:"#ffffff",textShadow:"0 0 10px #ffffff"},children:"CONTROLADOR MIDI"}),e.jsx(F.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{width:"100px",height:"100px",border:"6px solid rgba(0, 255, 255, 0.1)",borderTop:"6px solid #00FFFF",borderRadius:"50%",marginBottom:"40px",boxShadow:"0 0 30px rgba(0, 255, 255, 0.4)"}}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},style:{fontSize:"20px",fontWeight:"bold",textAlign:"center",marginBottom:"20px",color:"#00FFFF"},children:["Cargando BEATO8... ",Math.round(o),"%"]}),o>=100&&e.jsx(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},style:{fontSize:"18px",color:"#00FF80",fontWeight:"bold",marginBottom:"30px",textShadow:"0 0 10px #00FF80"},children:"¡BEATO8 listo para configurar!"}),e.jsx(F.div,{style:{width:"400px",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"40px"},children:e.jsx(F.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.1,ease:"linear"},style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #00FFFF, #0080FF, #00FFFF)",borderRadius:"4px",boxShadow:"0 0 15px rgba(0, 255, 255, 0.6)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),e.jsx(F.div,{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[0,1,2].map(t=>e.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeInOut"},style:{width:"12px",height:"12px",backgroundColor:"#00FFFF",borderRadius:"50%",boxShadow:"0 0 10px rgba(0, 255, 255, 0.6)"}},t))}),e.jsx("style",{children:"\n            @keyframes shimmer {\n              0% { background-position: -200% 0; }\n              100% { background-position: 200% 0; }\n            }\n          "})]})})},ht=({type:t="default",className:o=""})=>{const a="animate-pulse bg-gray-700 rounded";switch(t){case"configurator":return e.jsxs("div",{className:`w-full h-screen ${o}`,children:[e.jsx("div",{className:`${a} w-full h-3/4 mb-4`}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx("div",{className:`${a} w-24 h-10`}),e.jsx("div",{className:`${a} w-24 h-10`}),e.jsx("div",{className:`${a} w-24 h-10`})]}),e.jsx("div",{className:"flex gap-2",children:Array.from({length:8}).map((t,o)=>e.jsx("div",{className:`${a} w-12 h-12 rounded-full`},o))})]});case"payment":return e.jsxs("div",{className:`w-full max-w-md mx-auto p-6 ${o}`,children:[e.jsx("div",{className:`${a} w-full h-12 mb-4`}),e.jsx("div",{className:`${a} w-full h-12 mb-4`}),e.jsx("div",{className:`${a} w-full h-12 mb-4`}),e.jsx("div",{className:`${a} w-32 h-12 mx-auto`})]});case"product":return e.jsxs("div",{className:`w-full ${o}`,children:[e.jsx("div",{className:`${a} w-full h-64 mb-4`}),e.jsx("div",{className:`${a} w-3/4 h-6 mb-2`}),e.jsx("div",{className:`${a} w-1/2 h-4 mb-4`}),e.jsx("div",{className:`${a} w-24 h-10`})]});default:return e.jsx("div",{className:`w-full h-32 ${o}`,children:e.jsx("div",{className:`${a} w-full h-full`})})}};class pt extends E.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?this.props.fallback||e.jsxs("div",{className:"error-boundary-fallback",children:[e.jsx("h2",{children:"Algo salió mal"}),e.jsx("p",{children:"No se pudo cargar el componente. Por favor, recarga la página."}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#00FFFF",color:"#000",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Recargar página"})]}):this.props.children}}S.lazy(()=>o(()=>Promise.resolve().then(()=>qr),[]).then(e=>({default:e.default}))),S.lazy(()=>o(()=>Promise.resolve().then(()=>Qr),void 0).then(e=>({default:e.default}))),S.lazy(()=>o(()=>Promise.resolve().then(()=>al),void 0).then(e=>({default:e.default}))),S.lazy(()=>o(()=>Promise.resolve().then(()=>ll),void 0).then(e=>({default:e.default}))),S.lazy(()=>o(()=>Promise.resolve().then(()=>pl),void 0).then(e=>({default:e.default}))),S.lazy(()=>o(()=>Promise.resolve().then(()=>bl),void 0).then(e=>({default:e.default})));const mt=S.lazy(()=>o(()=>import("./PagoFinalizado-Ctj8hsl2.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>({default:e.default}))),ft=S.lazy(()=>o(()=>import("./ConfiguratorWrapper-D31n2wfz.js"),__vite__mapDeps([6,1,2])).then(e=>({default:e.default}))),xt="pointermove",gt="tsParticles - Error",bt=100,yt=.5,vt=1e3,wt=0,Ct=0,kt=0,jt="random",Et="mid",St=255,_t=360,Ft=255;var Ot,Nt;function Rt(e){return"string"==typeof e}function zt(e){return"number"==typeof e}function It(e){return"object"==typeof e&&null!==e}function Pt(e){return Array.isArray(e)}function Mt(e){return null==e}(Nt=Ot||(Ot={})).bottom="bottom",Nt.bottomLeft="bottom-left",Nt.bottomRight="bottom-right",Nt.left="left",Nt.none="none",Nt.right="right",Nt.top="top",Nt.topLeft="top-left",Nt.topRight="top-right",Nt.outside="outside",Nt.inside="inside";class Lt{constructor(e,t,o){if(this._updateFromAngle=(e,t)=>{this.x=Math.cos(e)*t,this.y=Math.sin(e)*t},!zt(e)&&e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:kt}else{if(void 0===e||void 0===t)throw new Error(`${gt} Vector3d not initialized correctly`);this.x=e,this.y=t,this.z=o??kt}}static get origin(){return Lt.create(wt,Ct,kt)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return Lt.create(e.x,e.y,e.z)}static create(e,t,o){return new Lt(e,t,o)}add(e){return Lt.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return Lt.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return Lt.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**2+this.y**2}mult(e){return Lt.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;0!=e&&this.multTo(1/e)}rotate(e){return Lt.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),kt)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:kt}sub(e){return Lt.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class Tt extends Lt{constructor(e,t){super(e,t,kt)}static get origin(){return Tt.create(wt,Ct)}static clone(e){return Tt.create(e.x,e.y)}static create(e,t){return new Tt(e,t)}}let Dt=Math.random;function At(){return Bt(Dt(),0,1-Number.EPSILON)}function Bt(e,t,o){return Math.min(Math.max(e,t),o)}function $t(e,t,o,a){return Math.floor((e*o+t*a)/(o+a))}function Ut(e){const t=Wt(e);let o=Ht(e);return t===o&&(o=0),At()*(t-o)+o}function Vt(e){return zt(e)?e:Ut(e)}function Ht(e){return zt(e)?e:e.min}function Wt(e){return zt(e)?e:e.max}function Gt(e,t){if(e===t||void 0===t&&zt(e))return e;const o=Ht(e),a=Wt(e);return void 0!==t?{min:Math.min(o,t),max:Math.max(a,t)}:Gt(o,a)}function qt(e,t){const o=e.x-t.x,a=e.y-t.y;return{dx:o,dy:a,distance:Math.sqrt(o**2+a**2)}}function Kt(e,t){return qt(e,t).distance}function Yt(e){return e*Math.PI/180}function Xt(e,t,o,a){return Tt.create(e.x*(o-a)/(o+a)+2*t.x*a/(o+a),e.y)}function Jt(e){var t,o;return{x:((null==(t=e.position)?void 0:t.x)??At()*bt)*e.size.width/bt,y:((null==(o=e.position)?void 0:o.y)??At()*bt)*e.size.height/bt}}function Qt(e){var t,o;const a={x:void 0!==(null==(t=e.position)?void 0:t.x)?Vt(e.position.x):void 0,y:void 0!==(null==(o=e.position)?void 0:o.y)?Vt(e.position.y):void 0};return Jt({size:e.size,position:a})}function Zt(e){return e?e.endsWith("%")?parseFloat(e)/bt:parseFloat(e):1}var eo,to,oo,ao,no,io,so,ro,lo,co,uo,ho;(to=eo||(eo={})).auto="auto",to.increase="increase",to.decrease="decrease",to.random="random",(ao=oo||(oo={})).increasing="increasing",ao.decreasing="decreasing",(io=no||(no={})).none="none",io.max="max",io.min="min",(ro=so||(so={})).bottom="bottom",ro.left="left",ro.right="right",ro.top="top",(co=lo||(lo={})).precise="precise",co.percent="percent",(ho=uo||(uo={})).max="max",ho.min="min",ho.random="random";const po={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function mo(){return po}function fo(e){const t={bounced:!1},{pSide:o,pOtherSide:a,rectSide:n,rectOtherSide:i,velocity:s,factor:r}=e;return a.min<i.min||a.min>i.max||a.max<i.min||a.max>i.max||(o.max>=n.min&&o.max<=(n.max+n.min)*yt&&s>0||o.min<=n.max&&o.min>(n.max+n.min)*yt&&s<0)&&(t.velocity=s*-r,t.bounced=!0),t}function xo(){return"undefined"==typeof window||!window||void 0===window.document||!window.document}function go(e,t){return e===t||Pt(t)&&t.indexOf(e)>-1}async function bo(e,t){try{await document.fonts.load(`${t??"400"} 36px '${e??"Verdana"}'`)}catch{}}function yo(e){return Math.floor(At()*e.length)}function vo(e,t,o=!0){return e[void 0!==t&&o?t%e.length:yo(e)]}function wo(e,t,o,a,n){return function(e,t,o,a){let n=!0;a&&a!==so.bottom||(n=e.top<t.height+o.x);!n||a&&a!==so.left||(n=e.right>o.x);!n||a&&a!==so.right||(n=e.left<t.width+o.y);!n||a&&a!==so.top||(n=e.bottom>o.y);return n}(Co(e,a??0),t,o,n)}function Co(e,t){return{bottom:e.y+t,left:e.x-t,right:e.x+t,top:e.y-t}}function ko(e,...t){for(const o of t){if(null==o)continue;if(!It(o)){e=o;continue}const t=Array.isArray(o);!t||!It(e)&&e&&Array.isArray(e)?t||!It(e)&&e&&!Array.isArray(e)||(e={}):e=[];for(const a in o){if("__proto__"===a)continue;const t=o[a],n=e;n[a]=It(t)&&Array.isArray(t)?t.map(e=>ko(n[a],e)):ko(n[a],t)}}return e}function jo(e,t){return!!zo(t,t=>t.enable&&go(e,t.mode))}function Eo(e,t,o){No(t,t=>{const a=t.mode;t.enable&&go(e,a)&&function(e,t){const o=e.selectors;No(o,o=>{t(o,e)})}(t,o)})}function So(e,t){if(t&&e)return zo(e,e=>function(e,t){const o=No(t,t=>e.matches(t));return Pt(o)?o.some(e=>e):o}(t,e.selectors))}function _o(e){return{position:e.getPosition(),radius:e.getRadius(),mass:e.getMass(),velocity:e.velocity,factor:Tt.create(Vt(e.options.bounce.horizontal.value),Vt(e.options.bounce.vertical.value))}}function Fo(e,t){const{x:o,y:a}=e.velocity.sub(t.velocity),[n,i]=[e.position,t.position],{dx:s,dy:r}=qt(i,n);if(o*s+a*r<0)return;const l=-Math.atan2(r,s),c=e.mass,d=t.mass,u=e.velocity.rotate(l),h=t.velocity.rotate(l),p=Xt(u,h,c,d),m=Xt(h,u,c,d),f=p.rotate(-l),x=m.rotate(-l);e.velocity.x=f.x*e.factor.x,e.velocity.y=f.y*e.factor.y,t.velocity.x=x.x*t.factor.x,t.velocity.y=x.y*t.factor.y}function Oo(e,t){const o=Co(e.getPosition(),e.getRadius()),a=e.options.bounce,n=fo({pSide:{min:o.left,max:o.right},pOtherSide:{min:o.top,max:o.bottom},rectSide:{min:t.left,max:t.right},rectOtherSide:{min:t.top,max:t.bottom},velocity:e.velocity.x,factor:Vt(a.horizontal.value)});n.bounced&&(void 0!==n.velocity&&(e.velocity.x=n.velocity),void 0!==n.position&&(e.position.x=n.position));const i=fo({pSide:{min:o.top,max:o.bottom},pOtherSide:{min:o.left,max:o.right},rectSide:{min:t.top,max:t.bottom},rectOtherSide:{min:t.left,max:t.right},velocity:e.velocity.y,factor:Vt(a.vertical.value)});i.bounced&&(void 0!==i.velocity&&(e.velocity.y=i.velocity),void 0!==i.position&&(e.position.y=i.position))}function No(e,t){return Pt(e)?e.map((e,o)=>t(e,o)):t(e,0)}function Ro(e,t,o){return Pt(e)?vo(e,t,o):e}function zo(e,t){if(Pt(e))return e.find((e,o)=>t(e,o));return t(e,0)?e:void 0}function Io(e,t){return function(e,t){if(e.mode!==lo.percent){const{mode:t,...o}=e;return o}return"x"in e?{x:e.x/bt*t.width,y:e.y/bt*t.height}:{width:e.width/bt*t.width,height:e.height/bt*t.height}}(e,t)}function Po(e,t,o,a,n){if(e.destroyed||!t||!t.enable||(t.maxLoops??0)>0&&(t.loops??0)>(t.maxLoops??0))return;const i=(t.velocity??0)*n.factor,s=t.min,r=t.max,l=t.decay??1;if(t.time||(t.time=0),(t.delayTime??0)>0&&t.time<(t.delayTime??0)&&(t.time+=n.value),!((t.delayTime??0)>0&&t.time<(t.delayTime??0))){switch(t.status){case oo.increasing:t.value>=r?(o?t.status=oo.decreasing:t.value-=r,t.loops||(t.loops=0),t.loops++):t.value+=i;break;case oo.decreasing:t.value<=s?(o?t.status=oo.increasing:t.value+=r,t.loops||(t.loops=0),t.loops++):t.value-=i}t.velocity&&1!==l&&(t.velocity*=l),function(e,t,o,a,n){switch(t){case no.max:o>=n&&e.destroy();break;case no.min:o<=a&&e.destroy()}}(e,a,t.value,s,r),e.destroyed||(t.value=Bt(t.value,s,r))}}var Mo,Lo,To,Do,Ao,Bo,$o,Uo,Vo,Ho,Wo,Go,qo,Ko,Yo,Xo,Jo,Qo,Zo,ea,ta;function oa(e,t,o,a=!0){if(!t)return;const n=Rt(t)?{value:t}:t;if(Rt(n.value))return aa(e,n.value,o,a);if(Pt(n.value))return oa(e,{value:vo(n.value,o,a)});for(const i of e.colorManagers.values()){const e=i.handleRangeColor(n);if(e)return e}}function aa(e,t,o,a=!0){if(!t)return;const n=Rt(t)?{value:t}:t;if(Rt(n.value))return n.value===jt?ra():function(e,t){return function(e,t){if(t)for(const o of e.colorManagers.values())if(t.startsWith(o.stringPrefix))return o.parseString(t)}(e,t)}(e,n.value);if(Pt(n.value))return aa(e,{value:vo(n.value,o,a)});for(const i of e.colorManagers.values()){const e=i.handleColor(n);if(e)return e}}function na(e,t,o,a=!0){const n=oa(e,t,o,a);return n?ia(n):void 0}function ia(e){const t=e.r/St,o=e.g/St,a=e.b/St,n=Math.max(t,o,a),i=Math.min(t,o,a),s={h:0,l:(n+i)*yt,s:0};return n!==i&&(s.s=s.l<yt?(n-i)/(n+i):(n-i)/(2-n-i),s.h=t===n?(o-a)/(n-i):s.h=o===n?2+(a-t)/(n-i):4+(t-o)/(n-i)),s.l*=100,s.s*=100,s.h*=60,s.h<0&&(s.h+=_t),s.h>=_t&&(s.h-=_t),s}function sa(e){const t=(e.h%_t+_t)%_t,o=Math.max(0,Math.min(100,e.s)),a=Math.max(0,Math.min(100,e.l)),n=t/_t,i=o/100,s=a/100;if(0===o){const e=Math.round(s*Ft);return{r:e,g:e,b:e}}const r=(e,t,o)=>{if(o<0&&o++,o>1&&o--,6*o<1)return e+6*(t-e)*o;if(2*o<1)return t;if(3*o<2){return e+(t-e)*(2/3-o)*6}return e},l=s<yt?s*(1+i):s+i-s*i,c=2*s-l,d=1/3,u=Math.min(Ft,Ft*r(c,l,n+d)),h=Math.min(Ft,Ft*r(c,l,n)),p=Math.min(Ft,Ft*r(c,l,n-d));return{r:Math.round(u),g:Math.round(h),b:Math.round(p)}}function ra(e){return{b:Math.floor(Ut(Gt(0,256))),g:Math.floor(Ut(Gt(0,256))),r:Math.floor(Ut(Gt(0,256)))}}function la(e,t){return`rgba(${e.r}, ${e.g}, ${e.b}, ${t??1})`}function ca(e,t){return`hsla(${e.h}, ${e.s}%, ${e.l}%, ${t??1})`}function da(e,t,o,a){let n=e,i=t;return void 0===n.r&&(n=sa(e)),void 0===i.r&&(i=sa(t)),{b:$t(n.b,i.b,o,a),g:$t(n.g,i.g,o,a),r:$t(n.r,i.r,o,a)}}function ua(e,t,o){if(o===jt)return ra();if(o!==Et)return o;{const o=e.getFillColor()??e.getStrokeColor(),a=(null==t?void 0:t.getFillColor())??(null==t?void 0:t.getStrokeColor());if(o&&a&&t)return da(o,a,e.getRadius(),t.getRadius());{const e=o??a;if(e)return sa(e)}}}function ha(e,t,o,a){const n=Rt(t)?t:t.value;return n===jt?a?oa(e,{value:n}):o?jt:Et:n===Et?Et:oa(e,{value:n})}function pa(e,t,o){const a={h:{enable:!1,value:e.h},s:{enable:!1,value:e.s},l:{enable:!1,value:e.l}};return t&&(ma(a.h,t.h,o),ma(a.s,t.s,o),ma(a.l,t.l,o)),a}function ma(e,t,o){e.enable=t.enable,e.enable?(e.velocity=Vt(t.speed)/bt*o,e.decay=1-Vt(t.decay),e.status=oo.increasing,e.loops=0,e.maxLoops=Vt(t.count),e.time=0,e.delayTime=Vt(t.delay)*vt,t.sync||(e.velocity*=At(),e.value*=At()),e.initialValue=e.value,e.offset=Gt(t.offset)):e.velocity=0}function fa(e,t,o,a){if(!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=a.value),(e.delayTime??0)>0&&e.time<(e.delayTime??0))return;const n=e.offset?Ut(e.offset):0,i=(e.velocity??0)*a.factor+3.6*n,s=e.decay??1,r=Wt(t),l=Ht(t);if(o&&e.status!==oo.increasing){e.value-=i;const t=0;e.value<t&&(e.loops||(e.loops=0),e.loops++,e.status=oo.increasing)}else e.value+=i,e.value>r&&(e.loops||(e.loops=0),e.loops++,o?e.status=oo.decreasing:e.value-=r);e.velocity&&1!==s&&(e.velocity*=s),e.value=Bt(e.value,l,r)}function xa(e,t){if(!e)return;const{h:o,s:a,l:n}=e,i={min:0,max:100},s={min:0,max:100};o&&fa(o,{min:0,max:360},!1,t),a&&fa(a,i,!0,t),n&&fa(n,s,!0,t)}function ga(e,t,o){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(o.x,o.y),e.closePath()}(Lo=Mo||(Mo={})).darken="darken",Lo.enlighten="enlighten";class ba{constructor(){this.value=""}static create(e,t){const o=new ba;return o.load(e),void 0!==t&&(Rt(t)||Pt(t)?o.load({value:t}):o.load(t)),o}load(e){Mt(e)||Mt(e.value)||(this.value=e.value)}}(Do=To||(To={})).circle="circle",Do.rectangle="rectangle";class ya{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){Mt(e)||(void 0!==e.count&&(this.count=Gt(e.count)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=Gt(e.speed)),void 0!==e.decay&&(this.decay=Gt(e.decay)),void 0!==e.delay&&(this.delay=Gt(e.delay)),void 0!==e.sync&&(this.sync=e.sync))}}class va extends ya{constructor(){super(),this.mode=eo.auto,this.startValue=uo.random}load(e){super.load(e),Mt(e)||(void 0!==e.mode&&(this.mode=e.mode),void 0!==e.startValue&&(this.startValue=e.startValue))}}class wa extends ya{constructor(){super(),this.offset=0,this.sync=!0}load(e){super.load(e),Mt(e)||void 0!==e.offset&&(this.offset=Gt(e.offset))}}class Ca{constructor(){this.h=new wa,this.s=new wa,this.l=new wa}load(e){Mt(e)||(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class ka extends ba{constructor(){super(),this.animation=new Ca}static create(e,t){const o=new ka;return o.load(e),void 0!==t&&(Rt(t)||Pt(t)?o.load({value:t}):o.load(t)),o}load(e){if(super.load(e),Mt(e))return;const t=e.animation;void 0!==t&&(void 0!==t.enable?this.animation.h.load(t):this.animation.load(e.animation))}}(Bo=Ao||(Ao={})).absorb="absorb",Bo.bounce="bounce",Bo.destroy="destroy";class ja{constructor(){this.speed=2}load(e){Mt(e)||void 0!==e.speed&&(this.speed=e.speed)}}class Ea{constructor(){this.enable=!0,this.retries=0}load(e){Mt(e)||(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.retries&&(this.retries=e.retries))}}class Sa{constructor(){this.value=0}load(e){Mt(e)||Mt(e.value)||(this.value=Gt(e.value))}}class _a extends Sa{constructor(){super(),this.animation=new ya}load(e){if(super.load(e),Mt(e))return;const t=e.animation;void 0!==t&&this.animation.load(t)}}class Fa extends _a{constructor(){super(),this.animation=new va}load(e){super.load(e)}}class Oa extends Sa{constructor(){super(),this.value=1}}class Na{constructor(){this.horizontal=new Oa,this.vertical=new Oa}load(e){Mt(e)||(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class Ra{constructor(){this.absorb=new ja,this.bounce=new Na,this.enable=!1,this.maxSpeed=50,this.mode=Ao.bounce,this.overlap=new Ea}load(e){Mt(e)||(this.absorb.load(e.absorb),this.bounce.load(e.bounce),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.maxSpeed&&(this.maxSpeed=Gt(e.maxSpeed)),void 0!==e.mode&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class za{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(Mt(e))return;const t=e.options;if(void 0!==t)for(const o in t){const e=t[o];e&&(this.options[o]=ko(this.options[o]??{},e))}void 0!==e.close&&(this.close=e.close),void 0!==e.fill&&(this.fill=e.fill),void 0!==e.type&&(this.type=e.type)}}class Ia{constructor(){this.offset=0,this.value=90}load(e){Mt(e)||(void 0!==e.offset&&(this.offset=Gt(e.offset)),void 0!==e.value&&(this.value=Gt(e.value)))}}class Pa{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(!Mt(e)&&(void 0!==e.distance&&(this.distance=Gt(e.distance)),void 0!==e.enable&&(this.enable=e.enable),e.rotate)){const t=e.rotate.x;void 0!==t&&(this.rotate.x=t);const o=e.rotate.y;void 0!==o&&(this.rotate.y=o)}}}class Ma{constructor(){this.x=50,this.y=50,this.mode=lo.percent,this.radius=0}load(e){Mt(e)||(void 0!==e.x&&(this.x=e.x),void 0!==e.y&&(this.y=e.y),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.radius&&(this.radius=e.radius))}}class La{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){Mt(e)||(void 0!==e.acceleration&&(this.acceleration=Gt(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.inverse&&(this.inverse=e.inverse),void 0!==e.maxSpeed&&(this.maxSpeed=Gt(e.maxSpeed)))}}class Ta{constructor(){this.clamp=!0,this.delay=new Sa,this.enable=!1,this.options={}}load(e){Mt(e)||(void 0!==e.clamp&&(this.clamp=e.clamp),this.delay.load(e.delay),void 0!==e.enable&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=ko(this.options,e.options)))}}class Da{load(e){Mt(e)||(void 0!==e.color&&(this.color=ba.create(this.color,e.color)),void 0!==e.image&&(this.image=e.image))}}class Aa{constructor(){this.enable=!1,this.length=10,this.fill=new Da}load(e){Mt(e)||(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.fill&&this.fill.load(e.fill),void 0!==e.length&&(this.length=e.length))}}(Uo=$o||($o={})).bounce="bounce",Uo.none="none",Uo.out="out",Uo.destroy="destroy",Uo.split="split";class Ba{constructor(){this.default=$o.out}load(e){Mt(e)||(void 0!==e.default&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class $a{constructor(){this.acceleration=0,this.enable=!1}load(e){Mt(e)||(void 0!==e.acceleration&&(this.acceleration=Gt(e.acceleration)),void 0!==e.enable&&(this.enable=e.enable),e.position&&(this.position=ko({},e.position)))}}class Ua{constructor(){this.angle=new Ia,this.attract=new Pa,this.center=new Ma,this.decay=0,this.distance={},this.direction=Ot.none,this.drift=0,this.enable=!1,this.gravity=new La,this.path=new Ta,this.outModes=new Ba,this.random=!1,this.size=!1,this.speed=2,this.spin=new $a,this.straight=!1,this.trail=new Aa,this.vibrate=!1,this.warp=!1}load(e){if(Mt(e))return;this.angle.load(zt(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),void 0!==e.decay&&(this.decay=Gt(e.decay)),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.distance&&(this.distance=zt(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),void 0!==e.drift&&(this.drift=Gt(e.drift)),void 0!==e.enable&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes;void 0!==t&&(It(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path),void 0!==e.random&&(this.random=e.random),void 0!==e.size&&(this.size=e.size),void 0!==e.speed&&(this.speed=Gt(e.speed)),this.spin.load(e.spin),void 0!==e.straight&&(this.straight=e.straight),this.trail.load(e.trail),void 0!==e.vibrate&&(this.vibrate=e.vibrate),void 0!==e.warp&&(this.warp=e.warp)}}class Va extends va{constructor(){super(),this.destroy=no.none,this.speed=2}load(e){super.load(e),Mt(e)||void 0!==e.destroy&&(this.destroy=e.destroy)}}class Ha extends Fa{constructor(){super(),this.animation=new Va,this.value=1}load(e){if(Mt(e))return;super.load(e);const t=e.animation;void 0!==t&&this.animation.load(t)}}class Wa{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(Mt(e))return;void 0!==e.enable&&(this.enable=e.enable);const t=e.width;void 0!==t&&(this.width=t);const o=e.height;void 0!==o&&(this.height=o)}}(Ho=Vo||(Vo={})).delete="delete",Ho.wait="wait";class Ga{constructor(){this.mode=Vo.delete,this.value=0}load(e){Mt(e)||(void 0!==e.mode&&(this.mode=e.mode),void 0!==e.value&&(this.value=e.value))}}class qa{constructor(){this.density=new Wa,this.limit=new Ga,this.value=0}load(e){Mt(e)||(this.density.load(e.density),this.limit.load(e.limit),void 0!==e.value&&(this.value=e.value))}}class Ka{constructor(){this.blur=0,this.color=new ba,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){Mt(e)||(void 0!==e.blur&&(this.blur=e.blur),this.color=ba.create(this.color,e.color),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.offset&&(void 0!==e.offset.x&&(this.offset.x=e.offset.x),void 0!==e.offset.y&&(this.offset.y=e.offset.y)))}}class Ya{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(Mt(e))return;const t=e.options;if(void 0!==t)for(const o in t){const e=t[o];e&&(this.options[o]=ko(this.options[o]??{},e))}void 0!==e.close&&(this.close=e.close),void 0!==e.fill&&(this.fill=e.fill),void 0!==e.type&&(this.type=e.type)}}class Xa extends va{constructor(){super(),this.destroy=no.none,this.speed=5}load(e){super.load(e),Mt(e)||void 0!==e.destroy&&(this.destroy=e.destroy)}}class Ja extends Fa{constructor(){super(),this.animation=new Xa,this.value=3}load(e){if(super.load(e),Mt(e))return;const t=e.animation;void 0!==t&&this.animation.load(t)}}class Qa{constructor(){this.width=0}load(e){Mt(e)||(void 0!==e.color&&(this.color=ka.create(this.color,e.color)),void 0!==e.width&&(this.width=Gt(e.width)),void 0!==e.opacity&&(this.opacity=Gt(e.opacity)))}}class Za extends Sa{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),Mt(e)||(void 0!==e.opacityRate&&(this.opacityRate=e.opacityRate),void 0!==e.sizeRate&&(this.sizeRate=e.sizeRate),void 0!==e.velocityRate&&(this.velocityRate=e.velocityRate))}}class en{constructor(e,t){this._engine=e,this._container=t,this.bounce=new Na,this.collisions=new Ra,this.color=new ka,this.color.value="#fff",this.effect=new za,this.groups={},this.move=new Ua,this.number=new qa,this.opacity=new Ha,this.reduceDuplicates=!1,this.shadow=new Ka,this.shape=new Ya,this.size=new Ja,this.stroke=new Qa,this.zIndex=new Za}load(e){if(Mt(e))return;if(void 0!==e.groups)for(const o of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,o))continue;const t=e.groups[o];void 0!==t&&(this.groups[o]=ko(this.groups[o]??{},t))}void 0!==e.reduceDuplicates&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(ka.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),void 0!==e.interactivity&&(this.interactivity=ko({},e.interactivity));const t=e.stroke;if(t&&(this.stroke=No(t,e=>{const t=new Qa;return t.load(e),t})),this._container){const t=this._engine.updaters.get(this._container);if(t)for(const a of t)a.loadOptions&&a.loadOptions(this,e);const o=this._engine.interactors.get(this._container);if(o)for(const a of o)a.loadParticlesOptions&&a.loadParticlesOptions(this,e)}}}(Go=Wo||(Wo={})).external="external",Go.particles="particles",(Ko=qo||(qo={})).normal="normal",Ko.inside="inside",Ko.outside="outside",(Xo=Yo||(Yo={})).circle="circle",Xo.rectangle="rectangle";class tn{constructor(e,t,o){this.position={x:e,y:t},this.type=o}}class on extends tn{constructor(e,t,o){super(e,t,Yo.circle),this.radius=o}contains(e){return Kt(e,this.position)<=this.radius}intersects(e){const t=this.position,o=e.position,a=Math.abs(o.x-t.x),n=Math.abs(o.y-t.y),i=this.radius;if(e instanceof on||e.type===Yo.circle){return i+e.radius>Math.sqrt(a**2+n**2)}if(e instanceof an||e.type===Yo.rectangle){const t=e,{width:o,height:s}=t.size;return Math.pow(a-o,2)+Math.pow(n-s,2)<=i**2||a<=i+o&&n<=i+s||a<=o||n<=s}return!1}}class an extends tn{constructor(e,t,o,a){super(e,t,Yo.rectangle),this.size={height:a,width:o}}contains(e){const t=this.size.width,o=this.size.height,a=this.position;return e.x>=a.x&&e.x<=a.x+t&&e.y>=a.y&&e.y<=a.y+o}intersects(e){if(e instanceof on)return e.intersects(this);const t=this.size.width,o=this.size.height,a=this.position,n=e.position,i=e instanceof an?e.size:{width:0,height:0},s=i.width,r=i.height;return n.x<a.x+t&&n.x+s>a.x&&n.y<a.y+o&&n.y+r>a.y}}class nn{constructor(e){this.type=Wo.external,this.container=e}}class sn{constructor(e){this.type=Wo.particles,this.container=e}}(Qo=Jo||(Jo={})).clockwise="clockwise",Qo.counterClockwise="counter-clockwise",Qo.random="random",(ea=Zo||(Zo={})).easeInBack="ease-in-back",ea.easeInCirc="ease-in-circ",ea.easeInCubic="ease-in-cubic",ea.easeInLinear="ease-in-linear",ea.easeInQuad="ease-in-quad",ea.easeInQuart="ease-in-quart",ea.easeInQuint="ease-in-quint",ea.easeInExpo="ease-in-expo",ea.easeInSine="ease-in-sine",ea.easeOutBack="ease-out-back",ea.easeOutCirc="ease-out-circ",ea.easeOutCubic="ease-out-cubic",ea.easeOutLinear="ease-out-linear",ea.easeOutQuad="ease-out-quad",ea.easeOutQuart="ease-out-quart",ea.easeOutQuint="ease-out-quint",ea.easeOutExpo="ease-out-expo",ea.easeOutSine="ease-out-sine",ea.easeInOutBack="ease-in-out-back",ea.easeInOutCirc="ease-in-out-circ",ea.easeInOutCubic="ease-in-out-cubic",ea.easeInOutLinear="ease-in-out-linear",ea.easeInOutQuad="ease-in-out-quad",ea.easeInOutQuart="ease-in-out-quart",ea.easeInOutQuint="ease-in-out-quint",ea.easeInOutExpo="ease-in-out-expo",ea.easeInOutSine="ease-in-out-sine";class rn{constructor(){this.radius=0,this.mass=0}load(e){Mt(e)||(void 0!==e.mass&&(this.mass=e.mass),void 0!==e.radius&&(this.radius=e.radius))}}class ln extends Sa{constructor(){super(),this.density=5,this.value=50,this.limit=new rn}load(e){Mt(e)||(super.load(e),void 0!==e.density&&(this.density=e.density),zt(e.limit)?this.limit.radius=e.limit:this.limit.load(e.limit))}}class cn{constructor(){this.color=new ba,this.color.value="#000000",this.draggable=!1,this.opacity=1,this.destroy=!0,this.orbits=!1,this.size=new ln}load(e){Mt(e)||(void 0!==e.color&&(this.color=ba.create(this.color,e.color)),void 0!==e.draggable&&(this.draggable=e.draggable),this.name=e.name,void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.position&&(this.position={},void 0!==e.position.x&&(this.position.x=Gt(e.position.x)),void 0!==e.position.y&&(this.position.y=Gt(e.position.y))),void 0!==e.size&&this.size.load(e.size),void 0!==e.destroy&&(this.destroy=e.destroy),void 0!==e.orbits&&(this.orbits=e.orbits))}}(ta||(ta={})).absorber="absorber";const dn=2*Math.PI;class un{constructor(e,t,o,a,n){var i;this._calcPosition=()=>{const e=Qt({size:this._container.canvas.size,position:this.options.position});return Tt.create(e.x,e.y)},this._updateParticlePosition=(e,t)=>{if(e.destroyed)return;const o=this._container,a=o.canvas.size;if(e.needsNewPosition){const t=Jt({size:a});e.position.setTo(t),e.velocity.setTo(e.initialVelocity),e.absorberOrbit=void 0,e.needsNewPosition=!1}if(this.options.orbits){if(void 0===e.absorberOrbit&&(e.absorberOrbit=Tt.origin,e.absorberOrbit.length=Kt(e.getPosition(),this.position),e.absorberOrbit.angle=At()*dn),e.absorberOrbit.length<=this.size&&!this.options.destroy){const t=Math.min(a.width,a.height),o=1,n=.1,i=.2;e.absorberOrbit.length=t*(o+(At()*i-n))}void 0===e.absorberOrbitDirection&&(e.absorberOrbitDirection=e.velocity.x>=0?Jo.clockwise:Jo.counterClockwise);const n=e.absorberOrbit.length,i=e.absorberOrbit.angle,s=e.absorberOrbitDirection;e.velocity.setTo(Tt.origin);const r={x:s===Jo.clockwise?Math.cos:Math.sin,y:s===Jo.clockwise?Math.sin:Math.cos};e.position.x=this.position.x+n*r.x(i),e.position.y=this.position.y+n*r.y(i),e.absorberOrbit.length-=t.length,e.absorberOrbit.angle+=(e.retina.moveSpeed??0)*o.retina.pixelRatio/bt*o.retina.reduceFactor}else{const o=Tt.origin;o.length=t.length,o.angle=t.angle,e.velocity.addTo(o)}},this._absorbers=e,this._container=t,this._engine=o,this.initialPosition=n?Tt.create(n.x,n.y):void 0,a instanceof cn?this.options=a:(this.options=new cn,this.options.load(a)),this.dragging=!1,this.name=this.options.name,this.opacity=this.options.opacity,this.size=Vt(this.options.size.value)*t.retina.pixelRatio,this.mass=this.size*this.options.size.density*t.retina.reduceFactor;const s=this.options.size.limit;this.limit={radius:s.radius*t.retina.pixelRatio*t.retina.reduceFactor,mass:s.mass},this.color=oa(this._engine,this.options.color)??{b:0,g:0,r:0},this.position=(null==(i=this.initialPosition)?void 0:i.copy())??this._calcPosition()}attract(e){const t=this._container,o=this.options;if(o.draggable){const e=t.interactivity.mouse;if(e.clicking&&e.downPosition){Kt(this.position,e.downPosition)<=this.size&&(this.dragging=!0)}else this.dragging=!1;this.dragging&&e.position&&(this.position.x=e.position.x,this.position.y=e.position.y)}const a=e.getPosition(),{dx:n,dy:i,distance:s}=qt(this.position,a),r=Tt.create(n,i);if(r.length=this.mass/Math.pow(s,2)*t.retina.reduceFactor,s<this.size+e.getRadius()){const a=.033*e.getRadius()*t.retina.pixelRatio;this.size>e.getRadius()&&s<this.size-e.getRadius()||void 0!==e.absorberOrbit&&e.absorberOrbit.length<0?o.destroy?e.destroy():(e.needsNewPosition=!0,this._updateParticlePosition(e,r)):(o.destroy&&(e.size.value-=a),this._updateParticlePosition(e,r)),(this.limit.radius<=0||this.size<this.limit.radius)&&(this.size+=a),(this.limit.mass<=0||this.mass<this.limit.mass)&&(this.mass+=a*this.options.size.density*t.retina.reduceFactor)}else this._updateParticlePosition(e,r)}draw(e){e.translate(this.position.x,this.position.y),e.beginPath(),e.arc(wt,Ct,this.size,0,dn,!1),e.closePath(),e.fillStyle=la(this.color,this.opacity),e.fill()}resize(){const e=this.initialPosition;this.position=e&&wo(e,this._container.canvas.size,Tt.origin)?e:this._calcPosition()}}class hn{constructor(e,t){this._container=e,this._engine=t,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[],e.getAbsorber=e=>void 0===e||zt(e)?this.array[e??0]:this.array.find(t=>t.name===e),e.addAbsorber=async(e,t)=>this.addAbsorber(e,t)}async addAbsorber(e,t){const o=new un(this,this._container,this._engine,e,t);return this.array.push(o),Promise.resolve(o)}draw(e){for(const t of this.array)t.draw(e)}handleClickMode(e){const t=this.absorbers,o=this.interactivityAbsorbers;if(e===ta.absorber){const e=Ro(o)??Ro(t),a=this._container.interactivity.mouse.clickPosition;this.addAbsorber(e,a)}}async init(){this.absorbers=this._container.actualOptions.absorbers,this.interactivityAbsorbers=this._container.actualOptions.interactivity.modes.absorbers;const e=No(this.absorbers,async e=>{await this.addAbsorber(e)});e instanceof Array?await Promise.all(e):await e}particleUpdate(e){for(const t of this.array)if(t.attract(e),e.destroyed)break}removeAbsorber(e){const t=this.array.indexOf(e);t>=0&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}}class pn{constructor(e){this.id="absorbers",this._engine=e}async getPlugin(e){return Promise.resolve(new hn(e,this._engine))}loadOptions(e,t){var o,a;(this.needsPlugin(e)||this.needsPlugin(t))&&((null==t?void 0:t.absorbers)&&(e.absorbers=No(t.absorbers,e=>{const t=new cn;return t.load(e),t})),e.interactivity.modes.absorbers=No(null==(a=null==(o=null==t?void 0:t.interactivity)?void 0:o.modes)?void 0:a.absorbers,e=>{const t=new cn;return t.load(e),t}))}needsPlugin(e){var t,o,a;if(!e)return!1;const n=e.absorbers;return Pt(n)?!!n.length:!!n||!(!(null==(a=null==(o=null==(t=e.interactivity)?void 0:t.events)?void 0:o.onClick)?void 0:a.mode)||!go(ta.absorber,e.interactivity.events.onClick.mode))}}class mn{load(e){Mt(e)||(void 0!==e.bottom&&(this.bottom=Gt(e.bottom)),void 0!==e.left&&(this.left=Gt(e.left)),void 0!==e.right&&(this.right=Gt(e.right)),void 0!==e.top&&(this.top=Gt(e.top)))}}var fn,xn;(xn=fn||(fn={})).none="none",xn.split="split";class gn extends Sa{constructor(){super(),this.value=3}}class bn extends Sa{constructor(){super(),this.value={min:4,max:9}}}class yn{constructor(){this.count=1,this.factor=new gn,this.rate=new bn,this.sizeOffset=!0}load(e){Mt(e)||(void 0!==e.color&&(this.color=ba.create(this.color,e.color)),void 0!==e.count&&(this.count=e.count),this.factor.load(e.factor),this.rate.load(e.rate),this.particles=No(e.particles,e=>ko({},e)),void 0!==e.sizeOffset&&(this.sizeOffset=e.sizeOffset),e.colorOffset&&(this.colorOffset=this.colorOffset??{},void 0!==e.colorOffset.h&&(this.colorOffset.h=e.colorOffset.h),void 0!==e.colorOffset.s&&(this.colorOffset.s=e.colorOffset.s),void 0!==e.colorOffset.l&&(this.colorOffset.l=e.colorOffset.l)))}}class vn{constructor(){this.bounds=new mn,this.mode=fn.none,this.split=new yn}load(e){Mt(e)||(e.mode&&(this.mode=e.mode),e.bounds&&this.bounds.load(e.bounds),this.split.load(e.split))}}function wn(e,t,o,a){const n=o.options.destroy;if(!n)return;const i=n.split,s=function(e,t,...o){const a=new en(e,t);return function(e,...t){for(const o of t)e.load(o)}(a,...o),a}(e,t,o.options),r=Vt(i.factor.value),l=o.getFillColor();i.color?s.color.load(i.color):i.colorOffset&&l?s.color.load({value:{hsl:{h:l.h+Vt(i.colorOffset.h??0),s:l.s+Vt(i.colorOffset.s??0),l:l.l+Vt(i.colorOffset.l??0)}}}):s.color.load({value:{hsl:o.getFillColor()}}),s.move.load({center:{x:o.position.x,y:o.position.y,mode:lo.precise}}),zt(s.size.value)?s.size.value/=r:(s.size.value.min/=r,s.size.value.max/=r),s.load(a);const c=i.sizeOffset?Gt(-o.size.value,o.size.value):0,d={x:o.position.x+Ut(c),y:o.position.y+Ut(c)};return t.particles.addParticle(d,s,o.group,e=>!(e.size.value<.5)&&(e.velocity.length=Ut(Gt(o.velocity.length,e.velocity.length)),e.splitCount=(o.splitCount??0)+1,e.unbreakable=!0,setTimeout(()=>{e.unbreakable=!1},500),!0))}class Cn{constructor(e,t){this.container=t,this.engine=e}init(e){const t=this.container,o=e.options.destroy;if(!o)return;e.splitCount=0;const a=o.bounds;e.destroyBounds||(e.destroyBounds={});const{bottom:n,left:i,right:s,top:r}=a,{destroyBounds:l}=e,c=t.canvas.size;n&&(l.bottom=Vt(n)*c.height/bt),i&&(l.left=Vt(i)*c.width/bt),s&&(l.right=Vt(s)*c.width/bt),r&&(l.top=Vt(r)*c.height/bt)}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.destroy||(e.destroy=new vn);for(const o of t)e.destroy.load(null==o?void 0:o.destroy)}particleDestroyed(e,t){if(t)return;const o=e.options.destroy;o&&o.mode===fn.split&&function(e,t,o){const a=o.options.destroy;if(!a)return;const n=a.split;if(n.count>=0&&(void 0===o.splitCount||o.splitCount++>n.count))return;const i=Vt(n.rate.value),s=Ro(n.particles);for(let r=0;r<i;r++)wn(e,t,o,s)}(this.engine,this.container,e)}update(e){if(!this.isEnabled(e))return;const t=e.getPosition(),o=e.destroyBounds;o&&(void 0!==o.bottom&&t.y>=o.bottom||void 0!==o.left&&t.x<=o.left||void 0!==o.right&&t.x>=o.right||void 0!==o.top&&t.y<=o.top)&&e.destroy()}}class kn{constructor(){this.wait=!1}load(e){Mt(e)||(void 0!==e.count&&(this.count=e.count),void 0!==e.delay&&(this.delay=Gt(e.delay)),void 0!==e.duration&&(this.duration=Gt(e.duration)),void 0!==e.wait&&(this.wait=e.wait))}}class jn{constructor(){this.quantity=1,this.delay=.1}load(e){Mt(e)||(void 0!==e.quantity&&(this.quantity=Gt(e.quantity)),void 0!==e.delay&&(this.delay=Gt(e.delay)))}}class En{constructor(){this.color=!1,this.opacity=!1}load(e){Mt(e)||(void 0!==e.color&&(this.color=e.color),void 0!==e.opacity&&(this.opacity=e.opacity))}}class Sn{constructor(){this.options={},this.replace=new En,this.type="square"}load(e){Mt(e)||(void 0!==e.options&&(this.options=ko({},e.options??{})),this.replace.load(e.replace),void 0!==e.type&&(this.type=e.type))}}class _n{constructor(){this.mode=lo.percent,this.height=0,this.width=0}load(e){Mt(e)||(void 0!==e.mode&&(this.mode=e.mode),void 0!==e.height&&(this.height=e.height),void 0!==e.width&&(this.width=e.width))}}class Fn{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new kn,this.rate=new jn,this.shape=new Sn,this.startCount=0}load(e){Mt(e)||(void 0!==e.autoPlay&&(this.autoPlay=e.autoPlay),void 0!==e.size&&(this.size||(this.size=new _n),this.size.load(e.size)),void 0!==e.direction&&(this.direction=e.direction),this.domId=e.domId,void 0!==e.fill&&(this.fill=e.fill),this.life.load(e.life),this.name=e.name,this.particles=No(e.particles,e=>ko({},e)),this.rate.load(e.rate),this.shape.load(e.shape),void 0!==e.position&&(this.position={},void 0!==e.position.x&&(this.position.x=Gt(e.position.x)),void 0!==e.position.y&&(this.position.y=Gt(e.position.y))),void 0!==e.spawnColor&&(void 0===this.spawnColor&&(this.spawnColor=new ka),this.spawnColor.load(e.spawnColor)),void 0!==e.startCount&&(this.startCount=e.startCount))}}var On;(On||(On={})).emitter="emitter";function Nn(e,t){e.color?e.color.value=t:e.color={value:t}}class Rn{constructor(e,t,o,a,n){var i,s;this.emitters=t,this.container=o,this._destroy=()=>{var e,t;null==(e=this._mutationObserver)||e.disconnect(),this._mutationObserver=void 0,null==(t=this._resizeObserver)||t.disconnect(),this._resizeObserver=void 0,this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._prepareToDie=()=>{var e;if(this._paused)return;const t=void 0!==(null==(e=this.options.life)?void 0:e.duration)?Vt(this.options.life.duration):void 0;(this._lifeCount>0||this._immortal)&&void 0!==t&&t>0&&(this._duration=t*vt)},this._setColorAnimation=(e,t,o,a=1)=>{const n=this.container;if(!e.enable)return t;const i=Ut(e.offset),s=Vt(this.options.rate.delay),r=n.retina.reduceFactor?s*vt/n.retina.reduceFactor:1/0;return(t+Vt(e.speed??0)*n.fpsLimit/r+i*a)%o},this._engine=e,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=n,a instanceof Fn?this.options=a:(this.options=new Fn,this.options.load(a)),this._spawnDelay=o.retina.reduceFactor?Vt(this.options.life.delay??0)*vt/o.retina.reduceFactor:1/0,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let r=ko({},this.options.particles);if(r??(r={}),r.move??(r.move={}),(i=r.move).direction??(i.direction=this.options.direction),this.options.spawnColor&&(this.spawnColor=na(this._engine,this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=r,this._size=this._calcSize(),this.size=Io(this._size,this.container.canvas.size),this._lifeCount=this.options.life.count??-1,this._immortal=this._lifeCount<=0,this.options.domId){const e=document.getElementById(this.options.domId);e&&(this._mutationObserver=new MutationObserver(()=>{this.resize()}),this._resizeObserver=new ResizeObserver(()=>{this.resize()}),this._mutationObserver.observe(e,{attributes:!0,attributeFilter:["style","width","height"]}),this._resizeObserver.observe(e))}const l=this.options.shape,c=null==(s=this._engine.emitterShapeManager)?void 0:s.getShapeGenerator(l.type);c&&(this._shape=c.generate(this.position,this.size,this.fill,l.options)),this._engine.dispatchEvent("emitterCreated",{container:o,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}async init(){var e;await(null==(e=this._shape)?void 0:e.init())}pause(){this._paused||delete this._emitDelay}play(){if(this._paused)return;if(!(this._lifeCount>0||this._immortal)&&this.options.life.count||!(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??0)))return;const e=this.container;if(void 0===this._emitDelay){const t=Vt(this.options.rate.delay);this._emitDelay=e.retina.reduceFactor?t*vt/e.retina.reduceFactor:1/0}(this._lifeCount>0||this._immortal)&&this._prepareToDie()}resize(){var e;const t=this._initialPosition,o=this.container;this.position=t&&wo(t,o.canvas.size,Tt.origin)?t:this._calcPosition(),this._size=this._calcSize(),this.size=Io(this._size,o.canvas.size),null==(e=this._shape)||e.resize(this.position,this.size)}update(e){var t;if(this._paused)return;const o=this.container;this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??0,this._currentEmitDelay=this._emitDelay??0),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),void 0!==this._duration&&(this._currentDuration+=e.value,this._currentDuration>=this._duration&&(this.pause(),void 0!==this._spawnDelay&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>0||this._immortal?(this.position=this._calcPosition(),null==(t=this._shape)||t.resize(this.position,this.size),this._spawnDelay=o.retina.reduceFactor?Vt(this.options.life.delay??0)*vt/o.retina.reduceFactor:1/0):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),void 0!==this._spawnDelay&&(this._currentSpawnDelay+=e.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),void 0!==this._emitDelay&&(this._currentEmitDelay+=e.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay))}_calcPosition(){const e=this.container;if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const o=t.getBoundingClientRect(),a=e.retina.pixelRatio;return{x:(o.x+.5*o.width)*a,y:(o.y+.5*o.height)*a}}}return Qt({size:e.canvas.size,position:this.options.position})}_calcSize(){const e=this.container;if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const o=t.getBoundingClientRect();return{width:o.width*e.retina.pixelRatio,height:o.height*e.retina.pixelRatio,mode:lo.precise}}}return this.options.size??(()=>{const e=new _n;return e.load({height:0,mode:lo.percent,width:0}),e})()}_emit(){if(this._paused)return;const e=Vt(this.options.rate.quantity);this._emitParticles(e)}_emitParticles(e){var t;const o=Ro(this._particlesOptions),a=this.container.retina.reduceFactor;for(let n=0;n<e*a;n++){const e=ko({},o);if(this.spawnColor){const o=null==(t=this.options.spawnColor)?void 0:t.animation;if(o){const e={h:360,s:100,l:100},t=3.6;this.spawnColor.h=this._setColorAnimation(o.h,this.spawnColor.h,e.h,t),this.spawnColor.s=this._setColorAnimation(o.s,this.spawnColor.s,e.s),this.spawnColor.l=this._setColorAnimation(o.l,this.spawnColor.l,e.l)}Nn(e,this.spawnColor)}const a=this.options.shape;let n=this.position;if(this._shape){const t=this._shape.randomPosition();if(t){n=t.position;const o=a.replace;o.color&&t.color&&Nn(e,t.color),o.opacity&&(e.opacity?e.opacity.value=t.opacity:e.opacity={value:t.opacity})}else n=null}n&&this.container.particles.addParticle(n,e)}}}class zn{constructor(e,t){this.container=t,this._engine=e,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]};t.getEmitter=e=>void 0===e||zt(e)?this.array[e??0]:this.array.find(t=>t.name===e),t.addEmitter=async(e,t)=>this.addEmitter(e,t),t.removeEmitter=e=>{const o=t.getEmitter(e);o&&this.removeEmitter(o)},t.playEmitter=e=>{const o=t.getEmitter(e);o&&o.externalPlay()},t.pauseEmitter=e=>{const o=t.getEmitter(e);o&&o.externalPause()}}async addEmitter(e,t){const o=new Fn;o.load(e);const a=new Rn(this._engine,this,this.container,o,t);return await a.init(),this.array.push(a),a}handleClickMode(e){const t=this.emitters,o=this.interactivityEmitters;if(e!==On.emitter)return;let a;if(o&&Pt(o.value)){const e=0;if(o.value.length>e&&o.random.enable){a=[];const e=[];for(let t=0;t<o.random.count;t++){const n=yo(o.value);e.includes(n)&&e.length<o.value.length?t--:(e.push(n),a.push(vo(o.value,n)))}}else a=o.value}else a=null==o?void 0:o.value;const n=a??t,i=this.container.interactivity.mouse.clickPosition;No(n,async e=>{await this.addEmitter(e,i)})}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,this.emitters)if(Pt(this.emitters))for(const e of this.emitters)await this.addEmitter(e);else await this.addEmitter(this.emitters)}pause(){for(const e of this.array)e.pause()}play(){for(const e of this.array)e.play()}removeEmitter(e){const t=this.array.indexOf(e);t>=0&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}update(e){for(const t of this.array)t.update(e)}}class In{constructor(e){this._engine=e,this.id="emitters"}getPlugin(e){return Promise.resolve(new zn(this._engine,e))}loadOptions(e,t){var o,a;if(!this.needsPlugin(e)&&!this.needsPlugin(t))return;(null==t?void 0:t.emitters)&&(e.emitters=No(t.emitters,e=>{const t=new Fn;return t.load(e),t}));const n=null==(a=null==(o=null==t?void 0:t.interactivity)?void 0:o.modes)?void 0:a.emitters;if(n)if(Pt(n))e.interactivity.modes.emitters={random:{count:1,enable:!0},value:n.map(e=>{const t=new Fn;return t.load(e),t})};else{const t=n;if(void 0!==t.value){const o=1;if(Pt(t.value))e.interactivity.modes.emitters={random:{count:t.random.count??o,enable:t.random.enable??!1},value:t.value.map(e=>{const t=new Fn;return t.load(e),t})};else{const a=new Fn;a.load(t.value),e.interactivity.modes.emitters={random:{count:t.random.count??o,enable:t.random.enable??!1},value:a}}}else{(e.interactivity.modes.emitters={random:{count:1,enable:!1},value:new Fn}).value.load(n)}}}needsPlugin(e){var t,o,a;if(!e)return!1;const n=e.emitters;return Pt(n)&&!!n.length||void 0!==n||!!(null==(a=null==(o=null==(t=e.interactivity)?void 0:t.events)?void 0:o.onClick)?void 0:a.mode)&&go(On.emitter,e.interactivity.events.onClick.mode)}}const Pn=new Map;class Mn{constructor(e){this._engine=e}addShapeGenerator(e,t){this.getShapeGenerator(e)||Pn.set(e,t)}getShapeGenerator(e){return Pn.get(e)}getSupportedShapeGenerators(){return Pn.keys()}}class Ln{constructor(e,t,o,a){this.position=e,this.size=t,this.fill=o,this.options=a}resize(e,t){this.position=e,this.size=t}}const Tn=.25,Dn=2*Math.PI;class An extends Ln{constructor(e,t,o,a){super(e,t,o,a)}async init(){}randomPosition(){const e=this.size,t=this.fill,o=this.position,[a,n]=[.5*e.width,.5*e.height],i=((e,t)=>{const o=At()*Tn,a=Math.atan(t/e*Math.tan(Dn*o)),n=At();return n<Tn?a:n<.5?Math.PI-a:n<.75?Math.PI+a:-a})(a,n),s=(d=i,(l=a)*(c=n)/Math.sqrt((c*Math.cos(d))**2+(l*Math.sin(d))**2)),r=t?s*Math.sqrt(At()):s;var l,c,d;return{position:{x:o.x+r*Math.cos(i),y:o.y+r*Math.sin(i)}}}}class Bn{generate(e,t,o,a){return new An(e,t,o,a)}}var $n,Un;function Vn(e,t){return e+t*(At()-yt)}(Un=$n||($n={}))[Un.TopLeft=0]="TopLeft",Un[Un.TopRight=1]="TopRight",Un[Un.BottomRight=2]="BottomRight",Un[Un.BottomLeft=3]="BottomLeft";class Hn extends Ln{constructor(e,t,o,a){super(e,t,o,a)}async init(){}randomPosition(){const e=this.fill,t=this.position,o=this.size;if(e)return{position:{x:Vn(t.x,o.width),y:Vn(t.y,o.height)}};{const e=o.width*yt,a=o.height*yt,n=Math.floor(4*At()),i=2*(At()-yt);switch(n){case $n.TopLeft:return{position:{x:t.x+i*e,y:t.y-a}};case $n.TopRight:return{position:{x:t.x-e,y:t.y+i*a}};case $n.BottomRight:return{position:{x:t.x+i*e,y:t.y+a}};case $n.BottomLeft:default:return{position:{x:t.x+e,y:t.y+i*a}}}}}}class Wn{generate(e,t,o,a){return new Hn(e,t,o,a)}}class Gn{constructor(){this.delay=1,this.pauseOnStop=!1,this.quantity=1}load(e){Mt(e)||(void 0!==e.delay&&(this.delay=e.delay),void 0!==e.quantity&&(this.quantity=e.quantity),void 0!==e.particles&&(this.particles=ko({},e.particles)),void 0!==e.pauseOnStop&&(this.pauseOnStop=e.pauseOnStop))}}const qn="trail";class Kn extends nn{constructor(e){super(e),this._delay=0}clear(){}init(){}interact(e){var t,o,a,n;const i=this.container,{interactivity:s}=i;if(!i.retina.reduceFactor)return;const r=i.actualOptions.interactivity.modes.trail;if(!r)return;const l=r.delay*vt/this.container.retina.reduceFactor;if(this._delay<l&&(this._delay+=e.value),this._delay<l)return;const c=!(r.pauseOnStop&&(s.mouse.position===this._lastPosition||(null==(t=s.mouse.position)?void 0:t.x)===(null==(o=this._lastPosition)?void 0:o.x)&&(null==(a=s.mouse.position)?void 0:a.y)===(null==(n=this._lastPosition)?void 0:n.y))),d=i.interactivity.mouse.position;d?this._lastPosition={...d}:delete this._lastPosition,c&&i.particles.push(r.quantity,i.interactivity.mouse,r.particles),this._delay-=l}isEnabled(e){const t=this.container,o=t.actualOptions,a=t.interactivity.mouse,n=((null==e?void 0:e.interactivity)??o.interactivity).events;return a.clicking&&a.inside&&!!a.position&&go(qn,n.onClick.mode)||a.inside&&!!a.position&&go(qn,n.onHover.mode)}loadModeOptions(e,...t){e.trail||(e.trail=new Gn);for(const o of t)e.trail.load(null==o?void 0:o.trail)}reset(){}}var Yn,Xn;(Xn=Yn||(Yn={})).both="both",Xn.horizontal="horizontal",Xn.vertical="vertical";const Jn=2*Math.PI;class Qn{constructor(){this.enable=!1,this.value=0}load(e){Mt(e)||(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.value&&(this.value=Gt(e.value)))}}class Zn{constructor(){this.darken=new Qn,this.enable=!1,this.enlighten=new Qn,this.mode=Yn.vertical,this.speed=25}load(e){Mt(e)||(void 0!==e.backColor&&(this.backColor=ba.create(this.backColor,e.backColor)),this.darken.load(e.darken),void 0!==e.enable&&(this.enable=e.enable),this.enlighten.load(e.enlighten),void 0!==e.mode&&(this.mode=e.mode),void 0!==e.speed&&(this.speed=Gt(e.speed)))}}class ei{constructor(e){this._engine=e}getTransformValues(e){var t;const o=(null==(t=e.roll)?void 0:t.enable)&&e.roll,a=o&&o.horizontal,n=o&&o.vertical;return{a:a?Math.cos(o.angle):void 0,d:n?Math.sin(o.angle):void 0}}init(e){!function(e,t){const o=t.options.roll;if(null==o?void 0:o.enable)if(t.roll={enable:o.enable,horizontal:o.mode===Yn.horizontal||o.mode===Yn.both,vertical:o.mode===Yn.vertical||o.mode===Yn.both,angle:At()*Jn,speed:Vt(o.speed)/360},o.backColor)t.backColor=na(e,o.backColor);else if(o.darken.enable&&o.enlighten.enable){const e=At()>=yt?Mo.darken:Mo.enlighten;t.roll.alter={type:e,value:Vt(e===Mo.darken?o.darken.value:o.enlighten.value)}}else o.darken.enable?t.roll.alter={type:Mo.darken,value:Vt(o.darken.value)}:o.enlighten.enable&&(t.roll.alter={type:Mo.enlighten,value:Vt(o.enlighten.value)});else t.roll={enable:!1,horizontal:!1,vertical:!1,angle:0,speed:0}}(this._engine,e)}isEnabled(e){const t=e.options.roll;return!e.destroyed&&!e.spawning&&!!(null==t?void 0:t.enable)}loadOptions(e,...t){e.roll||(e.roll=new Zn);for(const o of t)e.roll.load(null==o?void 0:o.roll)}update(e,t){this.isEnabled(e)&&function(e,t){const o=e.options.roll,a=e.roll;if(!a||!(null==o?void 0:o.enable))return;const n=a.speed*t.factor,i=Jn;a.angle+=n,a.angle>i&&(a.angle-=i)}(e,t)}}const ti=2*Math.PI;function oi(e,t,o,a,n,i,s){!function(e,t){var o;const a=e.options,n=a.move.path;if(!n.enable)return;if(e.lastPathTime<=e.pathDelay)return void(e.lastPathTime+=t.value);const i=null==(o=e.pathGenerator)?void 0:o.generate(e,t);i&&e.velocity.addTo(i);n.clamp&&(e.velocity.x=Bt(e.velocity.x,-1,1),e.velocity.y=Bt(e.velocity.y,-1,1));e.lastPathTime-=e.pathDelay}(e,s);const r=e.gravity,l=(null==r?void 0:r.enable)&&r.inverse?-1:1;n&&o&&(e.velocity.x+=n*s.factor/(60*o)),(null==r?void 0:r.enable)&&o&&(e.velocity.y+=l*(r.acceleration*s.factor)/(60*o));const c=e.moveDecay;e.velocity.multTo(c);const d=e.velocity.mult(o);(null==r?void 0:r.enable)&&a>0&&(!r.inverse&&d.y>=0&&d.y>=a||r.inverse&&d.y<=0&&d.y<=-a)&&(d.y=l*a,o&&(e.velocity.y=d.y/o));const u=e.options.zIndex,h=(1-e.zIndexFactor)**u.velocityRate;d.multTo(h),d.multTo(i);const{position:p}=e;p.addTo(d),t.vibrate&&(p.x+=Math.sin(p.x*Math.cos(p.y))*i,p.y+=Math.cos(p.y*Math.sin(p.x))*i)}class ai{init(e){const t=e.options.move.gravity;e.gravity={enable:t.enable,acceleration:Vt(t.acceleration),inverse:t.inverse},function(e){const t=e.container,o=e.options.move.spin;if(!o.enable)return;const a=o.position??{x:50,y:50},n={x:.01*a.x*t.canvas.size.width,y:.01*a.y*t.canvas.size.height},i=Kt(e.getPosition(),n),s=Vt(o.acceleration);e.retina.spinAcceleration=s*t.retina.pixelRatio,e.spin={center:n,direction:e.velocity.x>=0?Jo.clockwise:Jo.counterClockwise,angle:At()*ti,radius:i,acceleration:e.retina.spinAcceleration}}(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var o,a;const n=e.options,i=n.move;if(!i.enable)return;const s=e.container,r=s.retina.pixelRatio;(o=e.retina).moveSpeed??(o.moveSpeed=Vt(i.speed)*r),(a=e.retina).moveDrift??(a.moveDrift=Vt(e.options.move.drift)*r);const l=function(e){return e.slow.inRange?e.slow.factor:1}(e),c=s.retina.reduceFactor,d=e.retina.moveSpeed,u=e.retina.moveDrift,h=Wt(n.size.value)*r,p=d*(i.size?e.getRadius()/h:1)*l*(t.factor||1)/2,m=e.retina.maxSpeed??s.retina.maxSpeed;i.spin.enable?function(e,t,o){const a=e.container;if(!e.spin)return;const n=e.spin.direction===Jo.clockwise,i={x:n?Math.cos:Math.sin,y:n?Math.sin:Math.cos};e.position.x=e.spin.center.x+e.spin.radius*i.x(e.spin.angle)*o,e.position.y=e.spin.center.y+e.spin.radius*i.y(e.spin.angle)*o,e.spin.radius+=e.spin.acceleration*o;const s=Math.max(a.canvas.size.width,a.canvas.size.height),r=.5*s;e.spin.radius>r?(e.spin.radius=r,e.spin.acceleration*=-1):e.spin.radius<0&&(e.spin.radius=0,e.spin.acceleration*=-1),e.spin.angle+=.01*t*(1-e.spin.radius/s)}(e,p,c):oi(e,i,p,m,u,c,t),function(e){const t=e.initialPosition,{dx:o,dy:a}=qt(t,e.position),n=Math.abs(o),i=Math.abs(a),{maxDistance:s}=e.retina,r=s.horizontal,l=s.vertical;if(!r&&!l)return;if((r&&n>=r||l&&i>=l)&&!e.misplaced)e.misplaced=!!r&&n>r||!!l&&i>l,r&&(e.velocity.x=.5*e.velocity.y-e.velocity.x),l&&(e.velocity.y=.5*e.velocity.x-e.velocity.y);else if((!r||n<r)&&(!l||i<l)&&e.misplaced)e.misplaced=!1;else if(e.misplaced){const o=e.position,a=e.velocity;r&&(o.x<t.x&&a.x<0||o.x>t.x&&a.x>0)&&(a.x*=-At()),l&&(o.y<t.y&&a.y<0||o.y>t.y&&a.y>0)&&(a.y*=-At())}}(e)}}const ni=2*Math.PI,ii=0,si=0;class ri{constructor(){this.validTypes=["circle"]}draw(e){!function(e){const{context:t,particle:o,radius:a}=e;o.circleRange||(o.circleRange={min:0,max:ni});const n=o.circleRange;t.arc(ii,si,a,n.min,n.max,!1)}(e)}getSidesCount(){return 12}particleInit(e,t){const o=t.shapeData,a=(null==o?void 0:o.angle)??{max:360,min:0};t.circleRange=It(a)?{min:Yt(a.min),max:Yt(a.max)}:{min:0,max:Yt(a)}}}class li{constructor(e,t){this._container=e,this._engine=t}init(e){const t=na(this._engine,e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=pa(t,e.options.color.animation,this._container.retina.reduceFactor))}isEnabled(e){const{h:t,s:o,l:a}=e.options.color.animation,{color:n}=e;return!e.destroyed&&!e.spawning&&(void 0!==(null==n?void 0:n.h.value)&&t.enable||void 0!==(null==n?void 0:n.s.value)&&o.enable||void 0!==(null==n?void 0:n.l.value)&&a.enable)}update(e,t){xa(e.color,t)}}var ci,di;(di=ci||(ci={}))[di.r=1]="r",di[di.g=2]="g",di[di.b=3]="b",di[di.a=4]="a";const ui=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,hi=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i;class pi{constructor(){this.key="hex",this.stringPrefix="#"}handleColor(e){return this._parseString(e.value)}handleRangeColor(e){return this._parseString(e.value)}parseString(e){return this._parseString(e)}_parseString(e){if("string"!=typeof e)return;if(!(null==e?void 0:e.startsWith(this.stringPrefix)))return;const t=e.replace(ui,(e,t,o,a,n)=>t+t+o+o+a+a+(void 0!==n?n+n:"")),o=hi.exec(t);return o?{a:void 0!==o[ci.a]?parseInt(o[ci.a],16)/255:1,b:parseInt(o[ci.b],16),g:parseInt(o[ci.g],16),r:parseInt(o[ci.r],16)}:void 0}}var mi,fi;(fi=mi||(mi={}))[fi.h=1]="h",fi[fi.s=2]="s",fi[fi.l=3]="l",fi[fi.a=5]="a";class xi{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value.hsl??e.value;if(void 0!==t.h&&void 0!==t.s&&void 0!==t.l)return sa(t)}handleRangeColor(e){const t=e.value.hsl??e.value;if(void 0!==t.h&&void 0!==t.l)return sa({h:Vt(t.h),l:Vt(t.l),s:Vt(t.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*[\s,]\s*(\d+)%\s*[\s,]\s*(\d+)%\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i.exec(e);return t?function(e){const t=sa(e);return{a:e.a,b:t.b,g:t.g,r:t.r}}({a:t.length>4?Zt(t[mi.a]):1,h:parseInt(t[mi.h],10),l:parseInt(t[mi.l],10),s:parseInt(t[mi.s],10)}):void 0}}class gi{constructor(e){this.container=e}init(e){const t=e.options.opacity;e.opacity=function(e,t){const o=e.value,a=e.animation,n={delayTime:Vt(a.delay)*vt,enable:a.enable,value:Vt(e.value)*t,max:Wt(o)*t,min:Ht(o)*t,loops:0,maxLoops:Vt(a.count),time:0};if(a.enable){switch(n.decay=1-Vt(a.decay),a.mode){case eo.increase:n.status=oo.increasing;break;case eo.decrease:n.status=oo.decreasing;break;case eo.random:n.status=At()>=yt?oo.increasing:oo.decreasing}const e=a.mode===eo.auto;switch(a.startValue){case uo.min:n.value=n.min,e&&(n.status=oo.increasing);break;case uo.max:n.value=n.max,e&&(n.status=oo.decreasing);break;case uo.random:default:n.value=Ut(n),e&&(n.status=At()>=yt?oo.increasing:oo.decreasing)}}return n.initialValue=n.value,n}(t,1);const o=t.animation;o.enable&&(e.opacity.velocity=Vt(o.speed)/bt*this.container.retina.reduceFactor,o.sync||(e.opacity.velocity*=At()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){this.isEnabled(e)&&e.opacity&&Po(e,e.opacity,!0,e.options.opacity.animation.destroy,t)}}class bi{constructor(e){this.container=e,this.modes=[$o.bounce,$o.split]}update(e,t,o,a){if(!this.modes.includes(a))return;const n=this.container;let i=!1;for(const u of n.plugins.values())if(void 0!==u.particleBounce&&(i=u.particleBounce(e,o,t)),i)break;if(i)return;const s=e.getPosition(),r=e.offset,l=e.getRadius(),c=Co(s,l),d=n.canvas.size;!function(e){if(e.outMode!==$o.bounce&&e.outMode!==$o.split||e.direction!==so.left&&e.direction!==so.right)return;e.bounds.right<0&&e.direction===so.left?e.particle.position.x=e.size+e.offset.x:e.bounds.left>e.canvasSize.width&&e.direction===so.right&&(e.particle.position.x=e.canvasSize.width-e.size-e.offset.x);const t=e.particle.velocity.x;let o=!1;if(e.direction===so.right&&e.bounds.right>=e.canvasSize.width&&t>0||e.direction===so.left&&e.bounds.left<=0&&t<0){const t=Vt(e.particle.options.bounce.horizontal.value);e.particle.velocity.x*=-t,o=!0}if(!o)return;const a=e.offset.x+e.size;e.bounds.right>=e.canvasSize.width&&e.direction===so.right?e.particle.position.x=e.canvasSize.width-a:e.bounds.left<=0&&e.direction===so.left&&(e.particle.position.x=a),e.outMode===$o.split&&e.particle.destroy()}({particle:e,outMode:a,direction:t,bounds:c,canvasSize:d,offset:r,size:l}),function(e){if(e.outMode!==$o.bounce&&e.outMode!==$o.split||e.direction!==so.bottom&&e.direction!==so.top)return;e.bounds.bottom<0&&e.direction===so.top?e.particle.position.y=e.size+e.offset.y:e.bounds.top>e.canvasSize.height&&e.direction===so.bottom&&(e.particle.position.y=e.canvasSize.height-e.size-e.offset.y);const t=e.particle.velocity.y;let o=!1;if(e.direction===so.bottom&&e.bounds.bottom>=e.canvasSize.height&&t>0||e.direction===so.top&&e.bounds.top<=0&&t<0){const t=Vt(e.particle.options.bounce.vertical.value);e.particle.velocity.y*=-t,o=!0}if(!o)return;const a=e.offset.y+e.size;e.bounds.bottom>=e.canvasSize.height&&e.direction===so.bottom?e.particle.position.y=e.canvasSize.height-a:e.bounds.top<=0&&e.direction===so.top&&(e.particle.position.y=a),e.outMode===$o.split&&e.particle.destroy()}({particle:e,outMode:a,direction:t,bounds:c,canvasSize:d,offset:r,size:l})}}class yi{constructor(e){this.container=e,this.modes=[$o.destroy]}update(e,t,o,a){if(!this.modes.includes(a))return;const n=this.container;switch(e.outType){case qo.normal:case qo.outside:if(wo(e.position,n.canvas.size,Tt.origin,e.getRadius(),t))return;break;case qo.inside:{const{dx:t,dy:o}=qt(e.position,e.moveCenter),{x:a,y:n}=e.velocity;if(a<0&&t>e.moveCenter.radius||n<0&&o>e.moveCenter.radius||a>=0&&t<-e.moveCenter.radius||n>=0&&o<-e.moveCenter.radius)return;break}}n.particles.remove(e,e.group,!0)}}class vi{constructor(e){this.container=e,this.modes=[$o.none]}update(e,t,o,a){if(!this.modes.includes(a))return;if((e.options.move.distance.horizontal&&(t===so.left||t===so.right))??(e.options.move.distance.vertical&&(t===so.top||t===so.bottom)))return;const n=e.options.move.gravity,i=this.container,s=i.canvas.size,r=e.getRadius();if(n.enable){const o=e.position;(!n.inverse&&o.y>s.height+r&&t===so.bottom||n.inverse&&o.y<-r&&t===so.top)&&i.particles.remove(e)}else{if(e.velocity.y>0&&e.position.y<=s.height+r||e.velocity.y<0&&e.position.y>=-r||e.velocity.x>0&&e.position.x<=s.width+r||e.velocity.x<0&&e.position.x>=-r)return;wo(e.position,i.canvas.size,Tt.origin,r,t)||i.particles.remove(e)}}}class wi{constructor(e){this.container=e,this.modes=[$o.out]}update(e,t,o,a){if(!this.modes.includes(a))return;const n=this.container;switch(e.outType){case qo.inside:{const{x:t,y:o}=e.velocity,a=Tt.origin;a.length=e.moveCenter.radius,a.angle=e.velocity.angle+Math.PI,a.addTo(Tt.create(e.moveCenter));const{dx:i,dy:s}=qt(e.position,a);if(t<=0&&i>=0||o<=0&&s>=0||t>=0&&i<=0||o>=0&&s<=0)return;e.position.x=Math.floor(Ut({min:0,max:n.canvas.size.width})),e.position.y=Math.floor(Ut({min:0,max:n.canvas.size.height}));const{dx:r,dy:l}=qt(e.position,e.moveCenter);e.direction=Math.atan2(-l,-r),e.velocity.angle=e.direction;break}default:if(wo(e.position,n.canvas.size,Tt.origin,e.getRadius(),t))return;switch(e.outType){case qo.outside:{e.position.x=Math.floor(Ut({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(Ut({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:t,dy:o}=qt(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(o,t),e.velocity.angle=e.direction);break}case qo.normal:{const o=e.options.move.warp,a=n.canvas.size,i={bottom:a.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:a.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},s=e.getRadius(),r=Co(e.position,s);t===so.right&&r.left>a.width+e.offset.x?(e.position.x=i.left,e.initialPosition.x=e.position.x,o||(e.position.y=At()*a.height,e.initialPosition.y=e.position.y)):t===so.left&&r.right<-e.offset.x&&(e.position.x=i.right,e.initialPosition.x=e.position.x,o||(e.position.y=At()*a.height,e.initialPosition.y=e.position.y)),t===so.bottom&&r.top>a.height+e.offset.y?(o||(e.position.x=At()*a.width,e.initialPosition.x=e.position.x),e.position.y=i.top,e.initialPosition.y=e.position.y):t===so.top&&r.bottom<-e.offset.y&&(o||(e.position.x=At()*a.width,e.initialPosition.x=e.position.x),e.position.y=i.bottom,e.initialPosition.y=e.position.y);break}}}}}class Ci{constructor(e){this._addUpdaterIfMissing=(e,t,o)=>{const a=e.options.move.outModes;!this.updaters.has(t)&&((e,t)=>e.default===t||e.bottom===t||e.left===t||e.right===t||e.top===t)(a,t)&&this.updaters.set(t,o(this.container))},this._updateOutMode=(e,t,o,a)=>{for(const n of this.updaters.values())n.update(e,a,t,o)},this.container=e,this.updaters=new Map}init(e){this._addUpdaterIfMissing(e,$o.bounce,e=>new bi(e)),this._addUpdaterIfMissing(e,$o.out,e=>new wi(e)),this._addUpdaterIfMissing(e,$o.destroy,e=>new yi(e)),this._addUpdaterIfMissing(e,$o.none,e=>new vi(e))}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const o=e.options.move.outModes;this._updateOutMode(e,t,o.bottom??o.default,so.bottom),this._updateOutMode(e,t,o.left??o.default,so.left),this._updateOutMode(e,t,o.right??o.default,so.right),this._updateOutMode(e,t,o.top??o.default,so.top)}}var ki;!function(e){e[e.r=1]="r",e[e.g=2]="g",e[e.b=3]="b",e[e.a=5]="a"}(ki||(ki={}));class ji{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value.rgb??e.value;if(void 0!==t.r)return t}handleRangeColor(e){const t=e.value.rgb??e.value;if(void 0!==t.r)return{r:Vt(t.r),g:Vt(t.g),b:Vt(t.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i.exec(e);return t?{a:t.length>4?Zt(t[ki.a]):1,b:parseInt(t[ki.b],10),g:parseInt(t[ki.g],10),r:parseInt(t[ki.r],10)}:void 0}}class Ei{init(e){const t=e.container,o=e.options.size.animation;o.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/bt*t.retina.reduceFactor,o.sync||(e.size.velocity*=At()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??0)<=0||(e.size.maxLoops??0)>0&&(e.size.loops??0)<(e.size.maxLoops??0))}reset(e){e.size.loops=0}update(e,t){this.isEnabled(e)&&Po(e,e.size,!0,e.options.size.animation.destroy,t)}}async function Si(e,t=!0){e.checkVersion("3.9.1"),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addColorManager(new pi,t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addColorManager(new xi,t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addColorManager(new ji,t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addMover("base",()=>Promise.resolve(new ai),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new ri,t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("color",t=>Promise.resolve(new li(t,e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("opacity",e=>Promise.resolve(new gi(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("outModes",e=>Promise.resolve(new Ci(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("size",()=>Promise.resolve(new Ei),t)}(e,!1),await e.refresh(t)}const _i='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"';class Fi{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[e,t]of this._emojiShapeDict)t instanceof ImageBitmap&&(null==t||t.close()),this._emojiShapeDict.delete(e)}draw(e){const t=e.particle.emojiDataKey;if(!t)return;const o=this._emojiShapeDict.get(t);o&&function(e,t){const{context:o,opacity:a}=e,n=o.globalAlpha;if(!t)return;const i=t.width,s=.5*i;o.globalAlpha=a,o.drawImage(t,-s,-s,i,i),o.globalAlpha=n}(e,o)}async init(e){const t=e.actualOptions,{validTypes:o}=this;if(!o.find(e=>go(e,t.particles.shape.type)))return;const a=[bo(_i)],n=o.map(e=>t.particles.shape.options[e]).find(e=>!!e);n&&No(n,e=>{e.font&&a.push(bo(e.font))}),await Promise.all(a)}particleDestroy(e){e.emojiDataKey=void 0}particleInit(e,t){const o=t.shapeData;if(!(null==o?void 0:o.value))return;const a=Ro(o.value,t.randomIndexData);if(!a)return;const n="string"==typeof a?{font:o.font??_i,padding:o.padding??0,value:a}:{font:_i,padding:0,...o,...a},i=n.font,s=n.value,r=`${s}_${i}`;if(this._emojiShapeDict.has(r))return void(t.emojiDataKey=r);const l=2*n.padding,c=Wt(t.size.value),d=c+l,u=2*d;let h;if("undefined"!=typeof OffscreenCanvas){const e=new OffscreenCanvas(u,u),t=e.getContext("2d");if(!t)return;t.font=`400 ${2*c}px ${i}`,t.textBaseline="middle",t.textAlign="center",t.fillText(s,d,d),h=e.transferToImageBitmap()}else{const e=document.createElement("canvas");e.width=u,e.height=u;const t=e.getContext("2d");if(!t)return;t.font=`400 ${2*c}px ${i}`,t.textBaseline="middle",t.textAlign="center",t.fillText(s,d,d),h=e}this._emojiShapeDict.set(r,h),t.emojiDataKey=r}}function Oi(e,t,o,a,n,i){const s=t.actualOptions.interactivity.modes.attract;if(!s)return;const r=t.particles.quadTree.query(n,i);for(const l of r){const{dx:t,dy:n,distance:i}=qt(l.position,o),r=s.speed*s.factor,c=Bt(e.getEasing(s.easing)(1-i/a)*r,1,s.maxSpeed),d=Tt.create(i?t/i*c:r,i?n/i*c:r);l.position.subFrom(d)}}class Ni{constructor(){this.distance=200,this.duration=.4,this.easing=Zo.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(e){Mt(e)||(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.easing&&(this.easing=e.easing),void 0!==e.factor&&(this.factor=e.factor),void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed),void 0!==e.speed&&(this.speed=e.speed))}}const Ri="attract";let zi=class extends nn{constructor(e,t){super(t),this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=e=>{const o=this.container.actualOptions.interactivity.modes.attract;if(o&&e===Ri){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const e of t.attract.particles)this.isEnabled(e)&&e.velocity.setTo(e.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},o.duration*vt)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,o=e.interactivity.status===xt,a=t.interactivity.events,{enable:n,mode:i}=a.onHover,{enable:s,mode:r}=a.onClick;o&&n&&go(Ri,i)?function(e,t,o){const a=t.interactivity.mouse.position,n=t.retina.attractModeDistance;!n||n<0||!a||Oi(e,t,a,n,new on(a.x,a.y,n),e=>o(e))}(this._engine,this.container,e=>this.isEnabled(e)):s&&go(Ri,r)&&function(e,t,o){t.attract||(t.attract={particles:[]});const{attract:a}=t;if(a.finish||(a.count||(a.count=0),a.count++,a.count===t.particles.count&&(a.finish=!0)),a.clicking){const a=t.interactivity.mouse.clickPosition,n=t.retina.attractModeDistance;if(!n||n<0||!a)return;Oi(e,t,a,n,new on(a.x,a.y,n),e=>o(e))}else!1===a.clicking&&(a.particles=[])}(this._engine,this.container,e=>this.isEnabled(e))}isEnabled(e){const t=this.container,o=t.actualOptions,a=t.interactivity.mouse,n=((null==e?void 0:e.interactivity)??o.interactivity).events;if(!(a.position&&n.onHover.enable||a.clickPosition&&n.onClick.enable))return!1;const i=n.onHover.mode,s=n.onClick.mode;return go(Ri,i)||go(Ri,s)}loadModeOptions(e,...t){e.attract||(e.attract=new Ni);for(const o of t)e.attract.load(null==o?void 0:o.attract)}reset(){}};const Ii=.5,Pi=Math.PI*Ii;function Mi(e,t,o,a,n){const i=e.particles.quadTree.query(a,n);for(const s of i)a instanceof on?Fo(_o(s),{position:t,mass:o**2*Pi,velocity:Tt.origin,factor:Tt.origin}):a instanceof an&&Oo(s,Co(t,o))}function Li(e,t,o,a){Eo(o,t,(t,o)=>function(e,t,o,a){const n=document.querySelectorAll(t);n.length&&n.forEach(t=>{const n=t,i=e.retina.pixelRatio,s={x:(n.offsetLeft+n.offsetWidth*Ii)*i,y:(n.offsetTop+n.offsetHeight*Ii)*i},r=n.offsetWidth*Ii*i,l=10*i,c=o.type===To.circle?new on(s.x,s.y,r+l):new an(n.offsetLeft*i-l,n.offsetTop*i-l,n.offsetWidth*i+2*l,n.offsetHeight*i+2*l);a(s,r,c)})}(e,t,o,(t,o,n)=>Mi(e,t,o,n,a)))}class Ti{constructor(){this.distance=200}load(e){Mt(e)||void 0!==e.distance&&(this.distance=e.distance)}}const Di="bounce";class Ai extends nn{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions.interactivity.events,o=e.interactivity.status===xt,a=t.onHover.enable,n=t.onHover.mode,i=t.onDiv;o&&a&&go(Di,n)?function(e,t){const o=10*e.retina.pixelRatio,a=e.interactivity.mouse.position,n=e.retina.bounceModeDistance;!n||n<0||!a||Mi(e,a,n,new on(a.x,a.y,n+o),t)}(this.container,e=>this.isEnabled(e)):Li(this.container,i,Di,e=>this.isEnabled(e))}isEnabled(e){const t=this.container,o=t.actualOptions,a=t.interactivity.mouse,n=((null==e?void 0:e.interactivity)??o.interactivity).events,i=n.onDiv;return!!a.position&&n.onHover.enable&&go(Di,n.onHover.mode)||jo(Di,i)}loadModeOptions(e,...t){e.bounce||(e.bounce=new Ti);for(const o of t)e.bounce.load(null==o?void 0:o.bounce)}reset(){}}class Bi{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(!Mt(e)){if(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.mix&&(this.mix=e.mix),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.color){const t=Pt(this.color)?void 0:this.color;this.color=No(e.color,e=>ba.create(t,e))}void 0!==e.size&&(this.size=e.size)}}}class $i extends Bi{constructor(){super(),this.selectors=[]}load(e){super.load(e),Mt(e)||void 0!==e.selectors&&(this.selectors=e.selectors)}}class Ui extends Bi{load(e){super.load(e),Mt(e)||(this.divs=No(e.divs,e=>{const t=new $i;return t.load(e),t}))}}var Vi,Hi;function Wi(e,t,o,a){if(t>=o){return Bt(e+(t-o)*a,e,t)}if(t<o){return Bt(e-(o-t)*a,t,e)}}(Hi=Vi||(Vi={})).color="color",Hi.opacity="opacity",Hi.size="size";const Gi="bubble";class qi extends nn{constructor(e,t){super(e),this._clickBubble=()=>{var e;const t=this.container,o=t.actualOptions,a=t.interactivity.mouse.clickPosition,n=o.interactivity.modes.bubble;if(!n||!a)return;t.bubble||(t.bubble={});const i=t.retina.bubbleModeDistance;if(!i||i<0)return;const s=t.particles.quadTree.queryCircle(a,i,e=>this.isEnabled(e)),{bubble:r}=t;for(const l of s){if(!r.clicking)continue;l.bubble.inRange=!r.durationEnd;const o=Kt(l.getPosition(),a),s=((new Date).getTime()-(t.interactivity.mouse.clickTime??0))/vt;s>n.duration&&(r.durationEnd=!0),s>2*n.duration&&(r.clicking=!1,r.durationEnd=!1);const c={bubbleObj:{optValue:t.retina.bubbleModeSize,value:l.bubble.radius},particlesObj:{optValue:Wt(l.options.size.value)*t.retina.pixelRatio,value:l.size.value},type:Vi.size};this._process(l,o,s,c);const d={bubbleObj:{optValue:n.opacity,value:l.bubble.opacity},particlesObj:{optValue:Wt(l.options.opacity.value),value:(null==(e=l.opacity)?void 0:e.value)??1},type:Vi.opacity};this._process(l,o,s,d),!r.durationEnd&&o<=i?this._hoverBubbleColor(l,o):delete l.bubble.color}},this._hoverBubble=()=>{const e=this.container,t=e.interactivity.mouse.position,o=e.retina.bubbleModeDistance;if(!o||o<0||!t)return;const a=e.particles.quadTree.queryCircle(t,o,e=>this.isEnabled(e));for(const n of a){n.bubble.inRange=!0;const a=Kt(n.getPosition(),t),i=1-a/o;a<=o?i>=0&&e.interactivity.status===xt&&(this._hoverBubbleSize(n,i),this._hoverBubbleOpacity(n,i),this._hoverBubbleColor(n,i)):this.reset(n),"pointerleave"===e.interactivity.status&&this.reset(n)}},this._hoverBubbleColor=(e,t,o)=>{const a=this.container.actualOptions,n=o??a.interactivity.modes.bubble;if(n){if(!e.bubble.finalColor){const t=n.color;if(!t)return;const o=Ro(t);e.bubble.finalColor=na(this._engine,o)}if(e.bubble.finalColor)if(n.mix){e.bubble.color=void 0;const o=e.getFillColor();e.bubble.color=o?ia(da(o,e.bubble.finalColor,1-t,t)):e.bubble.finalColor}else e.bubble.color=e.bubble.finalColor}},this._hoverBubbleOpacity=(e,t,o)=>{var a,n;const i=this.container.actualOptions,s=(null==o?void 0:o.opacity)??(null==(a=i.interactivity.modes.bubble)?void 0:a.opacity);if(!s)return;const r=e.options.opacity.value,l=Wi((null==(n=e.opacity)?void 0:n.value)??1,s,Wt(r),t);void 0!==l&&(e.bubble.opacity=l)},this._hoverBubbleSize=(e,t,o)=>{const a=this.container,n=(null==o?void 0:o.size)?o.size*a.retina.pixelRatio:a.retina.bubbleModeSize;if(void 0===n)return;const i=Wt(e.options.size.value)*a.retina.pixelRatio,s=Wi(e.size.value,n,i,t);void 0!==s&&(e.bubble.radius=s)},this._process=(e,t,o,a)=>{const n=this.container,i=a.bubbleObj.optValue,s=n.actualOptions.interactivity.modes.bubble;if(!s||void 0===i)return;const r=s.duration,l=n.retina.bubbleModeDistance,c=a.particlesObj.optValue,d=a.bubbleObj.value,u=a.particlesObj.value??0,h=a.type;if(l&&!(l<0)&&i!==c)if(n.bubble||(n.bubble={}),n.bubble.durationEnd)d&&(h===Vi.size&&delete e.bubble.radius,h===Vi.opacity&&delete e.bubble.opacity);else if(t<=l){if((d??u)!==i){const t=u-o*(u-i)/r;h===Vi.size&&(e.bubble.radius=t),h===Vi.opacity&&(e.bubble.opacity=t)}}else h===Vi.size&&delete e.bubble.radius,h===Vi.opacity&&delete e.bubble.opacity},this._singleSelectorHover=(e,t,o)=>{const a=this.container,n=document.querySelectorAll(t),i=a.actualOptions.interactivity.modes.bubble;i&&n.length&&n.forEach(t=>{const n=t,s=a.retina.pixelRatio,r={x:(n.offsetLeft+.5*n.offsetWidth)*s,y:(n.offsetTop+.5*n.offsetHeight)*s},l=.5*n.offsetWidth*s,c=o.type===To.circle?new on(r.x,r.y,l):new an(n.offsetLeft*s,n.offsetTop*s,n.offsetWidth*s,n.offsetHeight*s),d=a.particles.quadTree.query(c,e=>this.isEnabled(e));for(const o of d){if(!c.contains(o.getPosition()))continue;o.bubble.inRange=!0;const t=So(i.divs,n);o.bubble.div&&o.bubble.div===n||(this.clear(o,e,!0),o.bubble.div=n),this._hoverBubbleSize(o,1,t),this._hoverBubbleOpacity(o,1,t),this._hoverBubbleColor(o,1,t)}})},this._engine=t,e.bubble||(e.bubble={}),this.handleClickMode=t=>{t===Gi&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,o){e.bubble.inRange&&!o||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,void 0!==t.size&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}interact(e){const t=this.container.actualOptions.interactivity.events,o=t.onHover,a=t.onClick,n=o.enable,i=o.mode,s=a.enable,r=a.mode,l=t.onDiv;n&&go(Gi,i)?this._hoverBubble():s&&go(Gi,r)?this._clickBubble():Eo(Gi,l,(t,o)=>this._singleSelectorHover(e,t,o))}isEnabled(e){const t=this.container,o=t.actualOptions,a=t.interactivity.mouse,n=((null==e?void 0:e.interactivity)??o.interactivity).events,{onClick:i,onDiv:s,onHover:r}=n,l=jo(Gi,s);return!!(l||r.enable&&a.position||i.enable&&a.clickPosition)&&(go(Gi,r.mode)||go(Gi,i.mode)||l)}loadModeOptions(e,...t){e.bubble||(e.bubble=new Ui);for(const o of t)e.bubble.load(null==o?void 0:o.bubble)}reset(e){e.bubble.inRange=!1}}class Ki{constructor(){this.opacity=.5}load(e){Mt(e)||void 0!==e.opacity&&(this.opacity=e.opacity)}}class Yi{constructor(){this.distance=80,this.links=new Ki,this.radius=60}load(e){Mt(e)||(void 0!==e.distance&&(this.distance=e.distance),this.links.load(e.links),void 0!==e.radius&&(this.radius=e.radius))}}function Xi(e,t,o,a){const n=e.actualOptions.interactivity.modes.connect;if(n)return function(e,t,o,a){const n=Math.floor(o.getRadius()/t.getRadius()),i=t.getFillColor(),s=o.getFillColor();if(!i||!s)return;const r=t.getPosition(),l=o.getPosition(),c=da(i,s,t.getRadius(),o.getRadius()),d=e.createLinearGradient(r.x,r.y,l.x,l.y);return d.addColorStop(0,ca(i,a)),d.addColorStop(Bt(n,0,1),la(c,a)),d.addColorStop(1,ca(s,a)),d}(t,o,a,n.links.opacity)}function Ji(e,t,o){e.canvas.draw(a=>{const n=Xi(e,a,t,o);if(!n)return;const i=t.getPosition(),s=o.getPosition();var r,l,c;r=a,l=t.retina.linksWidth??0,c=n,ga(r,i,s),r.lineWidth=l,r.strokeStyle=c,r.stroke()})}class Qi extends nn{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&"pointermove"===e.interactivity.status){const t=e.interactivity.mouse.position,{connectModeDistance:o,connectModeRadius:a}=e.retina;if(!o||o<0||!a||a<0||!t)return;const n=Math.abs(a),i=e.particles.quadTree.queryCircle(t,n,e=>this.isEnabled(e));i.forEach((t,a)=>{const n=t.getPosition();for(const s of i.slice(a+1)){const a=s.getPosition(),i=Math.abs(o),r=Math.abs(n.x-a.x),l=Math.abs(n.y-a.y);r<i&&l<i&&Ji(e,t,s)}})}}isEnabled(e){const t=this.container,o=t.interactivity.mouse,a=((null==e?void 0:e.interactivity)??t.actualOptions.interactivity).events;return!(!a.onHover.enable||!o.position)&&go("connect",a.onHover.mode)}loadModeOptions(e,...t){e.connect||(e.connect=new Yi);for(const o of t)e.connect.load(null==o?void 0:o.connect)}reset(){}}class Zi{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){Mt(e)||(void 0!==e.blink&&(this.blink=e.blink),void 0!==e.color&&(this.color=ba.create(this.color,e.color)),void 0!==e.consent&&(this.consent=e.consent),void 0!==e.opacity&&(this.opacity=e.opacity))}}class es{constructor(){this.distance=100,this.links=new Zi}load(e){Mt(e)||(void 0!==e.distance&&(this.distance=e.distance),this.links.load(e.links))}}function ts(e,t,o,a,n){e.canvas.draw(e=>{const i=t.getPosition();!function(e,t,o,a,n,i){ga(e,o,a),e.strokeStyle=la(n,i),e.lineWidth=t,e.stroke()}(e,t.retina.linksWidth??0,i,n,o,a)})}class os extends nn{constructor(e,t){super(e),this._engine=t}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}interact(){var e;const t=this.container,o=t.actualOptions.interactivity;if(!o.modes.grab||!o.events.onHover.enable||t.interactivity.status!==xt)return;const a=t.interactivity.mouse.position;if(!a)return;const n=t.retina.grabModeDistance;if(!n||n<0)return;const i=t.particles.quadTree.queryCircle(a,n,e=>this.isEnabled(e));for(const s of i){const i=Kt(s.getPosition(),a);if(i>n)continue;const r=o.modes.grab.links,l=r.opacity,c=l-i*l/n;if(c<=0)continue;const d=r.color??(null==(e=s.options.links)?void 0:e.color);if(!t.particles.grabLineColor&&d){const e=o.modes.grab.links;t.particles.grabLineColor=ha(this._engine,d,e.blink,e.consent)}const u=ua(s,void 0,t.particles.grabLineColor);u&&ts(t,s,u,c,a)}}isEnabled(e){const t=this.container,o=t.interactivity.mouse,a=((null==e?void 0:e.interactivity)??t.actualOptions.interactivity).events;return a.onHover.enable&&!!o.position&&go("grab",a.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new es);for(const o of t)e.grab.load(null==o?void 0:o.grab)}reset(){}}class as extends nn{constructor(e){super(e),this.handleClickMode=e=>{if("pause"!==e)return;const t=this.container;t.animationStatus?t.pause():t.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}class ns{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(e){if(Mt(e))return;void 0!==e.default&&(this.default=e.default),void 0!==e.groups&&(this.groups=e.groups.map(e=>e)),this.groups.length||(this.default=!0);const t=e.quantity;void 0!==t&&(this.quantity=Gt(t)),this.particles=No(e.particles,e=>ko({},e))}}class is extends nn{constructor(e){super(e),this.handleClickMode=e=>{if("push"!==e)return;const t=this.container,o=t.actualOptions.interactivity.modes.push;if(!o)return;const a=Vt(o.quantity);if(a<=0)return;const n=vo([void 0,...o.groups]),i=ko(void 0!==n?t.actualOptions.particles.groups[n]:void 0,Ro(o.particles));t.particles.push(a,t.interactivity.mouse,i,n)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new ns);for(const o of t)e.push.load(null==o?void 0:o.push)}reset(){}}class ss{constructor(){this.quantity=2}load(e){if(Mt(e))return;const t=e.quantity;void 0!==t&&(this.quantity=Gt(t))}}class rs extends nn{constructor(e){super(e),this.handleClickMode=e=>{const t=this.container,o=t.actualOptions;if(!o.interactivity.modes.remove||"remove"!==e)return;const a=Vt(o.interactivity.modes.remove.quantity);t.particles.removeQuantity(a)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new ss);for(const o of t)e.remove.load(null==o?void 0:o.remove)}reset(){}}class ls{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=Zo.easeOutQuad}load(e){Mt(e)||(void 0!==e.distance&&(this.distance=e.distance),void 0!==e.duration&&(this.duration=e.duration),void 0!==e.easing&&(this.easing=e.easing),void 0!==e.factor&&(this.factor=e.factor),void 0!==e.speed&&(this.speed=e.speed),void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed))}}class cs extends ls{constructor(){super(),this.selectors=[]}load(e){super.load(e),Mt(e)||void 0!==e.selectors&&(this.selectors=e.selectors)}}class ds extends ls{load(e){super.load(e),Mt(e)||(this.divs=No(e.divs,e=>{const t=new cs;return t.load(e),t}))}}const us="repulse";class hs extends nn{constructor(e,t){super(t),this._clickRepulse=()=>{const e=this.container,t=e.actualOptions.interactivity.modes.repulse;if(!t)return;const o=e.repulse??{particles:[]};if(o.finish||(o.count||(o.count=0),o.count++,o.count===e.particles.count&&(o.finish=!0)),o.clicking){const a=e.retina.repulseModeDistance;if(!a||a<0)return;const n=Math.pow(a/6,3),i=e.interactivity.mouse.clickPosition;if(void 0===i)return;const s=new on(i.x,i.y,n),r=e.particles.quadTree.query(s,e=>this.isEnabled(e));for(const e of r){const{dx:a,dy:s,distance:r}=qt(i,e.position),l=r**2,c=-n*t.speed/l;if(l<=n){o.particles.push(e);const t=Tt.create(a,s);t.length=c,e.velocity.setTo(t)}}}else if(!1===o.clicking){for(const e of o.particles)e.velocity.setTo(e.initialVelocity);o.particles=[]}},this._hoverRepulse=()=>{const e=this.container,t=e.interactivity.mouse.position,o=e.retina.repulseModeDistance;!o||o<0||!t||this._processRepulse(t,o,new on(t.x,t.y,o))},this._processRepulse=(e,t,o,a)=>{const n=this.container,i=n.particles.quadTree.query(o,e=>this.isEnabled(e)),s=n.actualOptions.interactivity.modes.repulse;if(!s)return;const{easing:r,speed:l,factor:c,maxSpeed:d}=s,u=this._engine.getEasing(r),h=((null==a?void 0:a.speed)??l)*c;for(const p of i){const{dx:o,dy:a,distance:n}=qt(p.position,e),i=Bt(u(1-n/t)*h,0,d),s=Tt.create(n?o/n*i:h,n?a/n*i:h);p.position.addTo(s)}},this._singleSelectorRepulse=(e,t)=>{const o=this.container,a=o.actualOptions.interactivity.modes.repulse;if(!a)return;const n=document.querySelectorAll(e);n.length&&n.forEach(e=>{const n=e,i=o.retina.pixelRatio,s={x:(n.offsetLeft+.5*n.offsetWidth)*i,y:(n.offsetTop+.5*n.offsetHeight)*i},r=.5*n.offsetWidth*i,l=t.type===To.circle?new on(s.x,s.y,r):new an(n.offsetLeft*i,n.offsetTop*i,n.offsetWidth*i,n.offsetHeight*i),c=So(a.divs,n);this._processRepulse(s,r,l,c)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=e=>{const o=this.container.actualOptions.interactivity.modes.repulse;if(!o||e!==us)return;t.repulse||(t.repulse={particles:[]});const a=t.repulse;a.clicking=!0,a.count=0;for(const n of t.repulse.particles)this.isEnabled(n)&&n.velocity.setTo(n.initialVelocity);a.particles=[],a.finish=!1,setTimeout(()=>{t.destroyed||(a.clicking=!1)},o.duration*vt)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,o=e.interactivity.status===xt,a=t.interactivity.events,n=a.onHover,i=n.enable,s=n.mode,r=a.onClick,l=r.enable,c=r.mode,d=a.onDiv;o&&i&&go(us,s)?this._hoverRepulse():l&&go(us,c)?this._clickRepulse():Eo(us,d,(e,t)=>this._singleSelectorRepulse(e,t))}isEnabled(e){const t=this.container,o=t.actualOptions,a=t.interactivity.mouse,n=((null==e?void 0:e.interactivity)??o.interactivity).events,i=n.onDiv,s=n.onHover,r=n.onClick,l=jo(us,i);if(!(l||s.enable&&a.position||r.enable&&a.clickPosition))return!1;const c=s.mode,d=r.mode;return go(us,c)||go(us,d)||l}loadModeOptions(e,...t){e.repulse||(e.repulse=new ds);for(const o of t)e.repulse.load(null==o?void 0:o.repulse)}reset(){}}class ps{constructor(){this.factor=3,this.radius=200}load(e){Mt(e)||(void 0!==e.factor&&(this.factor=e.factor),void 0!==e.radius&&(this.radius=e.radius))}}class ms extends nn{constructor(e){super(e)}clear(e,t,o){e.slow.inRange&&!o||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}interact(){}isEnabled(e){const t=this.container,o=t.interactivity.mouse,a=((null==e?void 0:e.interactivity)??t.actualOptions.interactivity).events;return a.onHover.enable&&!!o.position&&go("slow",a.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new ps);for(const o of t)e.slow.load(null==o?void 0:o.slow)}reset(e){e.slow.inRange=!1;const t=this.container,o=t.actualOptions,a=t.interactivity.mouse.position,n=t.retina.slowModeRadius,i=o.interactivity.modes.slow;if(!i||!n||n<0||!a)return;const s=Kt(a,e.getPosition()),r=s/n,l=i.factor,{slow:c}=e;s>n||(c.inRange=!0,c.factor=r/l)}}const fs=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;async function xs(e){return new Promise(t=>{e.loading=!0;const o=new Image;e.element=o,o.addEventListener("load",()=>{e.loading=!1,t()}),o.addEventListener("error",()=>{e.element=void 0,e.error=!0,e.loading=!1,mo().error(`${gt} loading image: ${e.source}`),t()}),o.src=e.source})}async function gs(e){if("svg"!==e.type)return void(await xs(e));e.loading=!0;const t=await fetch(e.source);t.ok?e.svgData=await t.text():(mo().error(`${gt} Image not found`),e.error=!0),e.loading=!1}function bs(e,t,o,a){var n;const i=function(e,t,o){const{svgData:a}=e;if(!a)return"";const n=ca(t,o);if(a.includes("fill"))return a.replace(fs,()=>n);const i=a.indexOf(">");return`${a.substring(0,i)} fill="${n}"${a.substring(i)}`}(e,o,(null==(n=a.opacity)?void 0:n.value)??1),s={color:o,gif:t.gif,data:{...e,svgData:i},loaded:!1,ratio:t.width/t.height,replaceColor:t.replaceColor,source:t.src};return new Promise(t=>{const o=new Blob([i],{type:"image/svg+xml"}),a=URL||window.URL||window.webkitURL||window,n=a.createObjectURL(o),r=new Image;r.addEventListener("load",()=>{s.loaded=!0,s.element=r,t(s),a.revokeObjectURL(n)});r.addEventListener("error",()=>{(async()=>{a.revokeObjectURL(n);const o={...e,error:!1,loading:!0};await xs(o),s.loaded=!0,s.element=o.element,t(s)})()}),r.src=n})}const ys=[0,4,2,1],vs=[8,8,4,2];class ws{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((e,t)=>e+String.fromCharCode(t),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;do{t=this.data[this.pos++];for(let o=t;--o>=0;e+=String.fromCharCode(this.data[this.pos++]));}while(0!==t);return e}readSubBlocksBin(){let e=this.data[this.pos],t=0;for(let a=0;0!==e;a+=e+1,e=this.data[this.pos+a])t+=e;const o=new Uint8Array(t);e=this.data[this.pos++];for(let a=0;0!==e;e=this.data[this.pos++])for(let t=e;--t>=0;o[a++]=this.data[this.pos++]);return o}skipSubBlocks(){for(const e=1,t=0;this.data[this.pos]!==t;this.pos+=this.data[this.pos]+e);this.pos++}}var Cs,ks,js,Es;(ks=Cs||(Cs={}))[ks.Replace=0]="Replace",ks[ks.Combine=1]="Combine",ks[ks.RestoreBackground=2]="RestoreBackground",ks[ks.RestorePrevious=3]="RestorePrevious",ks[ks.UndefinedA=4]="UndefinedA",ks[ks.UndefinedB=5]="UndefinedB",ks[ks.UndefinedC=6]="UndefinedC",ks[ks.UndefinedD=7]="UndefinedD",(Es=js||(js={}))[Es.Extension=33]="Extension",Es[Es.ApplicationExtension=255]="ApplicationExtension",Es[Es.GraphicsControlExtension=249]="GraphicsControlExtension",Es[Es.PlainTextExtension=1]="PlainTextExtension",Es[Es.CommentExtension=254]="CommentExtension",Es[Es.Image=44]="Image",Es[Es.EndOfFile=59]="EndOfFile";const Ss=0,_s=0;function Fs(e,t){const o=[];for(let a=0;a<t;a++)o.push({r:e.data[e.pos],g:e.data[e.pos+1],b:e.data[e.pos+2]}),e.pos+=3;return o}async function Os(e,t,o,a,n,i){switch(e.nextByte()){case js.EndOfFile:return!0;case js.Image:await async function(e,t,o,a,n){const i=t.frames[a(!0)];i.left=e.nextTwoBytes(),i.top=e.nextTwoBytes(),i.width=e.nextTwoBytes(),i.height=e.nextTwoBytes();const s=e.nextByte(),r=!(128&~s),l=!(64&~s);i.sortFlag=!(32&~s),i.reserved=(24&s)>>>3;const c=1<<1+(7&s);r&&(i.localColorTable=Fs(e,c));const d=e=>{const{r:a,g:s,b:l}=(r?i.localColorTable:t.globalColorTable)[e];return e!==n(null)?{r:a,g:s,b:l,a:255}:{r:a,g:s,b:l,a:o?~~((a+s+l)/3):0}},u=(()=>{try{return new ImageData(i.width,i.height,{colorSpace:"srgb"})}catch(e){if(e instanceof DOMException&&"IndexSizeError"===e.name)return null;throw e}})();if(null==u)throw new EvalError("GIF frame size is to large");const h=e.nextByte(),p=e.readSubBlocksBin(),m=1<<h,f=(e,t)=>{const o=e>>>3,a=7&e;return(p[o]+(p[o+1]<<8)+(p[o+2]<<16)&(1<<t)-1<<a)>>>a};if(l){for(let e=0,t=h+1,o=0,a=[[0]],n=0;n<4;n++)if(ys[n]<i.height){let s=0,r=0,l=!1;for(;!l;){const c=e;if(e=f(o,t),o+=t+1,e===m){t=h+1,a.length=m+2;for(let e=0;e<a.length;e++)a[e]=e<m?[e]:[]}else{e>=a.length?a.push(a[c].concat(a[c][0])):c!==m&&a.push(a[c].concat(a[e][0]));for(const t of a[e]){const{r:e,g:o,b:a,a:l}=d(t);u.data.set([e,o,a,l],ys[n]*i.width+vs[n]*r+s%(4*i.width)),s+=4}a.length===1<<t&&t<12&&t++}s===4*i.width*(r+1)&&(r++,ys[n]+vs[n]*r>=i.height&&(l=!0))}}i.image=u,i.bitmap=await createImageBitmap(u)}else{let e=0,t=h+1,o=0,a=-4,n=!1;const s=[[0]];for(;!n;){const i=e;if(e=f(o,t),o+=t,e===m){t=h+1,s.length=m+2;for(let e=0;e<s.length;e++)s[e]=e<m?[e]:[]}else{if(e===m+1){n=!0;break}e>=s.length?s.push(s[i].concat(s[i][0])):i!==m&&s.push(s[i].concat(s[e][0]));for(const t of s[e]){const{r:e,g:o,b:n,a:i}=d(t);u.data.set([e,o,n,i],a+=4)}s.length>=1<<t&&t<12&&t++}}i.image=u,i.bitmap=await createImageBitmap(u)}}(e,t,o,a,n);break;case js.Extension:!function(e,t,o,a){switch(e.nextByte()){case js.GraphicsControlExtension:{const n=t.frames[o(!1)];e.pos++;const i=e.nextByte();n.GCreserved=(224&i)>>>5,n.disposalMethod=(28&i)>>>2,n.userInputDelayFlag=!(2&~i);const s=!(1&~i);n.delayTime=10*e.nextTwoBytes();const r=e.nextByte();s&&a(r),e.pos++;break}case js.ApplicationExtension:{e.pos++;const o={identifier:e.getString(8),authenticationCode:e.getString(3),data:e.readSubBlocksBin()};t.applicationExtensions.push(o);break}case js.CommentExtension:t.comments.push([o(!1),e.readSubBlocks()]);break;case js.PlainTextExtension:if(0===t.globalColorTable.length)throw new EvalError("plain text extension without global color table");e.pos++,t.frames[o(!1)].plainTextData={left:e.nextTwoBytes(),top:e.nextTwoBytes(),width:e.nextTwoBytes(),height:e.nextTwoBytes(),charSize:{width:e.nextTwoBytes(),height:e.nextTwoBytes()},foregroundColor:e.nextByte(),backgroundColor:e.nextByte(),text:e.readSubBlocks()};break;default:e.skipSubBlocks()}}(e,t,a,n);break;default:throw new EvalError("undefined block found")}return!1}async function Ns(e){if("gif"===e.type){e.loading=!0;try{e.gifData=await async function(e,t,o){o||(o=!1);const a=await fetch(e);if(!a.ok&&404===a.status)throw new EvalError("file not found");const n=await a.arrayBuffer(),i={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},s=new ws(new Uint8ClampedArray(n));if("GIF89a"!==s.getString(6))throw new Error("not a supported GIF file");i.width=s.nextTwoBytes(),i.height=s.nextTwoBytes();const r=s.nextByte(),l=!(128&~r);i.colorRes=(112&r)>>>4,i.sortFlag=!(8&~r);const c=1<<1+(7&r),d=s.nextByte();i.pixelAspectRatio=s.nextByte(),0!==i.pixelAspectRatio&&(i.pixelAspectRatio=(i.pixelAspectRatio+15)/64),l&&(i.globalColorTable=Fs(s,c));const u=(()=>{try{return new ImageData(i.width,i.height,{colorSpace:"srgb"})}catch(e){if(e instanceof DOMException&&"IndexSizeError"===e.name)return null;throw e}})();if(null==u)throw new Error("GIF frame size is to large");const{r:h,g:p,b:m}=i.globalColorTable[d];u.data.set(l?[h,p,m,255]:[0,0,0,0]);for(let w=4;w<u.data.length;w*=2)u.data.copyWithin(w,0,w);i.backgroundImage=u;let f=-1,x=!0,g=-1;const b=e=>(e&&(x=!0),f),y=e=>(null!=e&&(g=e),g);try{do{x&&(i.frames.push({left:0,top:0,width:0,height:0,disposalMethod:Cs.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),f++,g=-1,x=!1)}while(!(await Os(s,i,o,b,y)));i.frames.length--;for(const e of i.frames){if(e.userInputDelayFlag&&0===e.delayTime){i.totalTime=1/0;break}i.totalTime+=e.delayTime}return i}catch(v){if(v instanceof EvalError)throw new Error(`error while parsing frame ${f} "${v.message}"`);throw v}}(e.source),e.gifLoopCount=function(e){for(const t of e.applicationExtensions)if(t.identifier+t.authenticationCode==="NETSCAPE2.0")return t.data[1]+(t.data[2]<<8);return NaN}(e.gifData)??0,e.gifLoopCount||(e.gifLoopCount=1/0)}catch{e.error=!0}e.loading=!1}else await xs(e)}class Rs{constructor(e){this.validTypes=["image","images"],this.loadImageShape=async e=>{if(!this._engine.loadImage)throw new Error(`${gt} image shape not initialized`);await this._engine.loadImage({gif:e.gif,name:e.name,replaceColor:e.replaceColor??!1,src:e.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:t,radius:o,particle:a,opacity:n}=e,i=a.image,s=null==i?void 0:i.element;if(i){if(t.globalAlpha=n,i.gif&&i.gifData)!function(e){const{context:t,radius:o,particle:a,delta:n}=e,i=a.image;if(!(null==i?void 0:i.gifData)||!i.gif)return;const s=new OffscreenCanvas(i.gifData.width,i.gifData.height),r=s.getContext("2d");if(!r)throw new Error("could not create offscreen canvas context");r.imageSmoothingQuality="low",r.imageSmoothingEnabled=!1,r.clearRect(Ss,_s,s.width,s.height),void 0===a.gifLoopCount&&(a.gifLoopCount=i.gifLoopCount??0);let l=a.gifFrame??0;const c={x:.5*-i.gifData.width,y:.5*-i.gifData.height},d=i.gifData.frames[l];if(void 0===a.gifTime&&(a.gifTime=0),d.bitmap){switch(t.scale(o/i.gifData.width,o/i.gifData.height),d.disposalMethod){case Cs.UndefinedA:case Cs.UndefinedB:case Cs.UndefinedC:case Cs.UndefinedD:case Cs.Replace:r.drawImage(d.bitmap,d.left,d.top),t.drawImage(s,c.x,c.y),r.clearRect(Ss,_s,s.width,s.height);break;case Cs.Combine:r.drawImage(d.bitmap,d.left,d.top),t.drawImage(s,c.x,c.y);break;case Cs.RestoreBackground:r.drawImage(d.bitmap,d.left,d.top),t.drawImage(s,c.x,c.y),r.clearRect(Ss,_s,s.width,s.height),i.gifData.globalColorTable.length?r.putImageData(i.gifData.backgroundImage,c.x,c.y):r.putImageData(i.gifData.frames[0].image,c.x+d.left,c.y+d.top);break;case Cs.RestorePrevious:{const e=r.getImageData(Ss,_s,s.width,s.height);r.drawImage(d.bitmap,d.left,d.top),t.drawImage(s,c.x,c.y),r.clearRect(Ss,_s,s.width,s.height),r.putImageData(e,Ss,_s)}}if(a.gifTime+=n.value,a.gifTime>d.delayTime){if(a.gifTime-=d.delayTime,++l>=i.gifData.frames.length){if(--a.gifLoopCount<=0)return;l=0,r.clearRect(Ss,_s,s.width,s.height)}a.gifFrame=l}t.scale(i.gifData.width/o,i.gifData.height/o)}}(e);else if(s){const e=i.ratio,a={x:-o,y:-o},n=2*o;t.drawImage(s,a.x,a.y,n,n/e)}t.globalAlpha=1}}getSidesCount(){return 12}async init(e){const t=e.actualOptions;if(t.preload&&this._engine.loadImage)for(const o of t.preload)await this._engine.loadImage(o)}loadShape(e){if("image"!==e.shape&&"images"!==e.shape)return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;if(!t)return;this._engine.images.find(e=>e.name===t.name||e.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if("image"!==t.shape&&"images"!==t.shape)return;this._engine.images||(this._engine.images=[]);const o=this._engine.images,a=t.shapeData;if(!a)return;const n=t.getFillColor(),i=o.find(e=>e.name===a.name||e.source===a.src);if(!i)return;const s=a.replaceColor??i.replaceColor;i.loading?setTimeout(()=>{this.particleInit(e,t)}):(async()=>{let e;e=i.svgData&&n?await bs(i,a,n,t):{color:n,data:i,element:i.element,gif:i.gif,gifData:i.gifData,gifLoopCount:i.gifLoopCount,loaded:!0,ratio:a.width&&a.height?a.width/a.height:i.ratio??1,replaceColor:s,source:a.src},e.ratio||(e.ratio=1);const o={image:e,fill:a.fill??t.shapeFill,close:a.close??t.shapeClose};t.image=o.image,t.shapeFill=o.fill,t.shapeClose=o.close})()}}class zs{constructor(){this.src="",this.gif=!1}load(e){Mt(e)||(void 0!==e.gif&&(this.gif=e.gif),void 0!==e.height&&(this.height=e.height),void 0!==e.name&&(this.name=e.name),void 0!==e.replaceColor&&(this.replaceColor=e.replaceColor),void 0!==e.src&&(this.src=e.src),void 0!==e.width&&(this.width=e.width))}}class Is{constructor(e){this.id="imagePreloader",this._engine=e}async getPlugin(){return await Promise.resolve(),{}}loadOptions(e,t){if(!(null==t?void 0:t.preload))return;e.preload||(e.preload=[]);const o=e.preload;for(const a of t.preload){const e=o.find(e=>e.name===a.name||e.src===a.src);if(e)e.load(a);else{const e=new zs;e.load(a),o.push(e)}}}needsPlugin(){return!0}}async function Ps(e,t=!0){e.checkVersion("3.9.1"),function(e){e.loadImage||(e.loadImage=async t=>{if(!t.name&&!t.src)throw new Error(`${gt} no image source provided`);if(e.images||(e.images=[]),!e.images.find(e=>e.name===t.name||e.source===t.src))try{const o={gif:t.gif??!1,name:t.name??t.src,source:t.src,type:t.src.substring(t.src.length-3),error:!1,loading:!0,replaceColor:t.replaceColor,ratio:t.width&&t.height?t.width/t.height:void 0};let a;e.images.push(o),a=t.gif?Ns:t.replaceColor?gs:xs,await a(o)}catch{throw new Error(`${gt} ${t.name??t.src} not found`)}})}(e);const o=new Is(e);await e.addPlugin(o,t),await e.addShape(new Rs(e),t)}class Ms extends Sa{constructor(){super(),this.sync=!1}load(e){Mt(e)||(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class Ls extends Sa{constructor(){super(),this.sync=!1}load(e){Mt(e)||(super.load(e),void 0!==e.sync&&(this.sync=e.sync))}}class Ts{constructor(){this.count=0,this.delay=new Ms,this.duration=new Ls}load(e){Mt(e)||(void 0!==e.count&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}class Ds{constructor(e){this.container=e}init(e){const t=this.container,o=e.options.life;o&&(e.life={delay:t.retina.reduceFactor?Vt(o.delay.value)*(o.delay.sync?1:At())/t.retina.reduceFactor*vt:0,delayTime:0,duration:t.retina.reduceFactor?Vt(o.duration.value)*(o.duration.sync?1:At())/t.retina.reduceFactor*vt:0,time:0,count:o.count},e.life.duration<=0&&(e.life.duration=-1),e.life.count<=0&&(e.life.count=-1),e.life&&(e.spawning=e.life.delay>0))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new Ts);for(const o of t)e.life.load(null==o?void 0:o.life)}update(e,t){this.isEnabled(e)&&e.life&&function(e,t,o){if(!e.life)return;const a=e.life;let n=!1;if(e.spawning){if(a.delayTime+=t.value,!(a.delayTime>=e.life.delay))return;n=!0,e.spawning=!1,a.delayTime=0,a.time=0}if(-1===a.duration)return;if(e.spawning)return;if(n?a.time=0:a.time+=t.value,a.time<a.duration)return;if(a.time=0,e.life.count>0&&e.life.count--,0===e.life.count)return void e.destroy();const i=Gt(0,o.width),s=Gt(0,o.width);e.position.x=Ut(i),e.position.y=Ut(s),e.spawning=!0,a.delayTime=0,a.time=0,e.reset();const r=e.options.life;r&&(a.delay=Vt(r.delay.value)*vt,a.duration=Vt(r.duration.value)*vt)}(e,t,this.container.canvas.size)}}class As{constructor(){this.validTypes=["line"]}draw(e){!function(e){const{context:t,particle:o,radius:a}=e,n=o.shapeData;t.moveTo(-a,0),t.lineTo(a,0),t.lineCap=(null==n?void 0:n.cap)??"butt"}(e)}getSidesCount(){return 1}}class Bs{init(){}isEnabled(e){return!xo()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,o=t.actualOptions.interactivity.events.onHover.parallax;if(xo()||!o.enable)return;const a=o.force,n=t.interactivity.mouse.position;if(!n)return;const i=t.canvas.size,s=.5*i.width,r=.5*i.height,l=o.smooth,c=e.getRadius()/a,d=(n.x-s)*c,u=(n.y-r)*c,{offset:h}=e;h.x+=(d-h.x)/l,h.y+=(u-h.y)/l}}class $s extends sn{constructor(e){super(e)}clear(){}init(){}interact(e){const t=this.container;void 0===e.attractDistance&&(e.attractDistance=Vt(e.options.move.attract.distance)*t.retina.pixelRatio);const o=e.attractDistance,a=e.getPosition(),n=t.particles.quadTree.queryCircle(a,o);for(const i of n){if(e===i||!i.options.move.attract.enable||i.destroyed||i.spawning)continue;const t=i.getPosition(),{dx:o,dy:n}=qt(a,t),s=e.options.move.attract.rotate,r=o/(1e3*s.x),l=n/(1e3*s.y),c=i.size.value/e.size.value,d=1/c;e.velocity.x-=r*c,e.velocity.y-=l*c,i.velocity.x+=r*d,i.velocity.y+=l*d}}isEnabled(e){return e.options.move.attract.enable}reset(){}}function Us(e,t,o,a,n,i){const s=Bt(e.options.collisions.absorb.speed*n.factor/10,0,a);e.size.value+=.5*s,o.size.value-=s,a<=i&&(o.size.value=0,o.destroy())}const Vs=e=>{void 0===e.collisionMaxSpeed&&(e.collisionMaxSpeed=Vt(e.options.collisions.maxSpeed)),e.velocity.length>e.collisionMaxSpeed&&(e.velocity.length=e.collisionMaxSpeed)};function Hs(e,t){Fo(_o(e),_o(t)),Vs(e),Vs(t)}function Ws(e,t,o,a){switch(e.options.collisions.mode){case Ao.absorb:!function(e,t,o,a){const n=e.getRadius(),i=t.getRadius();void 0===n&&void 0!==i?e.destroy():void 0!==n&&void 0===i?t.destroy():void 0!==n&&void 0!==i&&(n>=i?Us(e,0,t,i,o,a):Us(t,0,e,n,o,a))}(e,t,o,a);break;case Ao.bounce:Hs(e,t);break;case Ao.destroy:!function(e,t){e.unbreakable||t.unbreakable||Hs(e,t),void 0===e.getRadius()&&void 0!==t.getRadius()?e.destroy():void 0!==e.getRadius()&&void 0===t.getRadius()?t.destroy():void 0!==e.getRadius()&&void 0!==t.getRadius()&&(e.getRadius()>=t.getRadius()?t:e).destroy()}(e,t)}}class Gs extends sn{constructor(e){super(e)}clear(){}init(){}interact(e,t){if(e.destroyed||e.spawning)return;const o=this.container,a=e.getPosition(),n=e.getRadius(),i=o.particles.quadTree.queryCircle(a,2*n);for(const s of i){if(e===s||!s.options.collisions.enable||e.options.collisions.mode!==s.options.collisions.mode||s.destroyed||s.spawning)continue;const i=s.getPosition(),r=s.getRadius();if(Math.abs(Math.round(a.z)-Math.round(i.z))>n+r)continue;Kt(a,i)>n+r||Ws(e,s,t,o.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}class qs extends on{constructor(e,t,o,a){super(e,t,o),this.canvasSize=a,this.canvasSize={...a}}contains(e){const{width:t,height:o}=this.canvasSize,{x:a,y:n}=e;return super.contains(e)||super.contains({x:a-t,y:n})||super.contains({x:a-t,y:n-o})||super.contains({x:a,y:n-o})}intersects(e){if(super.intersects(e))return!0;const t=e,o=e,a={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(void 0!==o.radius){const e=new on(a.x,a.y,2*o.radius);return super.intersects(e)}if(void 0!==t.size){const e=new an(a.x,a.y,2*t.size.width,2*t.size.height);return super.intersects(e)}return!1}}class Ks{constructor(){this.blur=5,this.color=new ba,this.color.value="#000",this.enable=!1}load(e){Mt(e)||(void 0!==e.blur&&(this.blur=e.blur),this.color=ba.create(this.color,e.color),void 0!==e.enable&&(this.enable=e.enable))}}class Ys{constructor(){this.enable=!1,this.frequency=1}load(e){Mt(e)||(void 0!==e.color&&(this.color=ba.create(this.color,e.color)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=e.opacity))}}class Xs{constructor(){this.blink=!1,this.color=new ba,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new Ks,this.triangles=new Ys,this.width=1,this.warp=!1}load(e){Mt(e)||(void 0!==e.id&&(this.id=e.id),void 0!==e.blink&&(this.blink=e.blink),this.color=ba.create(this.color,e.color),void 0!==e.consent&&(this.consent=e.consent),void 0!==e.distance&&(this.distance=e.distance),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),void 0!==e.width&&(this.width=e.width),void 0!==e.warp&&(this.warp=e.warp))}}const Js=0,Qs=0;function Zs(e,t,o,a,n){const{dx:i,dy:s,distance:r}=qt(e,t);if(!n||r<=o)return r;const l={x:Math.abs(i),y:Math.abs(s)},c=Math.min(l.x,a.width-l.x),d=Math.min(l.y,a.height-l.y);return Math.sqrt(c**2+d**2)}class er extends sn{constructor(e,t){super(e),this._setColor=e=>{if(!e.options.links)return;const t=this._linkContainer,o=e.options.links;let a=void 0===o.id?t.particles.linksColor:t.particles.linksColors.get(o.id);if(a)return;const n=o.color;a=ha(this._engine,n,o.blink,o.consent),void 0===o.id?t.particles.linksColor=a:t.particles.linksColors.set(o.id,a)},this._linkContainer=e,this._engine=t}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),o=this.container,a=o.canvas.size;if(t.x<Js||t.y<Qs||t.x>a.width||t.y>a.height)return;const n=e.options.links,i=n.opacity,s=e.retina.linksDistance??0,r=n.warp;let l;l=r?new qs(t.x,t.y,s,a):new on(t.x,t.y,s);const c=o.particles.quadTree.query(l);for(const d of c){const o=d.options.links;if(e===d||!(null==o?void 0:o.enable)||n.id!==o.id||d.spawning||d.destroyed||!d.links||e.links.some(e=>e.destination===d)||d.links.some(t=>t.destination===e))continue;const l=d.getPosition();if(l.x<Js||l.y<Qs||l.x>a.width||l.y>a.height)continue;const c=Zs(t,l,s,a,r&&o.warp);if(c>s)continue;const u=(1-c/s)*i;this._setColor(e),e.links.push({destination:d,opacity:u})}}isEnabled(e){var t;return!!(null==(t=e.options.links)?void 0:t.enable)}loadParticlesOptions(e,...t){e.links||(e.links=new Xs);for(const o of t)e.links.load(null==o?void 0:o.links)}reset(){}}function tr(e,t){const o=((a=e.map(e=>e.id)).sort((e,t)=>e-t),a.join("_"));var a;let n=t.get(o);return void 0===n&&(n=At(),t.set(o,n)),n}class or{constructor(e,t){this._drawLinkLine=(e,t)=>{const o=e.options.links;if(!(null==o?void 0:o.enable))return;const a=this._container,n=a.actualOptions,i=t.destination,s=e.getPosition(),r=i.getPosition();let l=t.opacity;a.canvas.draw(t=>{var c;let d;const u=null==(c=e.options.twinkle)?void 0:c.lines;if(null==u?void 0:u.enable){const e=u.frequency,t=oa(this._engine,u.color);At()<e&&t&&(d=t,l=Vt(u.opacity))}if(!d){const t=void 0!==o.id?a.particles.linksColors.get(o.id):a.particles.linksColor;d=ua(e,i,t)}if(!d)return;const h=e.retina.linksWidth??0,p=e.retina.linksDistance??0,{backgroundMask:m}=n;!function(e){let t=!1;const{begin:o,end:a,engine:n,maxDistance:i,context:s,canvasSize:r,width:l,backgroundMask:c,colorLine:d,opacity:u,links:h}=e;if(Kt(o,a)<=i)ga(s,o,a),t=!0;else if(h.warp){let e,n;const l=qt(o,{x:a.x-r.width,y:a.y});if(l.distance<=i){const t=o.y-l.dy/l.dx*o.x;e={x:0,y:t},n={x:r.width,y:t}}else{const t=qt(o,{x:a.x,y:a.y-r.height});if(t.distance<=i){const a=-(o.y-t.dy/t.dx*o.x)/(t.dy/t.dx);e={x:a,y:0},n={x:a,y:r.height}}else{const t=qt(o,{x:a.x-r.width,y:a.y-r.height});if(t.distance<=i){const a=o.y-t.dy/t.dx*o.x;e={x:-a/(t.dy/t.dx),y:a},n={x:e.x+r.width,y:e.y+r.height}}}}e&&n&&(ga(s,o,e),ga(s,a,n),t=!0)}if(!t)return;s.lineWidth=l,c.enable&&(s.globalCompositeOperation=c.composite),s.strokeStyle=la(d,u);const{shadow:p}=h;if(p.enable){const e=oa(n,p.color);e&&(s.shadowBlur=p.blur,s.shadowColor=la(e))}s.stroke()}({context:t,width:h,begin:s,end:r,engine:this._engine,maxDistance:p,canvasSize:a.canvas.size,links:o,backgroundMask:m,colorLine:d,opacity:l})})},this._drawLinkTriangle=(e,t,o)=>{const a=e.options.links;if(!(null==a?void 0:a.enable))return;const n=a.triangles;if(!n.enable)return;const i=this._container,s=i.actualOptions,r=t.destination,l=o.destination,c=n.opacity??.5*(t.opacity+o.opacity);c<=0||i.canvas.draw(t=>{const o=e.getPosition(),d=r.getPosition(),u=l.getPosition(),h=e.retina.linksDistance??0;if(Kt(o,d)>h||Kt(u,d)>h||Kt(u,o)>h)return;let p=oa(this._engine,n.color);if(!p){const t=void 0!==a.id?i.particles.linksColors.get(a.id):i.particles.linksColor;p=ua(e,r,t)}p&&function(e){const{context:t,pos1:o,pos2:a,pos3:n,backgroundMask:i,colorTriangle:s,opacityTriangle:r}=e;!function(e,t,o,a){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(o.x,o.y),e.lineTo(a.x,a.y),e.closePath()}(t,o,a,n),i.enable&&(t.globalCompositeOperation=i.composite),t.fillStyle=la(s,r),t.fill()}({context:t,pos1:o,pos2:d,pos3:u,backgroundMask:s.backgroundMask,colorTriangle:p,opacityTriangle:c})})},this._drawTriangles=(e,t,o,a)=>{var n,i,s;const r=o.destination;if(!(null==(n=e.links)?void 0:n.triangles.enable)||!(null==(i=r.options.links)?void 0:i.triangles.enable))return;const l=null==(s=r.links)?void 0:s.filter(e=>{const t=this._getLinkFrequency(r,e.destination);return r.options.links&&t<=r.options.links.frequency&&a.findIndex(t=>t.destination===e.destination)>=0});if(null==l?void 0:l.length)for(const c of l){const a=c.destination;this._getTriangleFrequency(t,r,a)>e.links.triangles.frequency||this._drawLinkTriangle(t,o,c)}},this._getLinkFrequency=(e,t)=>tr([e,t],this._freqs.links),this._getTriangleFrequency=(e,t,o)=>tr([e,t,o],this._freqs.triangles),this._container=e,this._engine=t,this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:o,options:a}=t;if(!(null==o?void 0:o.length))return;const n=o.filter(e=>a.links&&(a.links.frequency>=1||this._getLinkFrequency(t,e.destination)<=a.links.frequency));for(const i of n)this._drawTriangles(a,t,i,n),i.opacity>0&&(t.retina.linksWidth??0)>0&&this._drawLinkLine(t,i)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this._container.retina.pixelRatio,{retina:o}=e,{distance:a,width:n}=e.options.links;o.linksDistance=a*t,o.linksWidth=n*t}particleDestroyed(e){e.links=[]}}class ar{constructor(e){this.id="links",this._engine=e}getPlugin(e){return Promise.resolve(new or(e,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function nr(e,t=!0){e.checkVersion("3.9.1"),await async function(e,t=!0){await e.addInteractor("particlesLinks",async t=>Promise.resolve(new er(t,e)),t)}(e,t),await async function(e,t=!0){const o=new ar(e);await e.addPlugin(o,t)}(e,t)}const ir=0,sr=0;class rr{draw(e){const{particle:t,radius:o}=e;!function(e,t,o){const{context:a}=e,n=o.count.numerator*o.count.denominator,i=o.count.numerator/o.count.denominator,s=180*(i-2)/i,r=Math.PI-Yt(s);if(a){a.beginPath(),a.translate(t.x,t.y),a.moveTo(ir,sr);for(let e=0;e<n;e++)a.lineTo(o.length,sr),a.translate(o.length,sr),a.rotate(r)}}(e,this.getCenter(t,o),this.getSidesData(t,o))}getSidesCount(e){const t=e.shapeData;return Math.round(Vt((null==t?void 0:t.sides)??5))}}class lr extends rr{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(e,t){return{x:-t/(e.sides/3.5),y:-t/.76}}getSidesData(e,t){const o=e.sides;return{count:{denominator:1,numerator:o},length:2.66*t/(o/3)}}}class cr extends rr{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(e,t){return{x:-t,y:t/1.66}}getSidesCount(){return 3}getSidesData(e,t){return{count:{denominator:2,numerator:3},length:2*t}}}async function dr(e,t=!0){e.checkVersion("3.9.1"),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new lr,t)}(e,t),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new cr,t)}(e,t)}class ur{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){Mt(e)||(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=Gt(e.speed)),void 0!==e.decay&&(this.decay=Gt(e.decay)),void 0!==e.sync&&(this.sync=e.sync))}}class hr extends Sa{constructor(){super(),this.animation=new ur,this.direction=Jo.clockwise,this.path=!1,this.value=0}load(e){Mt(e)||(super.load(e),void 0!==e.direction&&(this.direction=e.direction),this.animation.load(e.animation),void 0!==e.path&&(this.path=e.path))}}const pr=2*Math.PI;class mr{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:Yt(Vt(t.value)),min:0,max:pr},e.pathRotation=t.path;let o=t.direction;if(o===Jo.random){o=Math.floor(2*At())>0?Jo.counterClockwise:Jo.clockwise}switch(o){case Jo.counterClockwise:case"counterClockwise":e.rotate.status=oo.decreasing;break;case Jo.clockwise:e.rotate.status=oo.increasing}const a=t.animation;a.enable&&(e.rotate.decay=1-Vt(a.decay),e.rotate.velocity=Vt(a.speed)/360*this.container.retina.reduceFactor,a.sync||(e.rotate.velocity*=At())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return!!t&&(!e.destroyed&&!e.spawning&&(!!t.value||t.animation.enable||t.path))}loadOptions(e,...t){e.rotate||(e.rotate=new hr);for(const o of t)e.rotate.load(null==o?void 0:o.rotate)}update(e,t){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(Po(e,e.rotate,!1,no.none,t),e.rotation=e.rotate.value))}}const fr=Math.sqrt(2);class xr{constructor(){this.validTypes=["edge","square"]}draw(e){!function(e){const{context:t,radius:o}=e,a=o/fr,n=2*a;t.rect(-a,-a,n,n)}(e)}getSidesCount(){return 4}}const gr=0,br=0;class yr{constructor(){this.validTypes=["star"]}draw(e){!function(e){const{context:t,particle:o,radius:a}=e,n=o.sides,i=o.starInset??2;t.moveTo(gr,br-a);for(let s=0;s<n;s++)t.rotate(Math.PI/n),t.lineTo(gr,br-a*i),t.rotate(Math.PI/n),t.lineTo(gr,br-a)}(e)}getSidesCount(e){const t=e.shapeData;return Math.round(Vt((null==t?void 0:t.sides)??5))}particleInit(e,t){const o=t.shapeData;t.starInset=Vt((null==o?void 0:o.inset)??2)}}class vr{constructor(e,t){this._container=e,this._engine=t}init(e){var t;const o=this._container,a=e.options,n=Ro(a.stroke,e.id,a.reduceDuplicates);e.strokeWidth=Vt(n.width)*o.retina.pixelRatio,e.strokeOpacity=Vt(n.opacity??1),e.strokeAnimation=null==(t=n.color)?void 0:t.animation;const i=na(this._engine,n.color)??e.getFillColor();i&&(e.strokeColor=pa(i,e.strokeAnimation,o.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:o}=e;return!e.destroyed&&!e.spawning&&!!t&&(void 0!==(null==o?void 0:o.h.value)&&o.h.enable||void 0!==(null==o?void 0:o.s.value)&&o.s.enable||void 0!==(null==o?void 0:o.l.value)&&o.l.enable)}update(e,t){this.isEnabled(e)&&xa(e.strokeColor,t)}}async function wr(e,t=!0){e.checkVersion("3.9.1"),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addMover("parallax",()=>Promise.resolve(new Bs),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalAttract",t=>Promise.resolve(new zi(e,t)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalBounce",e=>Promise.resolve(new Ai(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalBubble",t=>Promise.resolve(new qi(t,e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalConnect",e=>Promise.resolve(new Qi(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalGrab",t=>Promise.resolve(new os(t,e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalPause",e=>Promise.resolve(new as(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalPush",e=>Promise.resolve(new is(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalRemove",e=>Promise.resolve(new rs(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalRepulse",t=>Promise.resolve(new hs(e,t)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalSlow",e=>Promise.resolve(new ms(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("particlesAttract",e=>Promise.resolve(new $s(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("particlesCollisions",e=>Promise.resolve(new Gs(e)),t)}(e,!1),await nr(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addEasing(Zo.easeInQuad,e=>e**2,!1),await e.addEasing(Zo.easeOutQuad,e=>1-(1-e)**2,!1),await e.addEasing(Zo.easeInOutQuad,e=>e<.5?2*e**2:1-(-2*e+2)**2/2,!1),await e.refresh(t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new Fi,t)}(e,!1),await Ps(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new As,t)}(e,!1),await dr(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new xr,t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new yr,t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("life",async e=>Promise.resolve(new Ds(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("rotate",e=>Promise.resolve(new mr(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("strokeColor",t=>Promise.resolve(new vr(t,e)),t)}(e,!1),await Si(e,t)}function Cr(e,t,o,a,n,i){const s={x:-(t.length*o*.5),y:.5*o},r=2*o;i?e.fillText(t,s.x,s.y+r*n):e.strokeText(t,s.x,s.y+r*n)}class kr{constructor(){this.validTypes=["text","character","char","multiline-text"]}draw(e){!function(e){const{context:t,particle:o,radius:a,opacity:n}=e,i=o.shapeData;if(!i)return;const s=i.value;if(void 0===s)return;void 0===o.text&&(o.text=Ro(s,o.randomIndexData));const r=o.text,l=i.style??"",c=i.weight??"400",d=2*Math.round(a),u=i.font??"Verdana",h=o.shapeFill,p=null==r?void 0:r.split("\n");if(p){t.font=`${l} ${c} ${d}px "${u}"`,t.globalAlpha=n;for(let e=0;e<p.length;e++)Cr(t,p[e],a,0,e,h);t.globalAlpha=1}}(e)}async init(e){const t=e.actualOptions,{validTypes:o}=this;if(o.find(e=>go(e,t.particles.shape.type))){const e=o.map(e=>t.particles.shape.options[e]).find(e=>!!e),a=[];No(e,e=>{a.push(bo(e.font,e.weight))}),await Promise.all(a)}}particleInit(e,t){if(!t.shape||!this.validTypes.includes(t.shape))return;const o=t.shapeData;if(void 0===o)return;const a=o.value;void 0!==a&&(t.text=Ro(a,t.randomIndexData))}}var jr,Er;(Er=jr||(jr={})).clockwise="clockwise",Er.counterClockwise="counter-clockwise",Er.random="random";class Sr{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){Mt(e)||(void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed&&(this.speed=Gt(e.speed)),void 0!==e.decay&&(this.decay=Gt(e.decay)),void 0!==e.sync&&(this.sync=e.sync))}}class _r extends Sa{constructor(){super(),this.animation=new Sr,this.direction=jr.clockwise,this.enable=!1,this.value=0}load(e){super.load(e),Mt(e)||(this.animation.load(e.animation),void 0!==e.direction&&(this.direction=e.direction),void 0!==e.enable&&(this.enable=e.enable))}}const Fr=2*Math.PI;class Or{constructor(e){this.container=e}getTransformValues(e){var t;const o=(null==(t=e.tilt)?void 0:t.enable)&&e.tilt;return{b:o?Math.cos(o.value)*o.cosDirection:void 0,c:o?Math.sin(o.value)*o.sinDirection:void 0}}init(e){var t;const o=e.options.tilt;if(!o)return;e.tilt={enable:o.enable,value:Yt(Vt(o.value)),sinDirection:At()>=yt?1:-1,cosDirection:At()>=yt?1:-1,min:0,max:Fr};let a=o.direction;if(a===jr.random){a=Math.floor(2*At())>0?jr.counterClockwise:jr.clockwise}switch(a){case jr.counterClockwise:case"counterClockwise":e.tilt.status=oo.decreasing;break;case jr.clockwise:e.tilt.status=oo.increasing}const n=null==(t=e.options.tilt)?void 0:t.animation;(null==n?void 0:n.enable)&&(e.tilt.decay=1-Vt(n.decay),e.tilt.velocity=Vt(n.speed)/360*this.container.retina.reduceFactor,n.sync||(e.tilt.velocity*=At()))}isEnabled(e){var t;const o=null==(t=e.options.tilt)?void 0:t.animation;return!e.destroyed&&!e.spawning&&!!(null==o?void 0:o.enable)}loadOptions(e,...t){e.tilt||(e.tilt=new _r);for(const o of t)e.tilt.load(null==o?void 0:o.tilt)}async update(e,t){this.isEnabled(e)&&e.tilt&&(Po(e,e.tilt,!1,no.none,t),await Promise.resolve())}}class Nr{constructor(){this.enable=!1,this.frequency=.05,this.opacity=1}load(e){Mt(e)||(void 0!==e.color&&(this.color=ba.create(this.color,e.color)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.frequency&&(this.frequency=e.frequency),void 0!==e.opacity&&(this.opacity=Gt(e.opacity)))}}class Rr{constructor(){this.lines=new Nr,this.particles=new Nr}load(e){Mt(e)||(this.lines.load(e.lines),this.particles.load(e.particles))}}class zr{constructor(e){this._engine=e}getColorStyles(e,t,o,a){const n=e.options.twinkle;if(!n)return{};const i=n.particles,s=i.enable&&At()<i.frequency,r=e.options.zIndex,l=(1-e.zIndexFactor)**r.opacityRate,c=s?Vt(i.opacity)*l:a,d=na(this._engine,i.color),u=d?ca(d,c):void 0,h={},p=s&&u;return h.fill=p?u:void 0,h.stroke=p?u:void 0,h}async init(){await Promise.resolve()}isEnabled(e){const t=e.options.twinkle;return!!t&&t.particles.enable}loadOptions(e,...t){e.twinkle||(e.twinkle=new Rr);for(const o of t)e.twinkle.load(null==o?void 0:o.twinkle)}async update(){await Promise.resolve()}}class Ir{constructor(){this.angle=50,this.move=10}load(e){Mt(e)||(void 0!==e.angle&&(this.angle=Gt(e.angle)),void 0!==e.move&&(this.move=Gt(e.move)))}}class Pr{constructor(){this.distance=5,this.enable=!1,this.speed=new Ir}load(e){if(!Mt(e)&&(void 0!==e.distance&&(this.distance=Gt(e.distance)),void 0!==e.enable&&(this.enable=e.enable),void 0!==e.speed))if(zt(e.speed))this.speed.load({angle:e.speed});else{const t=e.speed;void 0!==t.min?this.speed.load({angle:t}):this.speed.load(e.speed)}}}const Mr=2*Math.PI;const Lr=2*Math.PI;class Tr{constructor(e){this.container=e}init(e){const t=e.options.wobble;(null==t?void 0:t.enable)?e.wobble={angle:At()*Lr,angleSpeed:Vt(t.speed.angle)/360,moveSpeed:Vt(t.speed.move)/10}:e.wobble={angle:0,angleSpeed:0,moveSpeed:0},e.retina.wobbleDistance=Vt((null==t?void 0:t.distance)??0)*this.container.retina.pixelRatio}isEnabled(e){var t;return!e.destroyed&&!e.spawning&&!!(null==(t=e.options.wobble)?void 0:t.enable)}loadOptions(e,...t){e.wobble||(e.wobble=new Pr);for(const o of t)e.wobble.load(null==o?void 0:o.wobble)}update(e,t){this.isEnabled(e)&&function(e,t){const{wobble:o}=e.options,{container:a,wobble:n}=e;if(!(null==o?void 0:o.enable)||!n)return;const i=a.retina.reduceFactor,s=n.angleSpeed*t.factor*i,r=n.moveSpeed*t.factor*i*(e.retina.wobbleDistance??0)/16.666666666666668,l=Mr,{position:c}=e;n.angle+=s,n.angle>l&&(n.angle-=l),c.x+=r*Math.cos(n.angle),c.y+=r*Math.abs(Math.sin(n.angle))}(e,t)}}async function Dr(e,t=!0){e.checkVersion("3.9.1"),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("destroy",t=>Promise.resolve(new Cn(e,t)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("roll",()=>Promise.resolve(new ei(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("tilt",e=>Promise.resolve(new Or(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("twinkle",()=>Promise.resolve(new zr(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addParticleUpdater("wobble",e=>Promise.resolve(new Tr(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addShape(new kr,t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addInteractor("externalTrail",e=>Promise.resolve(new Kn(e)),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),await e.addPlugin(new pn(e),t)}(e,!1),await async function(e,t=!0){e.checkVersion("3.9.1"),e.emitterShapeManager||(e.emitterShapeManager=new Mn(e)),e.addEmitterShapeGenerator||(e.addEmitterShapeGenerator=(t,o)=>{var a;null==(a=e.emitterShapeManager)||a.addShapeGenerator(t,o)});const o=new In(e);await e.addPlugin(o,t)}(e,!1),await async function(e,t=!0){var o;const a=e;a.checkVersion("3.9.1"),null==(o=a.addEmitterShapeGenerator)||o.call(a,"circle",new Bn),await a.refresh(t)}(e,!1),await async function(e,t=!0){var o;const a=e;a.checkVersion("3.9.1"),null==(o=a.addEmitterShapeGenerator)||o.call(a,"square",new Wn),await a.refresh(t)}(e,!1),await wr(e,t)}const Ar={API_KEY:"4Vj8eK4rloUd272L48hsrarnUA",MERCHANT_ID:"508029",CURRENCIES:{USD:{amount:"185.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"},COP:{amount:"735000.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"}},BEATO16_CURRENCIES:{USD:{amount:"250.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"},COP:{amount:"1000000.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"}},KNOBO_CURRENCIES:{USD:{amount:"100.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"},COP:{amount:"400000.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"}},MIXO_CURRENCIES:{USD:{amount:"200.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"},COP:{amount:"800000.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"}},LOOPO_CURRENCIES:{USD:{amount:"110.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"},COP:{amount:"440000.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"}},FADO_CURRENCIES:{USD:{amount:"150.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"},COP:{amount:"600000.00",accountId:"512321",symbol:"$",url:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",country:"CO",language:"es"}},DEFAULT_CURRENCY:"USD",CONFIRMATION_URL:" https://37afce6068d0.ngrok-free.app/api/payu-confirmation",RESPONSE_URL:"https://josepro66.github.io/CONFIGURADOR/pago-finalizado"},Br=e=>Ar.CURRENCIES[e]||Ar.CURRENCIES[Ar.DEFAULT_CURRENCY],$r=e=>Ar.BEATO16_CURRENCIES[e]||Ar.BEATO16_CURRENCIES[Ar.DEFAULT_CURRENCY],Ur=e=>Ar.KNOBO_CURRENCIES[e]||Ar.KNOBO_CURRENCIES[Ar.DEFAULT_CURRENCY],Vr=e=>Ar.MIXO_CURRENCIES[e]||Ar.MIXO_CURRENCIES[Ar.DEFAULT_CURRENCY],Hr=e=>Ar.LOOPO_CURRENCIES[e]||Ar.LOOPO_CURRENCIES[Ar.DEFAULT_CURRENCY],Wr=e=>Ar.FADO_CURRENCIES[e]||Ar.FADO_CURRENCIES[Ar.DEFAULT_CURRENCY],Gr=({onProductChange:t})=>{const[v,w]=E.useState(""),[C,k]=E.useState(""),j=E.useRef(null),S=E.useRef(null),_=E.useRef(null),F=E.useRef(null),L=E.useRef(null),T=E.useRef(null),D=E.useRef(null),[A,B]=E.useState("normal"),[$,U]=E.useState(null),[V,H]=E.useState(()=>{const e=localStorage.getItem("beato_chosenColors");if(e)try{return JSON.parse(e)}catch(Cl){}return{type:"configUpdate",chasis:"Gris",buttons:{},knobs:{}}}),[W,G]=E.useState({chasis:[],buttons:[],knobs:[]}),[q,K]=E.useState(!1),[Y,X]=E.useState(null),[J,Q]=E.useState(!1),Z=E.useRef(A),[ee,te]=E.useState([]),[oe,ae]=E.useState([]),ne={chasis:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},buttons:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},knobs:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}}},ie={normal:{pos:new h(2,1,-.1),target:new h(0,-.5,-.1)},top:{pos:new h(1,1.65,-.3),target:new h(-.35,-.9,-.3)}},se=E.useRef(null),re=E.useRef(null);E.useCallback(async()=>{if(j.current)try{const e=j.current.querySelector("canvas");if(e){const t=e.toDataURL("image/png");X(t)}}catch(e){}K(!0)},[V]),E.useCallback(()=>{},[]);const[le,ce]=E.useState(null);E.useEffect(()=>{(new a).load("public/textures/blackhole.jpg.avif",e=>{e.mapping=n,ce(e)})},[]);const de=E.useCallback((e,t)=>{const o=new i(16777215,.9);e.add(o);const a=new s(16777215,1.2);a.position.set(5,4,-1),a.castShadow=!0,a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.camera.near=.5,a.shadow.camera.far=50,a.shadow.normalBias=.02,e.add(a);const n=new s(10079487,1);n.position.set(-8,3,-9),e.add(n);const l=new s(10079487,1);l.position.set(-8,3,15),e.add(l);const c=new r(16777215,.7,.5);c.position.set(0,5,5),e.add(c);const d=new s(16777215,1.2);d.position.set(-5,30,0),d.castShadow=!0,d.shadow.mapSize.width=2048,d.shadow.mapSize.height=2048,d.shadow.camera.near=.5,d.shadow.camera.far=50,d.shadow.normalBias=.02,e.add(d)},[]),ue=E.useCallback(e=>{const t={chasis:[],buttons:[],knobs:[]},o={type:"configUpdate",chasis:"Gris",buttons:{},knobs:{}};e.traverse(e=>{var a;if(!(e instanceof l))return;e.castShadow=!0,e.receiveShadow=!0;const n="string"==typeof e.name?e.name.toLowerCase():"";if((n.includes("logo")||n.includes("beato")||n.includes("crearttech")||n.includes("custom midi"))&&e.material&&"map"in e.material&&e.material.map&&(e.material.transparent=!0,e.material.alphaTest=.9),n.includes("cubechasis"))e.material=new c({color:ne.chasis.Gris.hex,metalness:.8,roughness:.35,clearcoat:.85,clearcoatRoughness:.1}),t.chasis.push(e),o.chasis="Gris";else if(n.includes("boton")){const a="Negro";e.material=new c({color:ne.buttons[a].hex,metalness:.4,roughness:.68,clearcoat:.85,clearcoatRoughness:.08,reflectivity:.3,sheen:.5,sheenColor:1842204}),t.buttons.push(e),o.buttons[e.name]=a}else if(n.includes("knob")){if(null==(a=e.material)?void 0:a.color){const a=e.material;if((a.color.r+a.color.g+a.color.b)/3<.5){const a="Negro";e.material=new d({color:ne.knobs[a].hex,metalness:0,roughness:1}),t.knobs.push(e),o.knobs[e.name]=a}else e.material=new d({color:16777215})}}else n.includes("aro")&&(e.material=new c({color:0,metalness:0,roughness:.2,clearcoat:.8,clearcoatRoughness:.1,reflectivity:.5,transmission:.3,thickness:.5,ior:1.4,attenuationDistance:1,attenuationColor:16777215,transparent:!0,opacity:.7}),t.buttons.push(e),o.buttons[e.name]="Negro")}),G(t),H(o)},[le]),he=E.useCallback(e=>{const t=(new u).setFromObject(e),o=t.getSize(new h),a=t.getCenter(new h),n=1.8/Math.max(o.x,o.y,o.z);e.scale.set(n,n,n),e.position.copy(a).multiplyScalar(-n),e.position.y-=o.y/2*n},[]),pe=E.useCallback(async()=>{try{const{GLTFLoader:e}=await o(async()=>{const{GLTFLoader:e}=await import("./GLTFLoader-L0pBLRUW.js");return{GLTFLoader:e}},__vite__mapDeps([7,1,2]));(new e).load("./models/BEATO3.glb",e=>{var t;const o=e.scene;T.current=o,ue(o),he(o),null==(t=S.current)||t.add(o),D.current||(D.current=o.position.clone());o.traverse(e=>{e.isMesh&&("string"==typeof e.name&&e.name.toLowerCase().includes("boton")||"string"==typeof e.name&&e.name.toLowerCase().includes("aro"))&&e.material&&"color"in e.material&&e.material.color.setHex(1842204),e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&(e.material=e.material.clone())}),T.current.traverse(e=>{})},void 0,e=>{})}catch(e){}},[ue,he]);E.useEffect(()=>{if(!j.current)return;const e=new p;e.background=null,S.current=e;const t=new m({antialias:!0,alpha:!0,preserveDrawingBuffer:!0});t.setSize(j.current.clientWidth,j.current.clientHeight),t.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.outputColorSpace=f,t.shadowMap.enabled=!0,t.shadowMap.type=x,_.current=t,j.current.appendChild(t.domElement);const a=new g(45,j.current.clientWidth/j.current.clientHeight,.1,200);let n;a.position.copy(ie.normal.pos),F.current=a,o(async()=>{const{OrbitControls:e}=await import("./OrbitControls-DFclDx1A.js");return{OrbitControls:e}},__vite__mapDeps([8,1,2])).then(({OrbitControls:e})=>{const o=new e(a,t.domElement);o.target.copy(ie.normal.target),o.enableDamping=!0,o.minDistance=2,o.maxDistance=5,L.current=o}),de(e,t),pe();const i=()=>{n=requestAnimationFrame(i),L.current&&L.current.update(),t.render(e,a)};return i(),()=>{n&&cancelAnimationFrame(n),j.current&&t.domElement&&j.current.removeChild(t.domElement),t.dispose()}},[de,pe]),E.useEffect(()=>{const e=()=>{if(j.current&&F.current&&_.current){const e=j.current.clientWidth,t=j.current.clientHeight;F.current.aspect=e/t,F.current.updateProjectionMatrix(),_.current.setSize(e,t)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),E.useEffect(()=>{localStorage.setItem("beato_currentView",A)},[A]),E.useEffect(()=>{localStorage.setItem("beato_chosenColors",JSON.stringify(V))},[V]),E.useEffect(()=>{if(W.chasis.length>0||W.buttons.length>0||W.knobs.length>0){if(V.chasis&&ne.chasis[V.chasis]){const e=ne.chasis[V.chasis].hex;W.chasis.forEach(t=>{t.material&&"color"in t.material&&t.material.color.setHex(parseInt(e.replace("#",""),16))})}Object.entries(V.buttons).forEach(([e,t])=>{if(ne.buttons[t]){const o=ne.buttons[t].hex,a=W.buttons.find(t=>t.name===e);a&&a.material&&"color"in a.material&&a.material.color.setHex(parseInt(o.replace("#",""),16))}}),Object.entries(V.knobs).forEach(([e,t])=>{if(ne.knobs[t]){const o=ne.knobs[t].hex,a=W.knobs.find(t=>t.name===e);a&&a.material&&"color"in a.material&&a.material.color.setHex(parseInt(o.replace("#",""),16))}})}},[W,V]);const me=E.useCallback((e,t=0)=>{var o;e&&(null==(o=e.material)?void 0:o.emissive)&&e.material.emissive.setHex(t)},[]),fe=E.useCallback(e=>{var t;if(!F.current||!_.current)return;if("chasis"===A)return U(null),void te([]);const o=new b,a=new y,n=_.current.domElement.getBoundingClientRect();a.x=(e.clientX-n.left)/n.width*2-1,a.y=-(e.clientY-n.top)/n.height*2+1,o.setFromCamera(a,F.current);let i=[];if("buttons"===A?i=W.buttons:"knobs"===A?i=W.knobs:"normal"===A&&(i=W.buttons),0===i.length)return;const s=o.intersectObjects(i,!1);if("buttons"===A&&W.buttons.forEach(e=>me(e,0)),$&&"normal"!==A&&me($,0),s.length>0){const o=s[0].object;if("normal"===A)return;if("buttons"===A&&e.shiftKey)0===ee.length&&$&&$!==o?(te([$,o]),U(null),me($,4473924),me(o,4473924)):(U(null),te(e=>{if(0===e.length)return me(o,4473924),[o];let t;return e.includes(o)?(t=e.filter(e=>e!==o),me(o,0)):(t=[...e,o],me(o,4473924)),t.forEach(e=>me(e,4473924)),t}));else if(te([]),"buttons"===A&&o.name.toLowerCase().includes("aro")){const e=parseInt((null==(t=o.name.match(/\d+/))?void 0:t[0])||"1",10),a=W.buttons.find(t=>t.name.toLowerCase().includes("boton")&&t.name.includes(e.toString()));if(!a)return void U(null);U(a),me(a,4473924)}else U(o),me(o,4473924)}else U(null),te([])},[A,W,$,me,ee]),xe=E.useCallback(e=>{var t;if(!T.current)return null;let o=null;const a=null==(t=e.match(/\d+/))?void 0:t[0];return a?(T.current.traverse(e=>{var t;if(e instanceof l&&e.name.toLowerCase().includes("aro")){(null==(t=e.name.match(/\d+/))?void 0:t[0])===a&&(o=e)}}),o):null},[]),ge=E.useCallback(e=>{if(B(e),"chasis"===e&&W.chasis.length>0?U(W.chasis[0]):U(null),!F.current||!L.current)return;let t,o;"normal"===e?(t=ie.normal,o=!0):(t=ie.top,o=!1),L.current.enabled=o,O.to(F.current.position,{duration:1.2,ease:"power3.inOut",...t.pos}),O.to(L.current.target,{duration:1.2,ease:"power3.inOut",...t.target,onUpdate:()=>L.current.update()})},[W]),be=E.useCallback((e,t)=>{if("chasis"===A)return W.chasis.forEach(e=>{e.material.color.set(t.hex)}),void H(t=>({...t,chasis:e}));if("buttons"===A&&ee.length>0){const o={...V,buttons:{...V.buttons}};return ee.forEach(a=>{a.material.color.set(t.hex),o.buttons[a.name]=e;const n=xe(a.name);n&&n.material&&n.material.color.set(t.hex)}),H(o),ee.forEach(e=>me(e,0)),void te([])}if("knobs"===A&&oe.length>0){const o={...V,knobs:{...V.knobs}};return oe.forEach(a=>{a.material.color.set(t.hex),o.knobs[a.name]=e}),H(o),oe.forEach(e=>me(e,0)),void ae([])}if(!$)return void N.fire({title:"Selecciona una parte",text:"Haz clic en una pieza del controlador para aplicar el color.",imageUrl:"models/logo.png",imageWidth:120,imageHeight:120,background:"#232846",color:"#FFFFFF",confirmButtonColor:"#a259ff",confirmButtonText:"Entendido"});$.material.color.set(t.hex);const o={...V},a=$.name;if(W.buttons.includes($)){if(o.buttons[a]=e,a.toLowerCase().includes("boton")){const e=xe(a);e&&e.material&&e.material.color.set(t.hex)}me($,0)}else W.knobs.includes($)&&(o.knobs[a]=e);H(o)},[$,ee,V,W,A,xe,oe]),ye=E.useCallback(()=>{if(!_.current||!S.current||!F.current)return;const e=F.current.position.clone(),t=L.current?L.current.target.clone():null,o=F.current.fov,a=ie.normal.pos.clone(),n=ie.normal.target.clone();F.current.position.copy(a),F.current.fov=35,F.current.updateProjectionMatrix(),L.current&&(L.current.target.copy(n),L.current.update()),setTimeout(()=>{_.current.render(S.current,F.current);const a=_.current.domElement.toDataURL("image/png");X(a),F.current.position.copy(e),F.current.fov=o,F.current.updateProjectionMatrix(),L.current&&t&&(L.current.target.copy(t),L.current.update()),K(!0)},50)},[_,S,F,L,ie,X,K]);E.useEffect(()=>{Z.current=A},[A]),E.useEffect(()=>{setTimeout(()=>{F.current&&L.current&&(se.current=F.current.position.clone(),re.current=L.current.target.clone())},100)},[]);const[ve,we]=E.useState("USD"),[Ce,ke]=E.useState({referenceCode:"controlador123",amount:"185.00",currency:"USD",signature:"",description:"Configurador Beato 8",buyerEmail:"cliente@correo.com"});E.useEffect(()=>{const e=Br(ve);ke(t=>({...t,amount:e.amount,currency:ve,description:`Configurador Beato 8 - ${ve} ${e.symbol}${e.amount}`}))},[ve]),E.useEffect(()=>{!async function(){const e=await async function({referenceCode:e,amount:t,currency:o}){return""}({referenceCode:Ce.referenceCode,amount:Ce.amount,currency:Ce.currency});ke(t=>({...t,signature:e}))}()},[Ce.referenceCode,Ce.amount,Ce.currency]),E.useEffect(()=>{if(J){const e=`controlador${Date.now()}`;ke(t=>({...t,referenceCode:e}))}},[J]),E.useEffect(()=>{if(q){const e=`BEATO8-${Date.now()}`;ke(t=>({...t,referenceCode:e}))}},[q]);const[je,Ee]=E.useState([]);E.useCallback(async()=>{try{const t=`payu_checkout_${Date.now()}`;let o=null;try{o=window.open("",t)}catch(e){o=null}const a="http://localhost:4000".replace(/\/$/,""),n={modelo:"BEATO8",color:V.chasis,extras:null,buyerEmail:"",amount:"185.00",currency:"USD",botones:Object.values(V.buttons),perillas:Object.values(V.knobs),screenshot:Y||null,description:"Controlador MIDI personalizado"},i=await fetch(`${a}/api/payu/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok){await i.text();if(o&&!o.closed)try{o.close()}catch(e){}return void N.fire({icon:"error",title:"Error con PayU",text:"No se pudo crear la orden (backend)."})}const{action:s,fields:r}=await i.json();if(!s||!r){if(o&&!o.closed)try{o.close()}catch(e){}return void N.fire({icon:"error",title:"Error con PayU",text:"Respuesta inválida del backend."})}const l=document.createElement("form");l.action=s,l.method="post",l.target=o?t:"_self";const c=(e,t)=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,l.appendChild(o)};Object.entries(r||{}).forEach(([e,t])=>c(e,String(t))),c("lng","es"),document.body.appendChild(l),l.submit(),document.body.removeChild(l)}catch(t){try{window.openWindows}catch(e){}N.fire({icon:"error",title:"Error",text:"No se pudo iniciar el pago con PayU."})}},[V,Y]);return e.jsxs(I,{options:{clientId:"sb",currency:"USD"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,backgroundImage:"url(/textures/fondo.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}),e.jsxs("div",{className:"w-full h-screen text-gray-200 overflow-hidden relative",style:{background:"transparent"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"transparent"}}),e.jsx(R,{id:"tsparticles",init:async e=>{await Dr(e)},options:{fullScreen:{enable:!1},background:{color:{value:"transparent"}},fpsLimit:60,particles:{color:{value:"#a259ff"},links:{enable:!0,color:"#a259ff",distance:120},move:{enable:!0,speed:1},number:{value:50},opacity:{value:.5},shape:{type:"circle"},size:{value:3}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}},modes:{repulse:{distance:100,duration:.4}}}},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",top:16,left:6,zIndex:51,display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("button",{onClick:()=>window.location.href="https://www.crearttech.com/",className:"relative px-5 py-2 rounded-full font-bold text-sm uppercase tracking-wider text-white transition-all duration-300 hover:-translate-y-0.5",style:{background:"linear-gradient(90deg, rgba(0,255,255,0.18) 0%, rgba(122,0,255,0.18) 50%, rgba(255,0,255,0.18) 100%)",border:"1px solid rgba(0, 255, 255, 0.55)"},children:e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:[e.jsx("path",{d:"M3 10.5L12 3l9 7.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 9.5V21h14V9.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Inicio"})]})})}),e.jsx("div",{className:"absolute top-10 left-0 right-0 z-30 flex justify-center items-center",children:e.jsx("h1",{className:"text-2xl font-bold leading-none m-0",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#FFFFFF",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #FFFFFF",letterSpacing:"0.04em"},children:"BEATO8"})}),e.jsx("main",{className:"flex w-full h-full",style:{minHeight:"100vh",height:"100vh",position:"relative",zIndex:1,overflow:"hidden",background:"transparent"},children:e.jsx("div",{className:"flex-grow h-full",style:{position:"relative",zIndex:1,background:"transparent"},children:e.jsx("div",{ref:j,className:"w-full h-full transition-all duration-300",onClick:fe,style:{position:"relative",zIndex:1}})})}),e.jsxs("div",{className:"fixed top-0 right-0 h-screen border-l border-gray-700 shadow-2xl transition-all duration-400 flex overflow-hidden z-10 "+("normal"===A?"w-28":"w-[320px]"),style:{backgroundColor:"rgba(255, 255, 0, 0.8)",background:"transparent",boxShadow:"0 0 16px 2px rgba(0, 255, 255, 0.4), -6px 0 16px 0 rgba(0, 255, 255, 0.3), inset 0 0 10px rgba(0,0,0,0.8)",borderLeft:"2px solid rgba(0, 255, 255, 0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[e.jsx("div",{className:"w-28 p-4 flex-shrink-0",style:{paddingTop:"160px"},children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[[{id:"normal",icon:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5M12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17M12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",title:"Vista General"},{id:"chasis",icon:"./textures/beato.png",title:"Chasis",isImage:!0},{id:"buttons",icon:"M12 1.999c5.524 0 10.002 4.478 10.002 10.002c0 5.523-4.478 10.001-10.002 10.001S1.998 17.524 1.998 12.001C1.998 6.477 6.476 1.999 12 1.999m0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5M11.996 6a5.998 5.998 0 1 1 0 11.996a5.998 5.998 0 0 1 0-11.996",title:"Botones"},{id:"knobs",icon:"M9.42 4.074a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56M11.554 8.8a.5.5 0 0 1 0 .707l-1.78 1.78a.5.5 0 1 1-.708-.707l1.78-1.78a.5.5 0 0 1 .708 0 M9.42 15.444c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.03 1.32-3.19 1.32m0-1.1a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82M6.757 5.2a.56.56 0 1 0-.965.567l.465.809l.005.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm5.315.012a.55.55 0 0 1 .761-.206c.277.152.36.5.203.764l-.458.797a.56.56 0 0 1-.478.277a.564.564 0 0 1-.487-.834zm7.598 5.722a.5.5 0 0 1 .5-.5h2.52a.5.5 0 1 1 0 1h-2.52a.5.5 0 0 1-.5-.5 M22.69 15.454c2.49 0 4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52s2.03 4.52 4.52 4.52m0-1.11a3.41 3.41 0 1 1 0-6.82a3.41 3.41 0 0 1 0 6.82m-.56-9.7c0-.308.252-.56.56-.56s.56.252.56.56v.945a.566.566 0 0 1-.56.535a.56.56 0 0 1-.56-.56zm-2.103.566a.557.557 0 0 0-.763-.202a.566.566 0 0 0-.204.753l.468.815l.004.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm6.086-.204a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759c.1.067.217.078.282.078a.6.6 0 0 0 .478-.262l.005-.006l.463-.806a.55.55 0 0 0-.203-.764M11.93 22.636H9.42a.5.5 0 0 0 0 1h2.51a.5.5 0 1 0 0-1 M4.9 23.136c0 2.49 2.03 4.52 4.52 4.52s4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52m7.93 0a3.41 3.41 0 1 1-6.82 0a3.41 3.41 0 0 1 6.82 0m-3.41-6.86a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56m-3.418.93a.566.566 0 0 1 .755.206l.464.807c.137.258.06.6-.205.753a.53.53 0 0 1-.276.074a.58.58 0 0 1-.478-.261l-.005-.007l-.468-.814a.566.566 0 0 1 .207-.755zm6.08.209a.55.55 0 0 1 .761-.206c.277.151.36.499.203.764l-.462.802a.567.567 0 0 1-.766.194a.55.55 0 0 1-.194-.76zm8.475 3.588a.5.5 0 0 1 .707 0l1.78 1.78a.5.5 0 0 1-.707.707l-1.78-1.78a.5.5 0 0 1 0-.707 M22.69 27.656c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.04 1.32-3.19 1.32m0-1.11a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82 M22.13 16.836c0-.308.252-.56.56-.56s.56.252.56.56v.945a.57.57 0 0 1-.56.545a.56.56 0 0 1-.56-.56zm-2.103.576a.566.566 0 0 0-.755-.206l-.006.003a.565.565 0 0 0-.206.755l.468.814l.004.007a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.074a.566.566 0 0 0 .205-.753zm6.086-.203a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759a.5.5 0 0 0 .282.077a.6.6 0 0 0 .478-.261l.005-.007l.463-.805a.55.55 0 0 0-.203-.764 M1 5.75A4.75 4.75 0 0 1 5.75 1h20.52a4.75 4.75 0 0 1 4.75 4.75v20.48a4.75 4.75 0 0 1-4.75 4.75H5.75A4.75 4.75 0 0 1 1 26.23zM5.75 3A2.75 2.75 0 0 0 3 5.75v20.48a2.75 2.75 0 0 0 2.75 2.75h20.52a2.75 2.75 0 0 0 2.75-2.75V5.75A2.75 2.75 0 0 0 26.27 3z",title:"Knobs"}].map(t=>e.jsx("button",{onClick:"faders"===t.id?void 0:()=>ge(t.id),className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white relative "+(A===t.id?"bg-gradient-to-br from-[#00FFFF] to-[#0080FF] border-[#00FFFF] shadow-lg":"border-[#00FFFF] bg-gradient-to-br from-[#000000] to-[#1a1a1a] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg"),title:t.title,disabled:"faders"===t.id,style:"faders"===t.id?{cursor:"not-allowed"}:{},children:t.isImage?e.jsx("img",{src:t.icon,alt:t.title,className:"w-full h-full mx-auto my-auto object-contain"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"chasis"===t.id||"knobs"===t.id?"0 0 32 32":"faders"===t.id?"0 0 256 256":"0 0 24 24",className:"w-4/5 h-4/5 mx-auto my-auto fill-white text-white",fill:"#FFFFFF",children:e.jsx("path",{d:t.icon})})},t.id)),e.jsx("input",{id:"sidebar-upload",type:"file",accept:"image/*,application/pdf",multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&Ee(Array.from(e.target.files))}}),e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=document.getElementById("sidebar-upload"))?void 0:e.click()},className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white bg-gradient-to-br from-[#000000] to-[#1a1a1a] border-[#00FFFF] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg",title:"Subir archivos de personalización",children:e.jsx("svg",{width:"28",height:"28",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 16V4m0 0l-4 4m4-4l4 4M4 20h16",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),je.length>0&&e.jsxs("span",{className:"text-xs text-white mt-2",children:["Archivos: ",je.map(e=>e.name).join(", ")]})]})}),e.jsxs("div",{className:"flex-1 p-2 flex flex-col",children:[e.jsx("div",{className:"flex items-center pb-5 border-b border-gray-600 pl-0 "+("normal"===A?"justify-center items-center gap-0":"justify-center gap-2"),style:"normal"===A?{minHeight:"48px"}:{},children:"normal"===A?e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-6 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}):e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}})}),e.jsxs("div",{className:"mt-6 animate-fadeIn",children:[e.jsx("p",{className:"font-black text-sm tracking-wide uppercase m-0 mb-3 text-gray-200 text-left animate-fadeIn",children:(()=>{switch(A){case"chasis":return"ELIGE EL COLOR DEL CHASIS";case"buttons":return"PERSONALIZA LOS BOTONES";case"knobs":return"ESCOGE PARA LOS KNOBS";default:return"ELIGE UN COLOR"}})()}),e.jsx("div",{className:"grid grid-cols-2 gap-x-0 gap-y-0 p-0 justify-items-end ml-auto animate-scaleIn",children:Object.entries((()=>{switch(A){case"chasis":return ne.chasis;case"buttons":return ne.buttons;case"knobs":return ne.knobs;default:return{}}})()).map(([t,o],a)=>e.jsx("div",{className:"w-10 h-10 rounded-full cursor-pointer border border-[#a259ff] shadow-[0_0_6px_1px_#a259ff55] transition-all duration-200 hover:scale-110 animate-fadeInUp",style:{backgroundColor:o.hex,animationDelay:50*a+"ms"},title:t,onClick:()=>be(t,o)},t))})]})]})]}),"normal"===A&&e.jsx("button",{onClick:ye,className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 text-lg font-bold uppercase tracking-wide text-black bg-purple-400 border-none rounded cursor-pointer transition-all duration-200 shadow-lg hover:bg-yellow-200 hover:scale-105 hover:shadow-xl shadow-[0_0_8px_2px_#a259ff80,0_0_16px_4px_#0ff5]",children:"AÑADIR AL CARRITO"}),q&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#3a4060] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-4 md:py-4 md:px-8 w-full max-w-4xl mx-4 animate-fade-in",children:[e.jsx("button",{onClick:()=>K(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"PAGO SEGURO"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[e.jsx("div",{className:"w-full max-w-[320px] md:max-w-[380px] aspect-[4/3] flex items-center justify-center ml-16 md:ml-24",children:Y&&e.jsx("img",{src:Y,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-8 md:mt-0",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"Tu configuración:"}),e.jsxs("ul",{className:"text-base space-y-1",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",V.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Botones:"})," ",Object.values(V.buttons).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values(V.knobs).join(", ")||"Por defecto"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:"Selecciona tu moneda:"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>we("USD"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("USD"===ve?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"USD $185.00"}),e.jsx("button",{onClick:()=>we("COP"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("COP"===ve?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"COP $735,000"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-2",children:["Precio seleccionado: ",ve," ",Br(ve).symbol,Br(ve).amount]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx(P,{style:{layout:"horizontal",color:"blue",shape:"rect",label:"paypal",height:48},createOrder:async()=>{try{const e=await fetch("http://localhost:4000/api/create-paypal-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customization:V})});if(!e.ok)throw new Error("Error en el servidor al crear la orden.");return(await e.json()).id}catch(e){return alert("No se pudo iniciar el pago. Inténtalo de nuevo."),Promise.reject(e)}},onApprove:async e=>{await(async e=>{try{if(!(await fetch("http://localhost:4000/api/verify-paypal-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderID:e,customization:V,screenshot:Y})})).ok)throw new Error("La verificación del pago falló en el servidor.");return!0}catch(t){return alert("Hubo un problema al verificar tu pago. Por favor, contacta a soporte."),!1}})(e.orderID)?(alert("¡Pago verificado y completado! Recibirás un correo de confirmación."),K(!1)):alert("Error en la verificación del pago. Por favor, contacta a soporte.")},onError:e=>{alert("Error en el pago con PayPal: "+e)}}),e.jsxs("button",{onClick:async()=>{if(!Ce.buyerEmail||!Ce.buyerEmail.includes("@"))return void alert("Por favor ingresa un email válido");let e="";try{const t=document.querySelector("canvas");if(t){e=(await z(t,{useCORS:!0,allowTaint:!0})).toDataURL("image/jpeg",.6),localStorage.setItem("payu_screenshot",e)}}catch(d){}const t="payu-popup";if(!window.open("",t,"width=800,height=600,scrollbars=yes,resizable=yes"))return void alert("Por favor permite popups para continuar con el pago");const o=Br(ve),a=`${Ar.API_KEY}~${Ar.MERCHANT_ID}~${Ce.referenceCode}~${o.amount}~${ve}`,n=M(a).toString(),i=document.createElement("form");i.method="POST",i.action=o.url,i.target=t;const s=Object.values(V.buttons||{}).join(", ")||"Sin configurar",r=Object.values(V.knobs||{}).join(", ")||"Sin configurar",l=`${`Beato8 - Chasis: ${V.chasis||"Personalizado"}, Botones: ${Object.keys(V.buttons||{}).length}, Knobs: ${Object.keys(V.knobs||{}).length}`} | Botones: ${s} | Perillas: ${r} | Email: ${Ce.buyerEmail}`,c={merchantId:Ar.MERCHANT_ID,accountId:o.accountId,description:`Configurador Beato 8 - ${ve} ${o.symbol}${o.amount}`,referenceCode:Ce.referenceCode,amount:o.amount,currency:ve,buyerEmail:Ce.buyerEmail,signature:n,test:"1",confirmationUrl:Ar.CONFIRMATION_URL,responseUrl:Ar.RESPONSE_URL,lng:o.language,extra1:"Beato8",extra2:V.chasis||"Personalizado",extra3:l,extra4:`Configurador Beato 8 - ${ve} ${o.symbol}${o.amount}`,extra5:e.substring(0,100)+"...",payerCountry:"CO",payerCity:"Bogota",payerPhone:"+57-300-1234567",country:"CO"};Object.entries(c).forEach(([e,t])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,i.appendChild(o)}),document.body.appendChild(i),i.submit(),document.body.removeChild(i)},className:"w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-cyan-400 text-white font-bold text-lg shadow-[0_0_12px_2px_#0ff580] hover:scale-105 transition-all mt-2",children:["Pagar con PayU (",ve," ",Br(ve).symbol,Br(ve).amount,")"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:"Tu compra es 100% segura y protegida."})]})}),J&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#232846] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-6 w-full max-w-2xl mx-4 animate-fade-in flex flex-col items-center",children:[e.jsx("button",{onClick:()=>Q(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"¡Producto añadido!"}),e.jsx("p",{className:"text-white text-center mb-4",children:"Tu producto personalizado se ha añadido al carrito de Wix. Puedes continuar comprando o finalizar tu compra en el sitio principal."}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center w-full",children:[e.jsx("div",{className:"w-full max-w-[220px] aspect-[4/3] flex items-center justify-center",children:Y&&e.jsx("img",{src:Y,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-4 md:mt-0 w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"Tu producto:"}),e.jsxs("ul",{className:"text-base space-y-1 mb-2",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",V.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Botones:"})," ",Object.values(V.buttons).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values(V.knobs).join(", ")||"Por defecto"]})]})]})]}),e.jsx("div",{className:"flex flex-col gap-4 mt-6 w-full",children:e.jsx("button",{onClick:()=>Q(!1),className:"w-full py-3 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold text-lg shadow-[0_0_12px_2px_#ff00ff80] hover:scale-105 transition-all mt-2",children:"Seguir Personalizando"})})]})})]})]})},qr=Object.freeze(Object.defineProperty({__proto__:null,default:Gr},Symbol.toStringTag,{value:"Module"})),Kr=({className:t="",style:o={}})=>{const[a,n]=E.useState(!1),[i]=E.useState(Date.now());return E.useEffect(()=>{const e=setTimeout(()=>{n(!0)},3e3);return()=>clearTimeout(e)},[]),e.jsxs("div",{className:t,style:o,children:[e.jsx(ut,{isVisible:!a}),e.jsx("div",{style:{width:"100%",height:"100%",opacity:a?1:0,transition:"opacity 0.8s ease-in-out"},children:e.jsx(Gr,{})})]})},Yr=Object.freeze(Object.defineProperty({__proto__:null,default:Kr},Symbol.toStringTag,{value:"Module"})),Xr=({isVisible:t})=>{const[o,a]=E.useState(0),[n]=E.useState(Date.now());return E.useEffect(()=>{if(t){const e=setInterval(()=>{const e=Date.now()-n,t=Math.min(e/3e3*100,100);a(t)},50);return()=>clearInterval(e)}a(0)},[t,n]),e.jsx(_,{children:t&&e.jsxs(F.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1.2,ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999,color:"white",fontFamily:"Arial, sans-serif"},children:[e.jsx(F.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},style:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px",color:"#FF6B35",textShadow:"0 0 20px #FF6B35, 0 0 40px #FF4500"},children:"BEATO16"}),e.jsx(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8,ease:"easeOut"},style:{fontSize:"18px",fontWeight:"bold",marginBottom:"40px",color:"#ffffff",textShadow:"0 0 10px #ffffff"},children:"16 BOTONES + 4 KNOBS"}),e.jsx(F.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{width:"100px",height:"100px",border:"6px solid rgba(255, 107, 53, 0.1)",borderTop:"6px solid #FF6B35",borderRadius:"50%",marginBottom:"40px",boxShadow:"0 0 30px rgba(255, 107, 53, 0.4)"}}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},style:{fontSize:"20px",fontWeight:"bold",textAlign:"center",marginBottom:"20px",color:"#FF6B35"},children:["Cargando BEATO16... ",Math.round(o),"%"]}),o>=100&&e.jsx(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},style:{fontSize:"18px",color:"#FFD700",fontWeight:"bold",marginBottom:"30px",textShadow:"0 0 10px #FFD700"},children:"¡BEATO16 listo para configurar!"}),e.jsx(F.div,{style:{width:"400px",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"40px"},children:e.jsx(F.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.1,ease:"linear"},style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #FF6B35, #FF4500, #FF6B35)",borderRadius:"4px",boxShadow:"0 0 15px rgba(255, 107, 53, 0.6)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),e.jsx(F.div,{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[0,1,2].map(t=>e.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeInOut"},style:{width:"12px",height:"12px",backgroundColor:"#FF6B35",borderRadius:"50%",boxShadow:"0 0 10px rgba(255, 107, 53, 0.6)"}},t))}),e.jsx("style",{children:"\n            @keyframes shimmer {\n              0% { background-position: -200% 0; }\n              100% { background-position: 200% 0; }\n            }\n          "})]})})},Jr=({onProductChange:t})=>{const[v,w]=E.useState(""),[C,k]=E.useState(""),j=E.useRef(null),S=E.useRef(null),_=E.useRef(null),F=E.useRef(null),P=E.useRef(null),L=E.useRef(null),T=E.useRef(null),[D,A]=E.useState("normal"),[B,$]=E.useState(null),[U,V]=E.useState(()=>{const e=localStorage.getItem("beato16_chosenColors");if(e)try{return JSON.parse(e)}catch(Cl){}return{type:"configUpdate",chasis:"Gris",buttons:{},knobs:{},teclas:{},faders:{}}}),[H,W]=E.useState({chasis:[],buttons:[],knobs:[],teclas:[],faders:[]}),[G,q]=E.useState(!1),[K,Y]=E.useState(null),[X,J]=E.useState(!1),Q=E.useRef(D),[Z,ee]=E.useState([]),[te,oe]=E.useState([]),[ae,ne]=E.useState([]),[ie,se]=E.useState([]),re={chasis:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},buttons:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},knobs:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},teclas:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},faders:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}}},le={normal:{pos:new h(2,1,-.1),target:new h(0,-.5,-.1)},top:{pos:new h(1,1.95,-.3),target:new h(-.35,-1.2,-.3)}},ce=E.useRef(null),de=E.useRef(null),ue=E.useCallback(async()=>{if(j.current)try{const e=j.current.querySelector("canvas");if(e){const t=e.toDataURL("image/png");Y(t)}}catch(e){}q(!0)},[U]),[he,pe]=E.useState(null);E.useEffect(()=>{(new a).load("public/textures/blackhole.jpg.avif",e=>{e.mapping=n,pe(e)})},[]);const me=E.useCallback((e,t)=>{const o=new i(16777215,.9);e.add(o);const a=new s(16777215,1.2);a.position.set(5,4,-1),a.castShadow=!0,e.add(a);const n=new s(10079487,1);n.position.set(-8,3,-9),e.add(n);const l=new s(10079487,1);l.position.set(-8,3,15),e.add(l);const c=new r(16777215,.7,.5);c.position.set(0,5,5),e.add(c);const d=new s(16777215,1.2);d.position.set(-5,30,0),d.castShadow=!0,e.add(d)},[]),fe=E.useCallback(e=>{const t={chasis:[],buttons:[],knobs:[],teclas:[],faders:[]},o={type:"configUpdate",chasis:"Gris",buttons:{},knobs:{},teclas:{},faders:{}};e.traverse(e=>{var a;if(!(e instanceof l))return;e.castShadow=!0,e.receiveShadow=!0;const n="string"==typeof e.name?e.name.toLowerCase():"";if((n.includes("logo")||n.includes("beato")||n.includes("crearttech")||n.includes("custom midi"))&&e.material&&"map"in e.material&&e.material.map&&(e.material.transparent=!0,e.material.alphaTest=.9),n.includes("cubechasis"))e.material=new c({color:re.chasis.Gris.hex,metalness:.8,roughness:.35,clearcoat:.85,clearcoatRoughness:.1}),t.chasis.push(e),o.chasis="Gris";else if(n.includes("boton")){const a="Negro";e.material=new c({color:re.buttons[a].hex,metalness:.4,roughness:.68,clearcoat:.85,clearcoatRoughness:.08,reflectivity:.3,sheen:.5,sheenColor:1842204}),t.buttons.push(e),o.buttons[e.name]=a}else if(n.includes("aro")||n.includes("fader")&&(n.includes("ring")||n.includes("circle")))e.material=new c({color:0,metalness:0,roughness:.2,clearcoat:.8,clearcoatRoughness:.1,reflectivity:.5,transmission:.3,thickness:.5,ior:1.4,attenuationDistance:1,attenuationColor:16777215,transparent:!0,opacity:.7}),t.buttons.push(e),o.buttons[e.name]="Negro";else if(n.includes("knob")){if(null==(a=e.material)?void 0:a.color){const a=e.material;if((a.color.r+a.color.g+a.color.b)/3<.5){const a="Negro";e.material=new d({color:re.knobs[a].hex,metalness:0,roughness:1}),t.knobs.push(e),o.knobs[e.name]=a}else e.material=new d({color:16777215})}}else if(n.includes("tecla")){const a="Negro";e.material=new c({color:re.teclas[a].hex,metalness:.4,roughness:.68,clearcoat:.85,clearcoatRoughness:.08,reflectivity:.3,sheen:.5,sheenColor:1842204}),t.teclas.push(e),o.teclas[e.name]=a}else if(n.includes("fader"))if("fader1_1"===n||"fader2_1"===n||"fader3_1"===n||"fader4_1"===n){const a="Negro";e.material=new d({color:re.knobs[a].hex,metalness:0,roughness:1}),t.faders.push(e),o.faders[e.name]=a}else if(e.material){const a=e.material;if(a.color){if((a.color.r+a.color.g+a.color.b)/3<.8){const n="Negro";a.color.setHex(parseInt(re.knobs[n].hex.replace("#",""),16)),t.faders.push(e),o.faders[e.name]=n}}}}),W(t),V(o)},[he]),xe=E.useCallback(e=>{const t=(new u).setFromObject(e),o=t.getSize(new h),a=t.getCenter(new h),n=1.8/Math.max(o.x,o.y,o.z);e.scale.set(n,n,n),e.position.copy(a).multiplyScalar(-n),e.position.y-=o.y/2*n},[]),ge=E.useCallback(async()=>{try{const{GLTFLoader:e}=await o(async()=>{const{GLTFLoader:e}=await import("./GLTFLoader-L0pBLRUW.js");return{GLTFLoader:e}},__vite__mapDeps([7,1,2]));(new e).load("./models/beato16.glb",e=>{var t;const o=e.scene;L.current=o,fe(o),xe(o),null==(t=S.current)||t.add(o),T.current||(T.current=o.position.clone());o.traverse(e=>{var t;const o=(null==(t=e.name)?void 0:t.toLowerCase())||"",a=o.includes("aro"),n=o.includes("fader")&&(o.includes("ring")||o.includes("circle"));e.isMesh&&"string"==typeof e.name&&(a||n)&&(e.material&&"color"in e.material&&e.material.color.setHex(1842204),e.material=e.material.clone()),e.isMesh&&"string"==typeof e.name&&o.includes("fader")})},void 0,e=>{})}catch(e){}},[fe,xe]);E.useEffect(()=>{if(!j.current)return;const e=new p;e.background=null,S.current=e;const t=new m({antialias:!0,alpha:!0,preserveDrawingBuffer:!0});t.setSize(j.current.clientWidth,j.current.clientHeight),t.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.outputColorSpace=f,t.shadowMap.enabled=!0,t.shadowMap.type=x,_.current=t,j.current.appendChild(t.domElement);const a=new g(45,j.current.clientWidth/j.current.clientHeight,.1,200);let n;a.position.copy(le.normal.pos),F.current=a,o(async()=>{const{OrbitControls:e}=await import("./OrbitControls-DFclDx1A.js");return{OrbitControls:e}},__vite__mapDeps([8,1,2])).then(({OrbitControls:e})=>{const o=new e(a,t.domElement);o.target.copy(le.normal.target),o.enableDamping=!0,o.minDistance=2,o.maxDistance=5,P.current=o}),me(e,t),ge();const i=()=>{n=requestAnimationFrame(i),P.current&&P.current.update(),t.render(e,a)};return i(),()=>{n&&cancelAnimationFrame(n),j.current&&t.domElement&&j.current.removeChild(t.domElement),t.dispose()}},[me,ge]),E.useEffect(()=>{const e=()=>{if(j.current&&F.current&&_.current){const e=j.current.clientWidth,t=j.current.clientHeight;F.current.aspect=e/t,F.current.updateProjectionMatrix(),_.current.setSize(e,t)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),E.useEffect(()=>{localStorage.setItem("beato16_currentView",D)},[D]),E.useEffect(()=>{localStorage.setItem("beato16_chosenColors",JSON.stringify(U))},[U]),E.useEffect(()=>{if(H.chasis.length>0){if(U.chasis&&re.chasis[U.chasis]){const e=re.chasis[U.chasis].hex;H.chasis.forEach(t=>{t.material&&"color"in t.material&&t.material.color.setHex(parseInt(e.replace("#",""),16))})}Object.entries(U.buttons).forEach(([e,t])=>{if(re.buttons[t]){const o=re.buttons[t].hex,a=H.buttons.find(t=>t.name===e);a&&a.material&&"color"in a.material&&a.material.color.setHex(parseInt(o.replace("#",""),16))}}),Object.entries(U.knobs).forEach(([e,t])=>{if(re.knobs[t]){const o=re.knobs[t].hex,a=H.knobs.find(t=>t.name===e);a&&a.material&&"color"in a.material&&a.material.color.setHex(parseInt(o.replace("#",""),16))}})}},[H,U]);const be=E.useCallback((e,t=0)=>{var o;e&&(null==(o=e.material)?void 0:o.emissive)&&e.material.emissive.setHex(t)},[]),ye=E.useCallback(e=>{if(!F.current||!_.current)return;if("chasis"===D)return $(null),void ee([]);const t=new b,o=new y,a=_.current.domElement.getBoundingClientRect();o.x=(e.clientX-a.left)/a.width*2-1,o.y=-(e.clientY-a.top)/a.height*2+1,t.setFromCamera(o,F.current);let n=[];if("buttons"===D?n=H.buttons:"knobs"===D?n=H.knobs:"teclas"===D?n=H.teclas:"faders"===D?n=H.faders:"normal"===D&&(n=H.buttons),0===n.length)return;const i=t.intersectObjects(n,!1);if("normal"!==D&&[...H.buttons,...H.knobs,...H.teclas,...H.faders].forEach(e=>be(e,0)),i.length>0){const t=i[0].object;if("normal"===D)return;const o=(o,a)=>{$(null);const n=a.find(e=>e.uuid===t.uuid);let i;i=e.shiftKey?n?a.filter(e=>e.uuid!==t.uuid):[...a,t]:[t],o(i),i.forEach(e=>be(e,4473924))};"buttons"===D?o(ee,Z):"knobs"===D?o(oe,te):"teclas"===D?o(ne,ae):"faders"===D?o(se,ie):($(t),be(t,4473924))}else $(null),ee([]),oe([]),ne([]),se([])},[D,H,be,Z,te,ae,ie]),ve=E.useCallback(e=>{var t;if(!L.current)return null;let o=null;const a=null==(t=e.match(/\d+/))?void 0:t[0];return a?(L.current.traverse(e=>{var t;if(e instanceof l&&e.name.toLowerCase().includes("aro")){(null==(t=e.name.match(/\d+/))?void 0:t[0])===a&&(o=e)}}),o):null},[]),we=E.useCallback(e=>{if(A(e),"chasis"===e&&H.chasis.length>0?$(H.chasis[0]):$(null),!F.current||!P.current)return;let t,o;"normal"===e?(t=le.normal,o=!0):(t=le.top,o=!1),P.current.enabled=o,O.to(F.current.position,{duration:1.2,ease:"power3.inOut",...t.pos}),O.to(P.current.target,{duration:1.2,ease:"power3.inOut",...t.target,onUpdate:()=>P.current.update()})},[H]),Ce=E.useCallback((e,t)=>{const o=(o,a,n)=>{const i={...U,[a]:{...U[a]}};o.forEach(o=>{o.material.color.set(t.hex),i[a][o.name]=e}),V(i),o.forEach(e=>be(e,0)),n([])};if("chasis"===D)return H.chasis.forEach(e=>e.material.color.set(t.hex)),void V(t=>({...t,chasis:e}));if("buttons"===D&&Z.length>0)return o(Z,"buttons",ee);if("knobs"===D&&te.length>0)return o(te,"knobs",oe);if("teclas"===D&&ae.length>0)return o(ae,"teclas",ne);if("faders"===D&&ie.length>0)return o(ie,"faders",se);if(B){B.material.color.set(t.hex);const o=B.name;let a;H.buttons.includes(B)?a="buttons":H.knobs.includes(B)?a="knobs":H.teclas.includes(B)?a="teclas":H.faders.includes(B)&&(a="faders"),a&&V(t=>({...t,[a]:{...t[a],[o]:e}})),be(B,0)}else N.fire({title:"Selecciona una parte",text:"Haz clic en una pieza del controlador para aplicar el color.",imageUrl:"models/logo.png",imageWidth:120,imageHeight:120,background:"#232846",color:"#fff",confirmButtonColor:"#a259ff",confirmButtonText:"Entendido"})},[B,Z,te,ae,ie,U,H,D,ve]);E.useCallback(()=>{if(!_.current||!S.current||!F.current)return;const e=F.current.position.clone(),t=P.current?P.current.target.clone():null,o=F.current.fov,a=le.normal.pos.clone(),n=le.normal.target.clone();F.current.position.copy(a),F.current.fov=35,F.current.updateProjectionMatrix(),P.current&&(P.current.target.copy(n),P.current.update()),setTimeout(()=>{_.current.render(S.current,F.current);const a=_.current.domElement.toDataURL("image/png");Y(a),F.current.position.copy(e),F.current.fov=o,F.current.updateProjectionMatrix(),P.current&&t&&(P.current.target.copy(t),P.current.update()),q(!0)},50)},[_,S,F,P,le,Y,q]);E.useEffect(()=>{Q.current=D},[D]),E.useEffect(()=>{setTimeout(()=>{F.current&&P.current&&(ce.current=F.current.position.clone(),de.current=P.current.target.clone())},100)},[]);const[ke,je]=E.useState("USD"),[Ee,Se]=E.useState({referenceCode:`controlador_${Date.now()}`,amount:"250.00",currency:"USD",signature:"",description:"Configurador Beato 16",buyerEmail:"cliente@correo.com"});E.useEffect(()=>{const e=$r(ke);Se(t=>({...t,amount:e.amount,currency:ke,description:`Configurador Beato 16 - ${ke} ${e.symbol}${e.amount}`}))},[ke]),E.useEffect(()=>{if(X||G){const e=`beato16-${Date.now()}`;Se(t=>({...t,referenceCode:e}))}},[X,G]);const[_e,Fe]=E.useState([]);return e.jsxs(I,{options:{clientId:"sb",currency:"USD"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,backgroundImage:"url(/textures/fondo.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}),e.jsxs("div",{className:"w-full h-screen text-gray-200 overflow-hidden relative",style:{background:"transparent"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"transparent"}}),e.jsx(R,{id:"tsparticles",init:async e=>{await Dr(e)},options:{fullScreen:{enable:!1},background:{color:{value:"transparent"}},fpsLimit:60,particles:{color:{value:"#a259ff"},links:{enable:!0,color:"#a259ff",distance:120},move:{enable:!0,speed:1},number:{value:50},opacity:{value:.5},shape:{type:"circle"},size:{value:3}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}},modes:{repulse:{distance:100,duration:.4}}}},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",top:16,left:6,zIndex:51,display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("button",{onClick:()=>window.location.href="https://www.crearttech.com/",className:"relative px-5 py-2 rounded-full font-bold text-sm uppercase tracking-wider text-white transition-all duration-300 hover:-translate-y-0.5",style:{background:"linear-gradient(90deg, rgba(0,255,255,0.18) 0%, rgba(122,0,255,0.18) 50%, rgba(255,0,255,0.18) 100%)",border:"1px solid rgba(0, 255, 255, 0.55)"},children:e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:[e.jsx("path",{d:"M3 10.5L12 3l9 7.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 9.5V21h14V9.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Inicio"})]})})}),e.jsxs("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-3",children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}),e.jsx("h1",{className:"text-2xl font-bold leading-none m-0",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #fff",letterSpacing:"0.04em"},children:"BEATO16"})]}),e.jsx("main",{className:"flex w-full h-full",style:{minHeight:"100vh",height:"100vh",position:"relative",zIndex:1,overflow:"hidden",background:"transparent"},children:e.jsx("div",{className:"flex-grow h-full",style:{position:"relative",zIndex:1,background:"transparent"},children:e.jsx("div",{ref:j,className:"w-full h-full transition-all duration-300",onClick:ye,style:{position:"relative",zIndex:1}})})}),e.jsxs("div",{className:"fixed top-0 right-0 h-screen border-l border-gray-700 shadow-2xl transition-all duration-400 flex overflow-hidden z-10 "+("normal"===D?"w-28":"w-[320px]"),style:{backgroundColor:"rgba(255, 255, 0, 0.8)",background:"transparent",boxShadow:"0 0 16px 2px rgba(0, 255, 255, 0.4), -6px 0 16px 0 rgba(0, 255, 255, 0.3), inset 0 0 10px rgba(0,0,0,0.8)",borderLeft:"2px solid rgba(0, 255, 255, 0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[e.jsx("div",{className:"w-28 p-4 flex-shrink-0",style:{paddingTop:"45px"},children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[[{id:"normal",icon:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5M12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17M12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",title:"Vista General"},{id:"chasis",icon:"./textures/beato16.png",title:"Chasis",isImage:!0},,{id:"buttons",icon:"M12 1.999c5.524 0 10.002 4.478 10.002 10.002c0 5.523-4.478 10.001-10.002 10.001S1.998 17.524 1.998 12.001C1.998 6.477 6.476 1.999 12 1.999m0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5M11.996 6a5.998 5.998 0 1 1 0 11.996a5.998 5.998 0 0 1 0-11.996",title:"Botones"},{id:"knobs",icon:"M9.42 4.074a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56M11.554 8.8a.5.5 0 0 1 0 .707l-1.78 1.78a.5.5 0 1 1-.708-.707l1.78-1.78a.5.5 0 0 1 .708 0 M9.42 15.444c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.03 1.32-3.19 1.32m0-1.1a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82M6.757 5.2a.56.56 0 1 0-.965.567l.465.809l.005.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm5.315.012a.55.55 0 0 1 .761-.206c.277.152.36.5.203.764l-.458.797a.56.56 0 0 1-.478.277a.564.564 0 0 1-.487-.834zm7.598 5.722a.5.5 0 0 1 .5-.5h2.52a.5.5 0 1 1 0 1h-2.52a.5.5 0 0 1-.5-.5 M22.69 15.454c2.49 0 4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52s2.03 4.52 4.52 4.52m0-1.11a3.41 3.41 0 1 1 0-6.82a3.41 3.41 0 0 1 0 6.82m-.56-9.7c0-.308.252-.56.56-.56s.56.252.56.56v.945a.566.566 0 0 1-.56.535a.56.56 0 0 1-.56-.56zm-2.103.566a.557.557 0 0 0-.763-.202a.566.566 0 0 0-.204.753l.468.815l.004.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm6.086-.204a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759c.1.067.217.078.282.078a.6.6 0 0 0 .478-.262l.005-.006l.463-.806a.55.55 0 0 0-.203-.764M11.93 22.636H9.42a.5.5 0 0 0 0 1h2.51a.5.5 0 1 0 0-1 M4.9 23.136c0 2.49 2.03 4.52 4.52 4.52s4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52m7.93 0a3.41 3.41 0 1 1-6.82 0a3.41 3.41 0 0 1 6.82 0m-3.41-6.86a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56m-3.418.93a.566.566 0 0 1 .755.206l.464.807c.137.258.06.6-.205.753a.53.53 0 0 1-.276.074a.58.58 0 0 1-.478-.261l-.005-.007l-.468-.814a.566.566 0 0 1 .207-.755zm6.08.209a.55.55 0 0 1 .761-.206c.277.151.36.499.203.764l-.462.802a.567.567 0 0 1-.766.194a.55.55 0 0 1-.194-.76zm8.475 3.588a.5.5 0 0 1 .707 0l1.78 1.78a.5.5 0 0 1-.707.707l-1.78-1.78a.5.5 0 0 1 0-.707 M22.69 27.656c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.04 1.32-3.19 1.32m0-1.11a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82 M22.13 16.836c0-.308.252-.56.56-.56s.56.252.56.56v.945a.57.57 0 0 1-.56.545a.56.56 0 0 1-.56-.56zm-2.103.576a.566.566 0 0 0-.755-.206l-.006.003a.565.565 0 0 0-.206.755l.468.814l.004.007a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.074a.566.566 0 0 0 .205-.753zm6.086-.203a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759a.5.5 0 0 0 .282.077a.6.6 0 0 0 .478-.261l.005-.007l.463-.805a.55.55 0 0 0-.203-.764 M1 5.75A4.75 4.75 0 0 1 5.75 1h20.52a4.75 4.75 0 0 1 4.75 4.75v20.48a4.75 4.75 0 0 1-4.75 4.75H5.75A4.75 4.75 0 0 1 1 26.23zM5.75 3A2.75 2.75 0 0 0 3 5.75v20.48a2.75 2.75 0 0 0 2.75 2.75h20.52a2.75 2.75 0 0 0 2.75-2.75V5.75A2.75 2.75 0 0 0 26.27 3z",title:"Knobs"},{id:"teclas",icon:"M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6zm3-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H6zm2 2h8v4H8V8z",title:"Teclas"},{id:"faders",icon:"M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z",title:"Faders"}].map(t=>e.jsx("button",{onClick:()=>we(t.id),className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white relative "+(D===t.id?"bg-gradient-to-br from-[#00FFFF] to-[#0080FF] border-[#00FFFF] shadow-lg":"border-[#00FFFF] bg-gradient-to-br from-[#000000] to-[#1a1a1a] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg"),title:t.title,children:t.isImage?e.jsx("img",{src:t.icon,alt:t.title,className:"w-full h-full mx-auto my-auto object-contain"}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"chasis"===t.id||"knobs"===t.id?"0 0 32 32":(t.id,"0 0 24 24"),className:"w-4/5 h-4/5 mx-auto my-auto fill-white text-white",fill:"#fff",children:e.jsx("path",{d:t.icon})})},t.id)),e.jsx("input",{id:"sidebar-upload",type:"file",accept:"image/*,application/pdf",multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&Fe(Array.from(e.target.files))}}),e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=document.getElementById("sidebar-upload"))?void 0:e.click()},className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white bg-gradient-to-br from-[#000000] to-[#1a1a1a] border-[#00FFFF] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg",title:"Subir archivos de personalización",children:e.jsx("svg",{width:"28",height:"28",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 16V4m0 0l-4 4m4-4l4 4M4 20h16",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),_e.length>0&&e.jsxs("span",{className:"text-xs text-white mt-2",children:["Archivos: ",_e.map(e=>e.name).join(", ")]})]})}),e.jsxs("div",{className:"flex-1 p-2 flex flex-col",children:[e.jsx("div",{className:"flex items-center pb-5 border-b border-gray-600 pl-0 "+("normal"===D?"justify-center items-center gap-0":"justify-center gap-2"),style:"normal"===D?{minHeight:"48px"}:{},children:"normal"===D?e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-6 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}):e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}})}),e.jsxs("div",{className:"mt-6 animate-fadeIn",children:[e.jsx("p",{className:"font-black text-sm tracking-wide uppercase m-0 mb-3 text-gray-200 text-left animate-fadeIn",children:(()=>{switch(D){case"chasis":return"ELIGE EL COLOR DEL CHASIS";case"buttons":return"PERSONALIZA LOS BOTONES";case"knobs":return"ESCOGE PARA LOS KNOBS";case"teclas":return"PERSONALIZA LAS TECLAS";case"faders":return"PERSONALIZA LOS FADERS";default:return"ELIGE UN COLOR"}})()}),e.jsx("div",{className:"grid grid-cols-2 gap-x-0 gap-y-0 p-0 justify-items-end ml-auto animate-scaleIn",children:Object.entries(re[D]||{}).map(([t,o],a)=>e.jsx("div",{className:"w-10 h-10 rounded-full cursor-pointer border border-[#a259ff] shadow-[0_0_6px_1px_#a259ff55] transition-all duration-200 hover:scale-110 animate-fadeInUp",style:{backgroundColor:o.hex,animationDelay:50*a+"ms"},title:t,onClick:()=>Ce(t,o)},t))})]})]})]}),"normal"===D&&e.jsx("button",{onClick:ue,className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 text-lg font-bold uppercase tracking-wide text-black bg-purple-400 border-none rounded cursor-pointer transition-all duration-200 shadow-lg hover:bg-yellow-200 hover:scale-105 hover:shadow-xl shadow-[0_0_8px_2px_#a259ff80,0_0_16px_4px_#0ff5]",children:"AÑADIR AL CARRITO"}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#3a4060] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-4 md:py-4 md:px-8 w-full max-w-4xl mx-4 animate-fade-in",children:[e.jsx("button",{onClick:()=>q(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"PAGO SEGURO"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[e.jsx("div",{className:"w-full max-w-[320px] md:max-w-[380px] aspect-[4/3] flex items-center justify-center ml-16 md:ml-24",children:K&&e.jsx("img",{src:K,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-8 md:mt-0",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"Tu configuración:"}),e.jsxs("ul",{className:"text-base space-y-1",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",U.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Botones:"})," ",Object.values(U.buttons).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values(U.knobs).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Teclas:"})," ",Object.values(U.teclas).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Faders:"})," ",Object.values(U.faders).join(", ")||"Por defecto"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:"Selecciona tu moneda:"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>je("USD"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("USD"===ke?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"USD $250.00"}),e.jsx("button",{onClick:()=>je("COP"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("COP"===ke?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"COP $1,000,000"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-2",children:["Precio seleccionado: ",ke," ",$r(ke).symbol,$r(ke).amount]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("div",{className:"w-full py-3 rounded-lg bg-gray-600 text-gray-400 font-bold text-lg text-center",children:"PayPal temporalmente no disponible"}),e.jsxs("button",{onClick:async()=>{if(!Ee.buyerEmail||!Ee.buyerEmail.includes("@"))return void alert("Por favor ingresa un email válido");let e="";try{const t=document.querySelector("canvas");if(t){e=(await z(t,{useCORS:!0,allowTaint:!0})).toDataURL("image/jpeg",.6),localStorage.setItem("payu_screenshot",e)}}catch(h){}const t="payu-popup";if(!window.open("",t,"width=800,height=600,scrollbars=yes,resizable=yes"))return void alert("Por favor permite popups para continuar con el pago");const o=$r(ke),a=`${Ar.API_KEY}~${Ar.MERCHANT_ID}~${Ee.referenceCode}~${o.amount}~${ke}`,n=M(a).toString(),i=document.createElement("form");i.method="POST",i.action=o.url,i.target=t;const s=Object.values(U.buttons||{}).join(", ")||"Sin configurar",r=Object.values(U.knobs||{}).join(", ")||"Sin configurar",l=Object.values(U.faders||{}).join(", ")||"Sin configurar",c=Object.values(U.teclas||{}).join(", ")||"Sin configurar",d=`${`Beato16 - Chasis: ${U.chasis||"Personalizado"}, Botones: ${Object.keys(U.buttons||{}).length}, Knobs: ${Object.keys(U.knobs||{}).length}, Faders: ${Object.keys(U.faders||{}).length}, Teclas: ${Object.keys(U.teclas||{}).length}`} | Botones: ${s} | Perillas: ${r} | Email: ${Ee.buyerEmail}`,u={merchantId:Ar.MERCHANT_ID,accountId:o.accountId,description:`Configurador Beato 16 - ${ke} ${o.symbol}${o.amount}`,referenceCode:Ee.referenceCode,amount:o.amount,currency:ke,buyerEmail:Ee.buyerEmail,signature:n,test:"1",confirmationUrl:Ar.CONFIRMATION_URL,responseUrl:Ar.RESPONSE_URL,lng:o.language,extra1:"Beato16",extra2:U.chasis||"Personalizado",extra3:d,extra4:`Configurador Beato 16 - ${ke} ${o.symbol}${o.amount}`,extra5:"screenshot_available",extra8:l,extra9:c,payerCountry:"CO",payerCity:"Bogota",payerPhone:"+57-300-1234567",country:"CO"};Object.entries(u).forEach(([e,t])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,i.appendChild(o)}),document.body.appendChild(i),i.submit(),document.body.removeChild(i)},className:"w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-cyan-400 text-white font-bold text-lg shadow-[0_0_12px_2px_#0ff580] hover:scale-105 transition-all mt-2",children:["Pagar con PayU (",ke," ",$r(ke).symbol,$r(ke).amount,")"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:"Tu compra es 100% segura y protegida."})]})}),X&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#232846] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-6 w-full max-w-2xl mx-4 animate-fade-in flex flex-col items-center",children:[e.jsx("button",{onClick:()=>J(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"¡Producto Añadido!"}),e.jsx("p",{className:"text-white text-center mb-4",children:"Tu configuración se ha añadido al carrito de Wix. Puedes finalizar tu compra desde allí."}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center w-full",children:[e.jsx("div",{className:"w-full max-w-[220px] aspect-[4/3] flex items-center justify-center",children:K&&e.jsx("img",{src:K,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-4 md:mt-0 w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"Tu producto:"}),e.jsxs("ul",{className:"text-base space-y-1 mb-2",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",U.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Botones:"})," ",Object.values(U.buttons).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values(U.knobs).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Teclas:"})," ",Object.values(U.teclas).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Faders:"})," ",Object.values(U.faders).join(", ")||"Por defecto"]})]})]})]}),e.jsx("div",{className:"flex flex-col gap-4 mt-6 w-full",children:e.jsx("button",{onClick:()=>J(!1),className:"w-full py-3 rounded-lg bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold text-lg shadow-[0_0_12px_2px_#ff00ff80] hover:scale-105 transition-all mt-2",children:"Seguir Personalizando"})})]})})]})]})},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:Jr},Symbol.toStringTag,{value:"Module"})),Zr=({className:t="",style:o={}})=>{const[a,n]=E.useState(!1),[i]=E.useState(Date.now());return E.useEffect(()=>{const e=setTimeout(()=>{n(!0)},3e3);return()=>clearTimeout(e)},[]),e.jsxs("div",{className:t,style:o,children:[e.jsx(Xr,{isVisible:!a}),e.jsx("div",{style:{width:"100%",height:"100%",opacity:a?1:0,transition:"opacity 0.8s ease-in-out"},children:e.jsx(Jr,{})})]})},el=Object.freeze(Object.defineProperty({__proto__:null,default:Zr},Symbol.toStringTag,{value:"Module"})),tl=({isVisible:t})=>{const[o,a]=E.useState(0),[n]=E.useState(Date.now());return E.useEffect(()=>{if(t){const e=setInterval(()=>{const e=Date.now()-n,t=Math.min(e/3e3*100,100);a(t)},50);return()=>clearInterval(e)}a(0)},[t,n]),e.jsx(_,{children:t&&e.jsxs(F.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1.2,ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999,color:"white",fontFamily:"Arial, sans-serif"},children:[e.jsx(F.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},style:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px",color:"#9B59B6",textShadow:"0 0 20px #9B59B6, 0 0 40px #8E44AD"},children:"KNOBO"}),e.jsx(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8,ease:"easeOut"},style:{fontSize:"18px",fontWeight:"bold",marginBottom:"40px",color:"#ffffff",textShadow:"0 0 10px #ffffff"},children:"CONTROLADOR DE KNOBS"}),e.jsx(F.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{width:"100px",height:"100px",border:"6px solid rgba(155, 89, 182, 0.1)",borderTop:"6px solid #9B59B6",borderRadius:"50%",marginBottom:"40px",boxShadow:"0 0 30px rgba(155, 89, 182, 0.4)"}}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},style:{fontSize:"20px",fontWeight:"bold",textAlign:"center",marginBottom:"20px",color:"#9B59B6"},children:["Cargando KNOBO... ",Math.round(o),"%"]}),o>=100&&e.jsx(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},style:{fontSize:"18px",color:"#E74C3C",fontWeight:"bold",marginBottom:"30px",textShadow:"0 0 10px #E74C3C"},children:"¡KNOBO listo para configurar!"}),e.jsx(F.div,{style:{width:"400px",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"40px"},children:e.jsx(F.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.1,ease:"linear"},style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #9B59B6, #8E44AD, #9B59B6)",borderRadius:"4px",boxShadow:"0 0 15px rgba(155, 89, 182, 0.6)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),e.jsx(F.div,{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[0,1,2].map(t=>e.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeInOut"},style:{width:"12px",height:"12px",backgroundColor:"#9B59B6",borderRadius:"50%",boxShadow:"0 0 10px rgba(155, 89, 182, 0.6)"}},t))}),e.jsx("style",{children:"\n            @keyframes shimmer {\n              0% { background-position: -200% 0; }\n              100% { background-position: 200% 0; }\n            }\n          "})]})})},ol=({onProductChange:t})=>{const[v,w]=E.useState(""),[C,k]=E.useState(""),j=E.useRef(null),S=E.useRef(null),_=E.useRef(null),F=E.useRef(null),z=E.useRef(null),L=E.useRef(null),T=E.useRef(null),[D,A]=E.useState("normal"),[B,$]=E.useState(null),[U,V]=E.useState(()=>{const e=localStorage.getItem("knobo_chosenColors");if(e)try{return JSON.parse(e)}catch(Cl){}return{type:"configUpdate",chasis:"Gris",buttons:{},knobs:{}}}),[H,W]=E.useState({chasis:[],buttons:[],knobs:[]}),[G,q]=E.useState(!1),[K,Y]=E.useState(null),[X,J]=E.useState(!1),Q=E.useRef(D),[Z,ee]=E.useState([]),[te,oe]=E.useState([]),ae={chasis:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},buttons:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},knobs:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}}},ne={normal:{pos:new h(2,1,-.1),target:new h(0,-.5,-.1)},top:{pos:new h(1,1.65,-.4),target:new h(-.35,-.9,-.4)}},ie=E.useRef(null),se=E.useRef(null);E.useCallback(()=>{const e={productId:"3d58a487-8b74-2a0b-7e04-43fca04e5333",quantity:1,options:{choices:{"Tipo de Configuración":"Paquete Pro"},customTextFields:[{title:"Especificaciones",value:`Chasis: ${U.chasis}, Botones: ${Object.values(U.buttons).join(", ")}, Knobs: ${Object.values(U.knobs).join(", ")}`}]}};window.parent&&window.parent.postMessage(e,"*"),q(!1),J(!0)},[U]);const re=E.useCallback(()=>{window.parent&&window.parent.postMessage(U,"*")},[U]),[le,ce]=E.useState(null);E.useEffect(()=>{(new a).load("public/textures/blackhole.jpg.avif",e=>{e.mapping=n,ce(e)})},[]);const de=E.useCallback((e,t)=>{const o=new i(16777215,.9);e.add(o);const a=new s(16777215,1.2);a.position.set(5,4,-1),a.castShadow=!0,a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.camera.near=.5,a.shadow.camera.far=50,a.shadow.normalBias=.02,e.add(a);const n=new s(10079487,1);n.position.set(-8,3,-9),e.add(n);const l=new s(10079487,1);l.position.set(-8,3,15),e.add(l);const c=new r(16777215,.7,.5);c.position.set(0,5,5),e.add(c);const d=new s(16777215,1.2);d.position.set(-5,30,0),d.castShadow=!0,d.shadow.mapSize.width=2048,d.shadow.mapSize.height=2048,d.shadow.camera.near=.5,d.shadow.camera.far=50,d.shadow.normalBias=.02,e.add(d)},[]),ue=E.useCallback(e=>{const t={chasis:[],buttons:[],knobs:[]},o={type:"configUpdate",chasis:"Azul",buttons:{},knobs:{}};e.traverse(e=>{var a;if(!(e instanceof l))return;e.castShadow=!0,e.receiveShadow=!0;const n="string"==typeof e.name?e.name.toLowerCase():"";if((n.includes("logo")||n.includes("beato")||n.includes("knobo02")||n.includes("knobo-02")||n.includes("crearttech")||n.includes("custom midi"))&&e.material&&"map"in e.material&&e.material.map&&(e.material.transparent=!0,e.material.alphaTest=.9),n.includes("cubechasis"))e.material=new d({color:ae.chasis.Gris.hex,metalness:1,roughness:.6}),t.chasis.push(e),o.chasis="Gris";else if(n.includes("boton")){const a="Negro";e.material=new c({color:ae.buttons[a].hex,metalness:.4,roughness:.68,clearcoat:.85,clearcoatRoughness:.08,reflectivity:.3,sheen:.5,sheenColor:1842204}),t.buttons.push(e),o.buttons[e.name]=a}else if(n.includes("aro"))e.material=new c({color:0,metalness:0,roughness:.2,clearcoat:.8,clearcoatRoughness:.1,reflectivity:.5,transmission:.3,thickness:.5,ior:1.4,attenuationDistance:1,attenuationColor:16777215,transparent:!0,opacity:.7}),t.buttons.push(e),o.buttons[e.name]="Negro";else if(n.includes("knob")&&!n.includes("knobo-02")&&(null==(a=e.material)?void 0:a.color)){const a=e.material;if((a.color.r+a.color.g+a.color.b)/3<.5){const a="Negro";e.material=new d({color:ae.knobs[a].hex,metalness:0,roughness:1}),t.knobs.push(e),o.knobs[e.name]=a}else e.material=new d({color:16777215})}}),W(t),V(o)},[le]),he=E.useCallback(e=>{const t=(new u).setFromObject(e),o=t.getSize(new h),a=t.getCenter(new h),n=1.8/Math.max(o.x,o.y,o.z);e.scale.set(n,n,n),e.position.copy(a).multiplyScalar(-n),e.position.y-=o.y/2*n},[]),pe=E.useCallback(async()=>{try{const{GLTFLoader:e}=await o(async()=>{const{GLTFLoader:e}=await import("./GLTFLoader-L0pBLRUW.js");return{GLTFLoader:e}},__vite__mapDeps([7,1,2]));(new e).load("./models/knobo2.glb",e=>{var t;const o=e.scene;L.current=o,ue(o),he(o),null==(t=S.current)||t.add(o),T.current||(T.current=o.position.clone());o.traverse(e=>{e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&e.material&&"color"in e.material&&e.material.color.setHex(1842204),e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&(e.material=e.material.clone())})},void 0,e=>{})}catch(e){}},[ue,he]);E.useEffect(()=>{if(!j.current)return;const e=new p;e.background=null,S.current=e;const t=new m({antialias:!0,alpha:!0,preserveDrawingBuffer:!0});t.setSize(j.current.clientWidth,j.current.clientHeight),t.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.outputColorSpace=f,t.shadowMap.enabled=!0,t.shadowMap.type=x,_.current=t,j.current.appendChild(t.domElement);const a=new g(45,j.current.clientWidth/j.current.clientHeight,.1,200);let n;a.position.copy(ne.normal.pos),F.current=a,o(async()=>{const{OrbitControls:e}=await import("./OrbitControls-DFclDx1A.js");return{OrbitControls:e}},__vite__mapDeps([8,1,2])).then(({OrbitControls:e})=>{const o=new e(a,t.domElement);o.target.copy(ne.normal.target),o.enableDamping=!0,o.minDistance=2,o.maxDistance=5,z.current=o}),de(e,t),pe();const i=()=>{n=requestAnimationFrame(i),z.current&&z.current.update(),t.render(e,a)};return i(),()=>{n&&cancelAnimationFrame(n),j.current&&t.domElement&&j.current.removeChild(t.domElement),t.dispose()}},[de,pe]),E.useEffect(()=>{const e=()=>{if(j.current&&F.current&&_.current){const e=j.current.clientWidth,t=j.current.clientHeight;F.current.aspect=e/t,F.current.updateProjectionMatrix(),_.current.setSize(e,t)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),E.useEffect(()=>{localStorage.setItem("knobo_currentView",D)},[D]),E.useEffect(()=>{localStorage.setItem("knobo_chosenColors",JSON.stringify(U))},[U]),E.useEffect(()=>{if(H.chasis.length>0||H.buttons.length>0||H.knobs.length>0){if(U.chasis&&ae.chasis[U.chasis]){const e=ae.chasis[U.chasis].hex;H.chasis.forEach(t=>{t.material&&"color"in t.material&&t.material.color.setHex(parseInt(e.replace("#",""),16))})}Object.entries(U.buttons).forEach(([e,t])=>{if(ae.buttons[t]){const o=ae.buttons[t].hex,a=H.buttons.find(t=>t.name===e);a&&a.material&&"color"in a.material&&a.material.color.setHex(parseInt(o.replace("#",""),16))}}),Object.entries(U.knobs).forEach(([e,t])=>{if(ae.knobs[t]){const o=ae.knobs[t].hex,a=H.knobs.find(t=>t.name===e);a&&a.material&&"color"in a.material&&a.material.color.setHex(parseInt(o.replace("#",""),16))}})}},[H,U]),E.useCallback(()=>{localStorage.removeItem("knobo_currentView"),localStorage.removeItem("knobo_chosenColors"),A("normal"),V({type:"configUpdate",chasis:"Gris",buttons:{},knobs:{}}),ee([]),oe([]),$(null),N.fire({title:"Configuración reseteada",text:"Todas las configuraciones han sido restauradas a los valores por defecto",icon:"success",confirmButtonText:"OK"})},[]);const me=E.useCallback((e,t=0)=>{var o;e&&(null==(o=e.material)?void 0:o.emissive)&&e.material.emissive.setHex(t)},[]),fe=E.useCallback(e=>{var t;if(!F.current||!_.current)return;if("chasis"===D)return $(null),void ee([]);const o=new b,a=new y,n=_.current.domElement.getBoundingClientRect();a.x=(e.clientX-n.left)/n.width*2-1,a.y=-(e.clientY-n.top)/n.height*2+1,o.setFromCamera(a,F.current);let i=[];if("buttons"===D?i=H.buttons:"knobs"===D?i=H.knobs:"normal"===D&&(i=H.buttons),0===i.length)return;const s=o.intersectObjects(i,!1);if("buttons"===D&&H.buttons.forEach(e=>me(e,0)),B&&"normal"!==D&&me(B,0),s.length>0){const o=s[0].object;if("normal"===D)return;if("buttons"===D&&e.shiftKey)0===Z.length&&B&&B!==o?(ee([B,o]),$(null),me(B,4473924),me(o,4473924)):($(null),ee(e=>{if(0===e.length)return me(o,4473924),[o];let t;return e.includes(o)?(t=e.filter(e=>e!==o),me(o,0)):(t=[...e,o],me(o,4473924)),t.forEach(e=>me(e,4473924)),t}));else if(ee([]),"buttons"===D&&o.name.toLowerCase().includes("aro")){const e=parseInt((null==(t=o.name.match(/\d+/))?void 0:t[0])||"1",10),a=H.buttons.find(t=>t.name.toLowerCase().includes("boton")&&t.name.includes(e.toString()));if(!a)return void $(null);$(a),me(a,4473924)}else $(o),me(o,4473924)}else $(null),ee([])},[D,H,B,me,Z]),xe=E.useCallback(e=>{var t;if(!L.current)return null;let o=null;const a=null==(t=e.match(/\d+/))?void 0:t[0];return a?(L.current.traverse(e=>{var t;if(e instanceof l&&e.name.toLowerCase().includes("aro")){(null==(t=e.name.match(/\d+/))?void 0:t[0])===a&&(o=e)}}),o):null},[]),ge=E.useCallback(e=>{if(A(e),"chasis"===e&&H.chasis.length>0?$(H.chasis[0]):$(null),!F.current||!z.current)return;let t,o;"normal"===e?(t=ne.normal,o=!0):(t=ne.top,o=!1),z.current.enabled=o,O.to(F.current.position,{duration:1.2,ease:"power3.inOut",...t.pos}),O.to(z.current.target,{duration:1.2,ease:"power3.inOut",...t.target,onUpdate:()=>z.current.update()})},[H]),be=E.useCallback((e,t)=>{if("chasis"===D)return H.chasis.forEach(e=>{e.material.color.set(t.hex)}),void V(t=>({...t,chasis:e}));if("buttons"===D&&Z.length>0){const o={...U,buttons:{...U.buttons}};return Z.forEach(a=>{a.material.color.set(t.hex),o.buttons[a.name]=e;const n=xe(a.name);n&&n.material&&n.material.color.set(t.hex)}),V(o),Z.forEach(e=>me(e,0)),void ee([])}if("knobs"===D&&te.length>0){const o={...U,knobs:{...U.knobs}};return te.forEach(a=>{a.material.color.set(t.hex),o.knobs[a.name]=e}),V(o),te.forEach(e=>me(e,0)),void oe([])}if(!B)return void N.fire({title:"Selecciona una parte",text:"Haz clic en una pieza del controlador para aplicar el color.",imageUrl:"models/logo.png",imageWidth:120,imageHeight:120,background:"#232846",color:"#fff",confirmButtonColor:"#a259ff",confirmButtonText:"Entendido"});B.material.color.set(t.hex);const o={...U},a=B.name;if(H.buttons.includes(B)){if(o.buttons[a]=e,a.toLowerCase().includes("boton")){const e=xe(a);e&&e.material&&e.material.color.set(t.hex)}me(B,0)}else H.knobs.includes(B)&&(o.knobs[a]=e);V(o)},[B,Z,U,H,D,xe,te]),ye=E.useCallback(()=>{if(!_.current||!S.current||!F.current)return;const e=F.current.position.clone(),t=z.current?z.current.target.clone():null,o=F.current.fov,a=ne.normal.pos.clone(),n=ne.normal.target.clone();F.current.position.copy(a),F.current.fov=35,F.current.updateProjectionMatrix(),z.current&&(z.current.target.copy(n),z.current.update()),setTimeout(()=>{_.current.render(S.current,F.current);const a=_.current.domElement.toDataURL("image/png");Y(a),F.current.position.copy(e),F.current.fov=o,F.current.updateProjectionMatrix(),z.current&&t&&(z.current.target.copy(t),z.current.update()),q(!0)},50)},[_,S,F,z,ne,Y,q]);E.useEffect(()=>{re()},[re]),E.useEffect(()=>{Q.current=D},[D]),E.useEffect(()=>{setTimeout(()=>{F.current&&z.current&&(ie.current=F.current.position.clone(),se.current=z.current.target.clone())},100)},[]);const[ve,we]=E.useState("USD"),[Ce,ke]=E.useState({referenceCode:`knobo_${Date.now()}`,amount:"100.00",currency:"USD",signature:"",description:"Configurador Knobo",buyerEmail:"cliente@correo.com"});E.useEffect(()=>{const e=Ur(ve);ke(t=>({...t,amount:e.amount,currency:ve,description:`Configurador Knobo - ${ve} ${e.symbol}${e.amount}`}))},[ve]),E.useEffect(()=>{if(X||G){const e=`knobo-${Date.now()}`;ke(t=>({...t,referenceCode:e}))}},[X,G]);const[je,Ee]=E.useState([]);return e.jsxs(I,{options:{clientId:"sb",currency:"USD"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,backgroundImage:"url(/textures/fondo.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}),e.jsxs("div",{className:"w-full h-screen text-gray-200 overflow-hidden relative",style:{background:"transparent"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"transparent"}}),e.jsx(R,{id:"tsparticles",init:async e=>{await Dr(e)},options:{fullScreen:{enable:!1},background:{color:{value:"transparent"}},fpsLimit:60,particles:{color:{value:"#a259ff"},links:{enable:!0,color:"#a259ff",distance:120},move:{enable:!0,speed:1},number:{value:50},opacity:{value:.5},shape:{type:"circle"},size:{value:3}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}},modes:{repulse:{distance:100,duration:.4}}}},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",top:16,left:6,zIndex:51,display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("button",{className:"px-5 py-2 bg-purple-400 text-black border border-purple-400 rounded font-bold text-sm uppercase tracking-wide transition-all duration-200 hover:bg-yellow-200 hover:border-yellow-200 hover:-translate-y-0.5 hover:shadow-lg shadow-[0_0_8px_2px_#a259ff80,0_0_16px_4px_#0ff5]",onClick:()=>window.location.href="https://www.crearttech.com/",children:"Inicio"})}),e.jsxs("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-3",children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}),e.jsx("h1",{className:"text-2xl font-bold leading-none m-0",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #fff",letterSpacing:"0.04em"},children:"KNOBO"})]}),e.jsx("main",{className:"flex w-full h-full",style:{minHeight:"100vh",height:"100vh",position:"relative",zIndex:1,overflow:"hidden",background:"transparent"},children:e.jsx("div",{className:"flex-grow h-full",style:{position:"relative",zIndex:1,background:"transparent"},children:e.jsx("div",{ref:j,className:"w-full h-full transition-all duration-300",onClick:fe,style:{position:"relative",zIndex:1}})})}),e.jsxs("div",{className:"fixed top-0 right-0 h-screen border-l border-gray-700 shadow-2xl transition-all duration-400 flex overflow-hidden z-10 "+("normal"===D?"w-28":"w-[320px]"),style:{backgroundColor:"rgba(255, 255, 0, 0.8)",background:"linear-gradient(135deg, rgba(0, 0, 0, 0.2) 0%, rgba(26, 26, 26, 0.2) 25%, rgba(10, 10, 10, 0.2) 50%, rgba(26, 26, 26, 0.2) 75%, rgba(0, 0, 0, 0.2) 100%)",boxShadow:"0 0 16px 2px rgba(0, 255, 255, 0.4), -6px 0 16px 0 rgba(0, 255, 255, 0.3), inset 0 0 10px rgba(0,0,0,0.8)",borderLeft:"2px solid rgba(0, 255, 255, 0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[e.jsx("div",{className:"w-28 p-4 flex-shrink-0",style:{paddingTop:"140px"},children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[[{id:"normal",icon:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5M12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17M12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",title:"Vista General"},{id:"chasis",icon:"knobo.png",title:"Chasis",isImage:!0},{id:"knobs",icon:"M9.42 4.074a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56M11.554 8.8a.5.5 0 0 1 0 .707l-1.78 1.78a.5.5 0 1 1-.708-.707l1.78-1.78a.5.5 0 0 1 .708 0 M9.42 15.444c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.03 1.32-3.19 1.32m0-1.1a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82M6.757 5.2a.56.56 0 1 0-.965.567l.465.809l.005.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm5.315.012a.55.55 0 0 1 .761-.206c.277.152.36.5.203.764l-.458.797a.56.56 0 0 1-.478.277a.564.564 0 0 1-.487-.834zm7.598 5.722a.5.5 0 0 1 .5-.5h2.52a.5.5 0 1 1 0 1h-2.52a.5.5 0 0 1-.5-.5 M22.69 15.454c2.49 0 4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52s2.03 4.52 4.52 4.52m0-1.11a3.41 3.41 0 1 1 0-6.82a3.41 3.41 0 0 1 0 6.82m-.56-9.7c0-.308.252-.56.56-.56s.56.252.56.56v.945a.566.566 0 0 1-.56.535a.56.56 0 0 1-.56-.56zm-2.103.566a.557.557 0 0 0-.763-.202a.566.566 0 0 0-.204.753l.468.815l.004.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm6.086-.204a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759a.5.5 0 0 0 .282.077a.6.6 0 0 0 .478-.261l.005-.007l.463-.805a.55.55 0 0 0-.203-.764 M11.93 22.636H9.42a.5.5 0 0 0 0 1h2.51a.5.5 0 1 0 0-1 M4.9 23.136c0 2.49 2.03 4.52 4.52 4.52s4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52m7.93 0a3.41 3.41 0 1 1-6.82 0a3.41 3.41 0 0 1 6.82 0m-3.41-6.86a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56m-3.418.93a.566.566 0 0 1 .755.206l.464.807c.137.258.06.6-.205.753a.53.53 0 0 1-.276.074a.58.58 0 0 1-.478-.261l-.005-.007l-.468-.814a.566.566 0 0 1 .207-.755zm6.08.209a.55.55 0 0 1 .761-.206c.277.151.36.499.203.764l-.462.802a.567.567 0 0 1-.766.194a.55.55 0 0 1-.194-.76zm8.475 3.588a.5.5 0 0 1 .707 0l1.78 1.78a.5.5 0 0 1-.707.707l-1.78-1.78a.5.5 0 0 1 0-.707 M22.69 27.656c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.04 1.32-3.19 1.32m0-1.11a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82 M22.13 16.836c0-.308.252-.56.56-.56s.56.252.56.56v.945a.57.57 0 0 1-.56.545a.56.56 0 0 1-.56-.56zm-2.103.576a.566.566 0 0 0-.755-.206l-.006.003a.565.565 0 0 0-.206.755l.468.814l.004.007a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.074a.566.566 0 0 0 .205-.753zm6.086-.203a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759a.5.5 0 0 0 .282.077a.6.6 0 0 0 .478-.261l.005-.007l.463-.805a.55.55 0 0 0-.203-.764 M1 5.75A4.75 4.75 0 0 1 5.75 1h20.52a4.75 4.75 0 0 1 4.75 4.75v20.48a4.75 4.75 0 0 1-4.75 4.75H5.75A4.75 4.75 0 0 1 1 26.23zM5.75 3A2.75 2.75 0 0 0 3 5.75v20.48a2.75 2.75 0 0 0 2.75 2.75h20.52a2.75 2.75 0 0 0 2.75-2.75V5.75A2.75 2.75 0 0 0 26.27 3z",title:"Knobs"}].map(({id:t,icon:o,title:a,isImage:n})=>e.jsx("button",{onClick:"faders"===t?void 0:()=>ge(t),className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white relative "+(D===t?"bg-gradient-to-br from-[#00FFFF] to-[#0080FF] border-[#00FFFF] shadow-lg":"border-[#00FFFF] bg-gradient-to-br from-[#000000] to-[#1a1a1a] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg"),title:a,disabled:"faders"===t,style:"faders"===t?{cursor:"not-allowed"}:{},children:n?e.jsx("img",{src:`textures/${o}`,alt:a,className:"w-full h-full mx-auto my-auto object-contain",style:{},onError:e=>{}}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"knobs"===t?"0 0 32 32":"faders"===t?"0 0 256 256":"0 0 24 24",className:"w-4/5 h-4/5 mx-auto my-auto fill-white text-white",fill:"#fff",children:e.jsx("path",{d:o})})},t)),e.jsx("input",{id:"sidebar-upload",type:"file",accept:"image/*,application/pdf",multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&Ee(Array.from(e.target.files))}}),e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=document.getElementById("sidebar-upload"))?void 0:e.click()},className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white bg-gradient-to-br from-[#000000] to-[#1a1a1a] border-[#00FFFF] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg",title:"Subir archivos de personalización",children:e.jsx("svg",{width:"28",height:"28",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 16V4m0 0l-4 4m4-4l4 4M4 20h16",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),je.length>0&&e.jsxs("span",{className:"text-xs text-white mt-2",children:["Archivos: ",je.map(e=>e.name).join(", ")]})]})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col",children:[e.jsx("div",{className:"flex items-center pb-5 border-b border-gray-600 pl-0 "+("normal"===D?"justify-center items-center gap-0":"justify-center gap-2"),style:"normal"===D?{minHeight:"48px"}:{},children:"normal"===D?e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-6 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}),e.jsx("h2",{className:"m-0 font-bold tracking-widest text-xl md:text-3xl whitespace-normal break-words text-left",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #fff",letterSpacing:"0.04em",marginLeft:"-0.25em",overflowWrap:"anywhere"},children:"KNOBO"})]})}),e.jsxs("div",{className:"mt-6 animate-fadeIn",children:[e.jsx("p",{className:"font-black text-sm tracking-wide uppercase m-0 mb-3 text-gray-200 text-left animate-fadeIn",children:(()=>{switch(D){case"chasis":return"ELIGE EL COLOR DEL CHASIS";case"buttons":return"PERSONALIZA LOS BOTONES";case"knobs":return"PERSONALIZA LOS KNOBS";default:return"ELIGE UN COLOR"}})()}),e.jsx("div",{className:"grid grid-cols-2 gap-x-0 gap-y-0 p-0 justify-items-end ml-auto animate-scaleIn",children:Object.entries((()=>{switch(D){case"chasis":return ae.chasis;case"buttons":return ae.buttons;case"knobs":return ae.knobs;default:return{}}})()).map(([t,o],a)=>e.jsx("div",{className:"w-10 h-10 rounded-full cursor-pointer border border-[#a259ff] shadow-[0_0_6px_1px_#a259ff55] transition-all duration-200 hover:scale-110 animate-fadeInUp",style:{backgroundColor:o.hex,animationDelay:50*a+"ms"},title:t,onClick:()=>be(t,o)},t))})]})]})]}),"normal"===D&&e.jsx("button",{onClick:ye,className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 text-lg font-bold uppercase tracking-wide text-black bg-purple-400 border-none rounded cursor-pointer transition-all duration-200 shadow-lg hover:bg-yellow-200 hover:scale-105 hover:shadow-xl shadow-[0_0_8px_2px_#a259ff80,0_0_16px_4px_#0ff5]",children:"AÑADIR AL CARRITO"}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#3a4060] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-4 md:py-4 md:px-8 w-full max-w-4xl mx-4 animate-fade-in",children:[e.jsx("button",{onClick:()=>q(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"PAGO SEGURO - KNOBO"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[e.jsx("div",{className:"w-full max-w-[320px] md:max-w-[380px] aspect-[4/3] flex items-center justify-center ml-16 md:ml-24",children:K&&e.jsx("img",{src:K,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-8 md:mt-0",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"Tu configuración:"}),e.jsxs("ul",{className:"text-base space-y-1",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",U.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Botones:"})," ",Object.values(U.buttons).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values(U.knobs).join(", ")||"Por defecto"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:"Selecciona tu moneda:"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>we("USD"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("USD"===ve?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"USD $100.00"}),e.jsx("button",{onClick:()=>we("COP"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("COP"===ve?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"COP $400,000"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-2",children:["Precio seleccionado: ",ve," ",Ur(ve).symbol,Ur(ve).amount]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("div",{className:"w-full py-3 rounded-lg bg-gray-600 text-gray-400 font-bold text-lg text-center",children:"PayPal temporalmente no disponible"}),e.jsxs("button",{onClick:()=>{const e="payu_checkout";if(!window.open("",e))return void alert("Por favor, permite popups para continuar con el pago");const t=Ur(ve),o=`${Ar.API_KEY}~${Ar.MERCHANT_ID}~${Ce.referenceCode}~${t.amount}~${ve}`,a=M(o).toString(),n=document.createElement("form");n.method="POST",n.action=t.url,n.target=e;const i={merchantId:Ar.MERCHANT_ID,accountId:t.accountId,description:`Configurador Knobo - ${ve} ${t.symbol}${t.amount}`,referenceCode:Ce.referenceCode,amount:t.amount,currency:ve,buyerEmail:Ce.buyerEmail,signature:a,test:"1",confirmationUrl:Ar.CONFIRMATION_URL,responseUrl:Ar.RESPONSE_URL,lng:t.language,extra1:"Knobo",extra2:U.chasis||"Personalizado",extra3:`Colores aplicados - Botones: ${Object.keys(U.buttons||{}).length}, Knobs: ${Object.keys(U.knobs||{}).length}`,extra4:`Configurador Knobo - ${ve} ${t.symbol}${t.amount}`,payerCountry:"CO",payerCity:"Bogota",payerPhone:"+57-300-1234567",country:"CO",ipAddress:"8.8.4.4"};Object.entries(i).forEach(([e,t])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,n.appendChild(o)}),document.body.appendChild(n),n.submit(),document.body.removeChild(n)},className:"w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-cyan-400 text-white font-bold text-lg shadow-[0_0_12px_2px_#0ff580] hover:scale-105 transition-all mt-2",children:["Pagar con PayU (",ve," ",Ur(ve).symbol,Ur(ve).amount,")"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:"Tu compra es 100% segura y protegida."})]})}),X&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#232846] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-6 w-full max-w-2xl mx-4 animate-fade-in flex flex-col items-center",children:[e.jsx("button",{onClick:()=>J(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"Carrito"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center w-full",children:[e.jsx("div",{className:"w-full max-w-[220px] aspect-[4/3] flex items-center justify-center",children:K&&e.jsx("img",{src:K,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-4 md:mt-0 w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-cyan-400",children:"Tu producto:"}),e.jsxs("ul",{className:"text-base space-y-1 mb-2",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",U.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Botones:"})," ",Object.values(U.buttons).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values(U.knobs).join(", ")||"Por defecto"]})]}),e.jsxs("div",{className:"text-xl font-bold text-green-300 mb-2",children:["$",Ce.amount," USD"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-6 w-full",children:[e.jsx(P,{style:{layout:"horizontal",color:"blue",shape:"rect",label:"paypal",height:48},createOrder:(e,t)=>t.order?t.order.create({intent:"CAPTURE",purchase_units:[{amount:{value:Ce.amount||"185.00",currency_code:"USD"},description:"Controlador MIDI personalizado"}]}):Promise.reject("PayPal actions.order no disponible"),onApprove:async(e,t)=>{var o;if(t&&t.order){const n=await t.order.capture(),i=(null==(o=null==n?void 0:n.payer)?void 0:o.email_address)||"";try{await fetch("http://localhost:4000/api/paypal-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({colors:U,screenshot:K,paypalOrderId:e.orderID,buyerEmail:i})})}catch(a){alert("Error guardando configuración personalizada en backend: "+a)}alert("¡Pago realizado con PayPal!"),q(!1),J(!0)}},onError:e=>{alert("Error en el pago con PayPal: "+e)}}),e.jsxs("form",{action:"https://sandbox.checkout.payulatam.com/ppp-web-gateway-payu/",method:"post",target:"_blank",className:"w-full flex flex-col items-center",children:[e.jsx("input",{type:"hidden",name:"merchantId",value:"508029"}),e.jsx("input",{type:"hidden",name:"accountId",value:"512321"}),e.jsx("input",{type:"hidden",name:"description",value:"Controlador MIDI personalizado"}),e.jsx("input",{type:"hidden",name:"referenceCode",value:Ce.referenceCode}),e.jsx("input",{type:"hidden",name:"amount",value:Ce.amount}),e.jsx("input",{type:"hidden",name:"currency",value:Ce.currency}),e.jsx("input",{type:"hidden",name:"signature",value:Ce.signature}),e.jsx("input",{type:"hidden",name:"test",value:"1"}),e.jsx("button",{type:"submit",className:"w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-cyan-400 text-white font-bold text-lg shadow-[0_0_12px_2px_#0ff580] hover:scale-105 transition-all mt-2",children:"Pagar con PayU"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:"Tu compra es 100% segura y protegida."})]})})]})]})},al=Object.freeze(Object.defineProperty({__proto__:null,default:ol},Symbol.toStringTag,{value:"Module"})),nl=({className:t="",style:o={}})=>{const[a,n]=E.useState(!1),[i]=E.useState(Date.now());return E.useEffect(()=>{const e=setTimeout(()=>{n(!0)},3e3);return()=>clearTimeout(e)},[]),e.jsxs("div",{className:t,style:o,children:[e.jsx(tl,{isVisible:!a}),e.jsx("div",{style:{width:"100%",height:"100%",opacity:a?1:0,transition:"opacity 0.8s ease-in-out"},children:e.jsx(ol,{})})]})},il=Object.freeze(Object.defineProperty({__proto__:null,default:nl},Symbol.toStringTag,{value:"Module"})),sl=({isVisible:t})=>{const[o,a]=E.useState(0),[n]=E.useState(Date.now());return E.useEffect(()=>{if(t){const e=setInterval(()=>{const e=Date.now()-n,t=Math.min(e/3e3*100,100);a(t)},50);return()=>clearInterval(e)}a(0)},[t,n]),e.jsx(_,{children:t&&e.jsxs(F.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1.2,ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999,color:"white",fontFamily:"Arial, sans-serif"},children:[e.jsx(F.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},style:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px",color:"#E67E22",textShadow:"0 0 20px #E67E22, 0 0 40px #D35400"},children:"MIXO"}),e.jsx(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8,ease:"easeOut"},style:{fontSize:"18px",fontWeight:"bold",marginBottom:"40px",color:"#ffffff",textShadow:"0 0 10px #ffffff"},children:"MIXER CON FADERS"}),e.jsx(F.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{width:"100px",height:"100px",border:"6px solid rgba(230, 126, 34, 0.1)",borderTop:"6px solid #E67E22",borderRadius:"50%",marginBottom:"40px",boxShadow:"0 0 30px rgba(230, 126, 34, 0.4)"}}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},style:{fontSize:"20px",fontWeight:"bold",textAlign:"center",marginBottom:"20px",color:"#E67E22"},children:["Cargando MIXO... ",Math.round(o),"%"]}),o>=100&&e.jsx(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},style:{fontSize:"18px",color:"#F39C12",fontWeight:"bold",marginBottom:"30px",textShadow:"0 0 10px #F39C12"},children:"¡MIXO listo para configurar!"}),e.jsx(F.div,{style:{width:"400px",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"40px"},children:e.jsx(F.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.1,ease:"linear"},style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #E67E22, #D35400, #E67E22)",borderRadius:"4px",boxShadow:"0 0 15px rgba(230, 126, 34, 0.6)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),e.jsx(F.div,{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[0,1,2].map(t=>e.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeInOut"},style:{width:"12px",height:"12px",backgroundColor:"#E67E22",borderRadius:"50%",boxShadow:"0 0 10px rgba(230, 126, 34, 0.6)"}},t))}),e.jsx("style",{children:"\n            @keyframes shimmer {\n              0% { background-position: -200% 0; }\n              100% { background-position: 200% 0; }\n            }\n          "})]})})},rl=({onProductChange:t})=>{const[x,w]=E.useState(""),[C,k]=E.useState(""),j=E.useRef(null),S=E.useRef(null),_=E.useRef(null),F=E.useRef(null),z=E.useRef(null),P=E.useRef(null),L=E.useRef(null),[T,D]=E.useState("normal"),[A,B]=E.useState(null),[$,U]=E.useState(()=>{const e=localStorage.getItem("mixo_chosenColors");if(e)try{return JSON.parse(e)}catch(Cl){}return{type:"configUpdate",chasis:"Gris",buttons:{},knobs:{},faders:{}}}),[V,H]=E.useState({chasis:[],buttons:[],knobs:[],faders:[]}),[W,G]=E.useState(!1),[q,K]=E.useState(null),Y=E.useRef(T),[X,J]=E.useState([]),[Q,Z]=E.useState([]),[ee,te]=E.useState([]),[oe,ae]=E.useState(!1),[ne,ie]=E.useState(!1),[se,re]=E.useState(!1),[le,ce]=E.useState({x:0,y:0}),de={chasis:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},buttons:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},knobs:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},faders:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}}},ue={normal:{pos:new h(2,1,-.1),target:new h(0,-.5,-.1)},top:{pos:new h(1,1.95,-.4),target:new h(-.35,-1.4,-.4)}},he=E.useCallback(()=>{var e,t,o;const a=null==(e=F.current)?void 0:e.position.clone(),n=null==(t=z.current)?void 0:t.target.clone(),i=null==(o=F.current)?void 0:o.fov,s=ue.normal.pos.clone(),r=ue.normal.target.clone();F.current.position.copy(s),F.current.fov=35,F.current.updateProjectionMatrix(),z.current&&(z.current.target.copy(r),z.current.update()),setTimeout(()=>{_.current.render(S.current,F.current);const e=_.current.domElement.toDataURL("image/png");K(e),F.current.position.copy(a),F.current.fov=i,F.current.updateProjectionMatrix(),z.current&&n&&(z.current.target.copy(n),z.current.update()),G(!0)},50)},[_,S,F,z,ue,K,G]),pe=E.useRef(null),me=E.useRef(null);E.useEffect(()=>{localStorage.setItem("mixo_currentView",T)},[T]),E.useEffect(()=>{localStorage.setItem("mixo_chosenColors",JSON.stringify($))},[$]),E.useEffect(()=>{G(!1)},[]),E.useEffect(()=>{},[W]);const[fe,xe]=E.useState(null);E.useEffect(()=>{(new a).load("public/textures/blackhole.jpg.avif",e=>{e.mapping=n,xe(e)})},[]);const ge=E.useCallback((e,t)=>{const o=new i(16777215,.9);e.add(o);const a=new s(16777215,1.2);a.position.set(5,4,-1),a.castShadow=!0,e.add(a);const n=new s(10079487,1);n.position.set(-8,3,-9),e.add(n);const l=new s(10079487,1);l.position.set(-8,3,15),e.add(l);const c=new r(16777215,.7,.5);c.position.set(0,5,5),e.add(c);const d=new s(16777215,1.2);d.position.set(-5,30,0),d.castShadow=!0,e.add(d)},[]),be=E.useCallback(e=>{const t=(new u).setFromObject(e),o=t.getSize(new h),a=t.getCenter(new h),n=1.8/Math.max(o.x,o.y,o.z);e.scale.set(n,n,n),e.position.copy(a).multiplyScalar(-n),e.position.y-=o.y/2*n},[]),ye=E.useCallback(e=>{const t={chasis:[],buttons:[],knobs:[],faders:[]},o={type:"configUpdate",chasis:"Gris",buttons:{},knobs:{},faders:{}};e.traverse(e=>{var a;if(!(e instanceof l))return;e.castShadow=!0,e.receiveShadow=!0;const n="string"==typeof e.name?e.name.toLowerCase():"";if((n.includes("logo")||n.includes("mixo")||n.includes("knobo02")||n.includes("knobo-02")||n.includes("crearttech")||n.includes("custom midi"))&&e.material&&"map"in e.material&&e.material.map&&(e.material.transparent=!0,e.material.alphaTest=.9),n.includes("cubechasis"))e.material=new c({color:de.chasis.Gris.hex,metalness:.8,roughness:.35,clearcoat:.85,clearcoatRoughness:.1}),t.chasis.push(e),o.chasis="Gris";else if(n.includes("boton")){const a="Amarillo";e.material=new c({color:de.buttons[a].hex,metalness:0,roughness:0,clearcoat:1,clearcoatRoughness:0,reflectivity:1,transmission:0,thickness:.3,ior:1.5,attenuationDistance:.5,attenuationColor:16776960,transparent:!1,opacity:1,emissive:16776960,emissiveIntensity:3}),t.buttons.push(e),o.buttons[e.name]=a}else if(n.includes("aro"))e.material=new c({color:0,metalness:0,roughness:.2,clearcoat:.8,clearcoatRoughness:.1,reflectivity:.5,transmission:.3,thickness:.5,ior:1.4,attenuationDistance:1,attenuationColor:16777215,transparent:!0,opacity:.7}),t.buttons.push(e),o.buttons[e.name]="Negro";else if(n.startsWith("knob1_")||n.startsWith("knob2_")||n.startsWith("knob3_")||n.startsWith("knob4_")){if(null==(a=e.material)?void 0:a.color){const a=e.material;if((a.color.r+a.color.g+a.color.b)/3<.5){const a="Negro";e.material=new d({color:de.knobs[a].hex,metalness:0,roughness:1}),t.knobs.push(e),o.knobs[e.name]=a}else e.material=new d({color:16777215})}}else if(n.includes("fader"))if("fader1_1"===n||"fader2_1"===n||"fader3_1"===n||"fader4_1"===n){const a="Negro";e.material=new d({color:de.knobs[a].hex,metalness:0,roughness:1}),t.faders.push(e),o.faders[e.name]=a}else if(e.material){const a=e.material;if(a.color){if((a.color.r+a.color.g+a.color.b)/3<.8){const n="Negro";a.color.setHex(parseInt(de.knobs[n].hex.replace("#",""),16)),t.faders.push(e),o.faders[e.name]=n}}}}),H(t),U(o)},[fe]),ve=E.useCallback(e=>{if(e.material instanceof c){const t=e.material,o=$.buttons[e.name];if(o&&de.buttons[o]){const e=de.buttons[o].hex;t.emissive.setHex(parseInt(e.replace("#",""),16)),t.emissiveIntensity=3}}},[$,de]),we=E.useCallback(async()=>{try{const{GLTFLoader:e}=await o(async()=>{const{GLTFLoader:e}=await import("./GLTFLoader-L0pBLRUW.js");return{GLTFLoader:e}},__vite__mapDeps([7,1,2]));(new e).load("./models/mixo.glb",e=>{var t;const o=e.scene;P.current=o,ye(o),be(o),null==(t=S.current)||t.add(o),L.current||(L.current=o.position.clone());o.traverse(e=>{e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&e.material&&"color"in e.material&&e.material.color.setHex(1842204),e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&(e.material=e.material.clone())})},void 0,e=>{})}catch(e){}},[ye,be]),Ce=E.useCallback((e,t=0)=>{var o;if(e&&(null==(o=e.material)?void 0:o.emissive)){const o=e.material;if(e.name.toLowerCase().includes("boton")&&0===t)return void ve(e);o.emissive.setHex(t),e.name.toLowerCase().includes("boton")?o.emissiveIntensity=3:e.name.toLowerCase().includes("aro")&&(o.emissiveIntensity=.3,o.opacity=.8)}},[ve]),ke=E.useCallback(e=>{var t;if(!S.current||!F.current)return;if("chasis"===T)return B(null),J([]),Z([]),void te([]);const o=null==(t=j.current)?void 0:t.getBoundingClientRect();if(!o)return;const a=new y;a.x=(e.clientX-o.left)/o.width*2-1,a.y=-(e.clientY-o.top)/o.height*2+1;const n=new b;n.setFromCamera(a,F.current);let i=[];if("buttons"===T?i=V.buttons:"knobs"===T?i=V.knobs:"faders"===T?i=V.faders:"normal"===T&&(i=V.buttons),0===i.length)return;const s=n.intersectObjects(i,!1);if("buttons"===T&&V.buttons.forEach(e=>Ce(e,0)),A&&"normal"!==T&&Ce(A,0),s.length>0){const t=s[0].object,o=t.name.toLowerCase();if("normal"===T)return;o.includes("boton")||o.includes("aro")?(Z([]),te([]),e.shiftKey?0===X.length&&A&&A!==t?(J([A,t]),B(null),Ce(A,4473924),Ce(t,4473924)):(B(null),J(e=>{if(0===e.length)return Ce(t,4473924),[t];let o;return e.includes(t)?(o=e.filter(e=>e!==t),Ce(t,0)):(o=[...e,t],Ce(t,4473924)),o.forEach(e=>Ce(e,4473924)),o})):(J([t]),B(t),Ce(t,4473924))):o.startsWith("knob1_")||o.startsWith("knob2_")||o.startsWith("knob3_")||o.startsWith("knob4_")?(J([]),te([]),e.shiftKey?0===Q.length&&A&&A!==t?(Z([A,t]),B(null),Ce(A,4473924),Ce(t,4473924)):(B(null),Z(e=>{if(0===e.length)return Ce(t,4473924),[t];let o;return e.includes(t)?(o=e.filter(e=>e!==t),Ce(t,0)):(o=[...e,t],Ce(t,4473924)),o.forEach(e=>Ce(e,4473924)),o})):(Z([t]),B(t),Ce(t,4473924))):o.startsWith("fader1")||o.startsWith("fader2")||o.startsWith("fader3")||o.startsWith("fader4")?(J([]),Z([]),e.shiftKey?0===ee.length&&A&&A!==t?(te([A,t]),B(null),Ce(A,4473924),Ce(t,4473924)):(B(null),te(e=>{if(0===e.length)return Ce(t,4473924),[t];let o;return e.includes(t)?(o=e.filter(e=>e!==t),Ce(t,0)):(o=[...e,t],Ce(t,4473924)),o.forEach(e=>Ce(e,4473924)),o})):(te([t]),B(t),Ce(t,4473924))):o.includes("cubechasis")&&(J([]),Z([]),te([]),B(t))}},[T,V,A,Ce,X,Q,ee]),je=E.useCallback((e,t)=>{if("chasis"===T)return V.chasis.forEach(e=>{e.material.color.set(t.hex)}),void U(t=>({...t,chasis:e}));if("buttons"===T&&X.length>0){const o={...$,buttons:{...$.buttons}};return X.forEach(a=>{const n=a.material;n.color.set(t.hex),n.emissive.setHex(parseInt(t.hex.replace("#",""),16)),o.buttons[a.name]=e;const i=a.name.replace("boton","aro"),s=V.buttons.find(e=>e.name===i);if(s&&s.material instanceof c){const a=s.material;a.color.setHex(parseInt(t.hex.replace("#",""),16)),a.attenuationColor.setHex(parseInt(t.hex.replace("#",""),16)),o.buttons[i]=e}}),U(o),void J([])}if("knobs"===T&&Q.length>0){const o={...$,knobs:{...$.knobs}};return Q.forEach(a=>{a.material.color.set(t.hex),o.knobs[a.name]=e}),U(o),void Z([])}if("faders"===T&&ee.length>0){const o={...$,faders:{...$.faders}};return ee.forEach(a=>{a.material=new d({color:t.hex,metalness:0,roughness:1}),o.faders[a.name]=e}),U(o),void te([])}if(!A)return void N.fire({title:"Selecciona una parte",text:"Haz clic en una pieza del controlador para aplicar el color.",imageUrl:"models/logo.png",imageWidth:120,imageHeight:120,background:"#232846",color:"#fff",confirmButtonColor:"#a259ff",confirmButtonText:"Entendido"});const o=A.name.toLowerCase(),a=new v(t.hex);if(o.includes("cubechasis"))U(t=>({...t,chasis:e})),A.material instanceof d&&(A.material.color=a);else if(o.includes("boton")){if(U(t=>({...t,buttons:{...t.buttons,[A.name]:e}})),A.material instanceof c){const o=A.material;o.color=a,o.emissive.setHex(parseInt(t.hex.replace("#",""),16));const n=A.name.replace("boton","aro"),i=V.buttons.find(e=>e.name===n);if(i&&i.material instanceof c){const o=i.material;o.color.setHex(parseInt(t.hex.replace("#",""),16)),o.attenuationColor.setHex(parseInt(t.hex.replace("#",""),16)),U(t=>({...t,buttons:{...t.buttons,[n]:e}}))}}}else o.startsWith("knob1_")||o.startsWith("knob2_")||o.startsWith("knob3_")||o.startsWith("knob4_")?(U(t=>({...t,knobs:{...t.knobs,[A.name]:e}})),A.material&&"color"in A.material&&(A.material.color=a,A.material.metalness=0,A.material.roughness=1)):(o.startsWith("fader1")||o.startsWith("fader2")||o.startsWith("fader3")||o.startsWith("fader4"))&&(U(t=>({...t,faders:{...t.faders,[A.name]:e}})),A.material=new d({color:t.hex,metalness:0,roughness:1}))},[A,X,Q,ee,$,V,T,Ce]),Ee=E.useCallback(e=>{if(D(e),A&&Ce(A,0),X.forEach(e=>Ce(e,0)),Q.forEach(e=>Ce(e,0)),ee.forEach(e=>Ce(e,0)),"chasis"===e&&V.chasis.length>0?B(V.chasis[0]):B(null),!F.current||!z.current)return;let t,o;"normal"===e?(t=ue.normal,o=!0):(t=ue.top,o=!1),z.current.enabled=o,O.to(F.current.position,{duration:1.2,ease:"power3.inOut",...t.pos}),O.to(z.current.target,{duration:1.2,ease:"power3.inOut",...t.target,onUpdate:()=>z.current.update()})},[V,A,Ce,X,Q,ee]);E.useEffect(()=>{Y.current=T},[T]),E.useEffect(()=>{setTimeout(()=>{F.current&&z.current&&(pe.current=F.current.position.clone(),me.current=z.current.target.clone())},100)},[]);E.useEffect(()=>{if(!j.current)return;const e=new p;e.background=null,S.current=e;const t=new m({antialias:!0,alpha:!0,preserveDrawingBuffer:!0});t.setSize(j.current.clientWidth,j.current.clientHeight),t.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.outputColorSpace=f,t.shadowMap.enabled=!0,_.current=t,j.current.appendChild(t.domElement);const a=new g(45,j.current.clientWidth/j.current.clientHeight,.1,200);let n;a.position.copy(ue.normal.pos),F.current=a,o(async()=>{const{OrbitControls:e}=await import("./OrbitControls-DFclDx1A.js");return{OrbitControls:e}},__vite__mapDeps([8,1,2])).then(({OrbitControls:e})=>{const o=new e(a,t.domElement);o.target.copy(ue.normal.target),o.enableDamping=!0,z.current=o}),ge(e,t),we();const i=()=>{n=requestAnimationFrame(i),z.current&&z.current.update(),t.render(e,a)};return i(),()=>{cancelAnimationFrame(n),j.current&&t.domElement&&j.current.removeChild(t.domElement),t.dispose()}},[ge,we]),E.useEffect(()=>{if(P.current&&V.chasis.length>0){const e=de.chasis[$.chasis];e&&V.chasis.forEach(t=>{t.material instanceof d&&(t.material.color=new v(e.hex))}),Object.entries($.buttons).forEach(([e,t])=>{const o=V.buttons.find(t=>t.name===e);if(o&&de.buttons[t]&&o.material instanceof c){const e=o.material;e.color=new v(de.buttons[t].hex),o.name.toLowerCase().includes("boton")?(e.emissive.setHex(parseInt(de.buttons[t].hex.replace("#",""),16)),e.attenuationColor.setHex(parseInt(de.buttons[t].hex.replace("#",""),16))):o.name.toLowerCase().includes("aro")&&e.attenuationColor.setHex(parseInt(de.buttons[t].hex.replace("#",""),16))}}),Object.entries($.faders).forEach(([e,t])=>{const o=V.faders.find(t=>t.name===e);o&&de.faders[t]&&o.material instanceof d&&(o.material.color=new v(de.faders[t].hex))})}},[$,de,V]);const[Se,_e]=E.useState("USD"),[Fe,Oe]=E.useState({referenceCode:`mixo_${Date.now()}`,amount:"200.00",currency:"USD",signature:"",description:"Configurador Mixo",buyerEmail:"cliente@correo.com"});E.useEffect(()=>{const e=Vr(Se);Oe(t=>({...t,amount:e.amount,currency:Se,description:`Configurador Mixo - ${Se} ${e.symbol}${e.amount}`}))},[Se]),E.useEffect(()=>{if(W){const e=`mixo-${Date.now()}`;Oe(t=>({...t,referenceCode:e}))}},[W]);const[Ne,Re]=E.useState([]);return e.jsxs(I,{options:{clientId:"test",currency:"USD"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,backgroundImage:"url(/textures/fondo.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}),e.jsxs("div",{className:"w-full h-screen text-gray-200 overflow-hidden relative",style:{background:"transparent"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"transparent"}}),e.jsx(R,{id:"tsparticles",init:async e=>{await Dr(e)},options:{fullScreen:{enable:!1},background:{color:{value:"transparent"}},fpsLimit:60,particles:{color:{value:"#a259ff"},links:{enable:!0,color:"#a259ff",distance:120},move:{enable:!0,speed:1},number:{value:50},opacity:{value:.5},shape:{type:"circle"},size:{value:3}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}},modes:{repulse:{distance:100,duration:.4}}}},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",top:16,left:6,zIndex:51,display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("button",{onClick:()=>window.location.href="https://www.crearttech.com/",className:"relative px-5 py-2 rounded-full font-bold text-sm uppercase tracking-wider text-white transition-all duration-300 hover:-translate-y-0.5",style:{background:"linear-gradient(90deg, rgba(0,255,255,0.18) 0%, rgba(122,0,255,0.18) 50%, rgba(255,0,255,0.18) 100%)",border:"1px solid rgba(0, 255, 255, 0.55)"},children:e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:[e.jsx("path",{d:"M3 10.5L12 3l9 7.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 9.5V21h14V9.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Inicio"})]})})}),e.jsxs("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-3",children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto"}),e.jsx("h1",{className:"text-2xl font-bold leading-none m-0",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",letterSpacing:"0.04em"},children:"MIXO"})]}),e.jsx("main",{className:"flex w-full h-full",style:{minHeight:"100vh",height:"100vh",position:"relative",zIndex:1,overflow:"hidden",background:"transparent"},children:e.jsxs("div",{className:"flex-grow h-full",style:{position:"relative",zIndex:1,background:"transparent"},children:[e.jsx("div",{ref:j,className:"w-full h-full transition-all duration-300",onClick:ke,style:{position:"relative",zIndex:1}}),"normal"===T&&e.jsx("button",{onClick:he,className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 text-lg font-bold uppercase tracking-wide text-black bg-purple-400 border-none rounded cursor-pointer transition-all duration-200 shadow-lg hover:bg-yellow-200 hover:scale-105 hover:shadow-xl",children:"AÑADIR AL CARRITO"})]})}),e.jsxs("div",{className:"fixed top-0 right-0 h-screen border-l border-gray-700 shadow-2xl transition-all duration-400 flex overflow-hidden z-10 "+("normal"===T?"w-28":"w-[320px]"),style:{backgroundColor:"rgba(255, 255, 0, 0.8)",background:"transparent",boxShadow:"0 0 16px 2px rgba(0, 255, 255, 0.4), -6px 0 16px 0 rgba(0, 255, 255, 0.3), inset 0 0 10px rgba(0,0,0,0.8)",borderLeft:"2px solid rgba(0, 255, 255, 0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[e.jsx("div",{className:"w-28 p-4 flex-shrink-0",style:{paddingTop:"100px"},children:e.jsxs("div",{className:"flex flex-col gap-1.5",children:[[{id:"normal",icon:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5M12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17M12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",title:"Vista General"},{id:"chasis",icon:"mixo.png",title:"Chasis",isImage:!0},{id:"buttons",icon:"M12 1.999c5.524 0 10.002 4.478 10.002 10.002c0 5.523-4.478 10.001-10.002 10.001S1.998 17.524 1.998 12.001C1.998 6.477 6.476 1.999 12 1.999m0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5M11.996 6a5.998 5.998 0 1 1 0 11.996a5.998 5.998 0 0 1 0-11.996",title:"Botones"},{id:"knobs",icon:"M9.42 4.074a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56M11.554 8.8a.5.5 0 0 1 0 .707l-1.78 1.78a.5.5 0 1 1-.708-.707l1.78-1.78a.5.5 0 0 1 .708 0 M9.42 15.444c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.03 1.32-3.19 1.32m0-1.1a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82M6.757 5.2a.56.56 0 1 0-.965.567l.465.809l.005.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm5.315.012a.55.55 0 0 1 .761-.206c.277.152.36.5.203.764l-.458.797a.56.56 0 0 1-.478.277a.564.564 0 0 1-.487-.834zm7.598 5.722a.5.5 0 0 1 .5-.5h2.52a.5.5 0 1 1 0 1h-2.52a.5.5 0 0 1-.5-.5 M22.69 15.454c2.49 0 4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52s2.03 4.52 4.52 4.52m0-1.11a3.41 3.41 0 1 1 0-6.82a3.41 3.41 0 0 1 0 6.82m-.56-9.7c0-.308.252-.56.56-.56s.56.252.56.56v.945a.566.566 0 0 1-.56.535a.56.56 0 0 1-.56-.56zm-2.103.566a.557.557 0 0 0-.763-.202a.566.566 0 0 0-.204.753l.468.815l.004.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm6.086-.204a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759a.5.5 0 0 0 .282.077a.6.6 0 0 0 .478-.261l.005-.007l.463-.805a.55.55 0 0 0-.203-.764 M11.93 22.636H9.42a.5.5 0 0 0 0 1h2.51a.5.5 0 1 0 0-1 M4.9 23.136c0 2.49 2.03 4.52 4.52 4.52s4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52m7.93 0a3.41 3.41 0 1 1-6.82 0a3.41 3.41 0 0 1 6.82 0m-3.41-6.86a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56m-3.418.93a.566.566 0 0 1 .755.206l.464.807c.137.258.06.6-.205.753a.53.53 0 0 1-.276.074a.58.58 0 0 1-.478-.261l-.005-.007l-.468-.814a.566.566 0 0 1 .207-.755zm6.08.209a.55.55 0 0 1 .761-.206c.277.151.36.499.203.764l-.462.802a.567.567 0 0 1-.766.194a.55.55 0 0 1-.194-.76zm8.475 3.588a.5.5 0 0 1 .707 0l1.78 1.78a.5.5 0 0 1-.707.707l-1.78-1.78a.5.5 0 0 1 0-.707 M22.69 27.656c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.04 1.32-3.19 1.32m0-1.11a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82 M22.13 16.836c0-.308.252-.56.56-.56s.56.252.56.56v.945a.57.57 0 0 1-.56.545a.56.56 0 0 1-.56-.56zm-2.103.576a.566.566 0 0 0-.755-.206l-.006.003a.565.565 0 0 0-.206.755l.468.814l.004.007a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.074a.566.566 0 0 0 .205-.753z",title:"Knobs"},{id:"faders",icon:"M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z",title:"Faders"}].map(({id:t,icon:o,title:a,isImage:n})=>e.jsx("button",{onClick:()=>Ee(t),onMouseEnter:e=>{ce({x:e.clientX,y:e.clientY}),"chasis"===t?ae(!0):"knobs"===t?ie(!0):"faders"===t&&re(!0)},onMouseLeave:()=>{"chasis"===t?ae(!1):"knobs"===t?ie(!1):"faders"===t&&re(!1)},onMouseMove:e=>{ce({x:e.clientX,y:e.clientY})},className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white relative "+(T===t?"bg-gradient-to-br from-[#00FFFF] to-[#0080FF] border-[#00FFFF] shadow-lg":"border-[#00FFFF] bg-gradient-to-br from-[#000000] to-[#1a1a1a] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg"),title:a,children:n?e.jsx("img",{src:`textures/${o}`,alt:a,className:"w-full h-full mx-auto my-auto object-contain",style:{},onError:e=>{}}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"chasis"===t||"knobs"===t?"0 0 32 32":"0 0 24 24",className:"w-4/5 h-4/5 mx-auto my-auto fill-white text-white",fill:"#fff",children:e.jsx("path",{d:o})})},t)),e.jsx("input",{id:"sidebar-upload",type:"file",accept:"image/*,application/pdf",multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&Re(Array.from(e.target.files))}}),e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=document.getElementById("sidebar-upload"))?void 0:e.click()},className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white bg-gradient-to-br from-[#000000] to-[#1a1a1a] border-[#00FFFF] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg",title:"Subir archivos de personalización",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4/5 h-4/5 fill-white",children:e.jsx("path",{d:"M12 2C13.1 2 14 2.9 14 4V6H16C17.1 6 18 6.9 18 8V19C18 20.1 17.1 21 16 21H8C6.9 21 6 20.1 6 19V8C6 6.9 6.9 6 8 6H10V4C10 2.9 10.9 2 12 2M12 4V6H12.5V4H12M8 8V19H16V8H8M10 10H14V12H10V10M10 14H14V16H10V14Z"})})})]})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col",children:[e.jsx("div",{className:"flex items-center pb-5 border-b border-gray-600 pl-0 "+("normal"===T?"justify-center items-center gap-0":"justify-center gap-2"),style:"normal"===T?{minHeight:"48px"}:{},children:"normal"===T?e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-6 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}):e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}})}),e.jsxs("div",{className:"mt-6 animate-fadeIn",children:[e.jsx("p",{className:"font-black text-sm tracking-wide uppercase m-0 mb-8 text-gray-200 text-left animate-fadeIn",children:(()=>{switch(T){case"chasis":return"ELIGE EL COLOR DEL CHASIS";case"buttons":return"PERSONALIZA LOS BOTONES";case"knobs":return"PERSONALIZA LOS KNOBS";case"faders":return"PERSONALIZA LOS FADERS";default:return"ELIGE UN COLOR"}})()}),e.jsx("div",{className:"grid grid-cols-2 gap-1 p-1 rounded overflow-x-auto animate-scaleIn",children:Object.entries((()=>{switch(T){case"chasis":return de.chasis;case"buttons":return de.buttons;case"knobs":return de.knobs;case"faders":return de.faders;default:return{}}})()).map(([t,o],a)=>e.jsx("div",{className:"w-10 h-10 rounded-full cursor-pointer border-2 border-[#a259ff] shadow-[0_0_6px_1px_#a259ff55] transition-all duration-200 shadow-inner hover:scale-110 animate-fadeInUp",style:{backgroundColor:o.hex,animationDelay:50*a+"ms"},title:t,onClick:()=>je(t,o)},t))})]}),(X.length>0||Q.length>0||ee.length>0)&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-2",children:["Selección múltiple (",X.length+Q.length+ee.length," elementos)"]}),e.jsx("p",{className:"text-gray-300 text-sm",children:"Haz clic en un color para aplicarlo a todos los elementos seleccionados"})]})]})]}),oe&&e.jsxs("div",{className:"fixed bg-black bg-opacity-90 text-white text-xs px-3 py-2 rounded-lg whitespace-nowrap z-[9999] border border-[#00FFFF] shadow-lg pointer-events-none",style:{left:le.x-10,top:le.y-50,transform:"translateX(-100%)"},children:["Cambia el color de tu chasis",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black border-t-opacity-90"})]}),ne&&e.jsxs("div",{className:"fixed bg-black bg-opacity-90 text-white text-xs px-3 py-2 rounded-lg whitespace-nowrap z-[9999] border border-[#00FFFF] shadow-lg pointer-events-none",style:{left:le.x-10,top:le.y-50,transform:"translateX(-100%)"},children:["Cambia el color de tus knobs",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black border-t-opacity-90"})]}),se&&e.jsxs("div",{className:"fixed bg-black bg-opacity-90 text-white text-xs px-3 py-2 rounded-lg whitespace-nowrap z-[9999] border border-[#00FFFF] shadow-lg pointer-events-none",style:{left:le.x-10,top:le.y-50,transform:"translateX(-100%)"},children:["Cambia el color de tus faders",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black border-t-opacity-90"})]}),W&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#3a4060] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-4 md:py-4 md:px-8 w-full max-w-4xl mx-4 animate-fade-in",children:[e.jsx("button",{onClick:()=>G(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"PAGO SEGURO - MIXO"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[e.jsx("div",{className:"w-full max-w-[320px] md:max-w-[380px] aspect-[4/3] flex items-center justify-center ml-16 md:ml-24",children:q&&e.jsx("img",{src:q,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-8 md:mt-0",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"Tu configuración:"}),e.jsxs("ul",{className:"text-base space-y-1",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",$.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Botones:"})," ",Object.values($.buttons).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values($.knobs).join(", ")||"Por defecto"]}),e.jsxs("li",{children:[e.jsx("b",{children:"Faders:"})," ",Object.values($.faders).join(", ")||"Por defecto"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:"Selecciona tu moneda:"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>_e("USD"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("USD"===Se?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"USD $200.00"}),e.jsx("button",{onClick:()=>_e("COP"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("COP"===Se?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"COP $800,000"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-2",children:["Precio seleccionado: ",Se," ",Vr(Se).symbol,Vr(Se).amount]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("div",{className:"w-full py-3 rounded-lg bg-gray-600 text-gray-400 font-bold text-lg text-center",children:"PayPal temporalmente no disponible"}),e.jsxs("button",{onClick:()=>{const e="payu_checkout";if(!window.open("",e))return void alert("Por favor, permite popups para continuar con el pago");const t=Vr(Se),o=`${Ar.API_KEY}~${Ar.MERCHANT_ID}~${Fe.referenceCode}~${t.amount}~${Se}`,a=M(o).toString(),n=document.createElement("form");n.method="POST",n.action=t.url,n.target=e;const i={merchantId:Ar.MERCHANT_ID,accountId:t.accountId,description:`Configurador Mixo - ${Se} ${t.symbol}${t.amount}`,referenceCode:Fe.referenceCode,amount:t.amount,currency:Se,buyerEmail:Fe.buyerEmail,signature:a,test:"1",confirmationUrl:Ar.CONFIRMATION_URL,responseUrl:Ar.RESPONSE_URL,lng:t.language,extra1:"Mixo",extra2:$.chasis||"Personalizado",extra3:`Colores aplicados - Faders: ${Object.keys($.faders||{}).length}`,extra4:`Configurador Mixo - ${Se} ${t.symbol}${t.amount}`,payerCountry:"CO",payerCity:"Bogota",payerPhone:"+57-300-1234567",country:"CO",ipAddress:"8.8.4.4"};Object.entries(i).forEach(([e,t])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,n.appendChild(o)}),document.body.appendChild(n),n.submit(),document.body.removeChild(n)},className:"w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-cyan-400 text-white font-bold text-lg shadow-[0_0_12px_2px_#0ff580] hover:scale-105 transition-all mt-2",children:["Pagar con PayU (",Se," ",Vr(Se).symbol,Vr(Se).amount,")"]})]})]})})]})]})},ll=Object.freeze(Object.defineProperty({__proto__:null,default:rl},Symbol.toStringTag,{value:"Module"})),cl=({className:t="",style:o={}})=>{const[a,n]=E.useState(!1),[i]=E.useState(Date.now());return E.useEffect(()=>{const e=setTimeout(()=>{n(!0)},3e3);return()=>clearTimeout(e)},[]),e.jsxs("div",{className:t,style:o,children:[e.jsx(sl,{isVisible:!a}),e.jsx("div",{style:{width:"100%",height:"100%",opacity:a?1:0,transition:"opacity 0.8s ease-in-out"},children:e.jsx(rl,{})})]})},dl=Object.freeze(Object.defineProperty({__proto__:null,default:cl},Symbol.toStringTag,{value:"Module"})),ul=({isVisible:t})=>{const[o,a]=E.useState(0),[n]=E.useState(Date.now());return E.useEffect(()=>{if(t){const e=setInterval(()=>{const e=Date.now()-n,t=Math.min(e/3e3*100,100);a(t)},50);return()=>clearInterval(e)}a(0)},[t,n]),e.jsx(_,{children:t&&e.jsxs(F.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1.2,ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999,color:"white",fontFamily:"Arial, sans-serif"},children:[e.jsx(F.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},style:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px",color:"#2ECC71",textShadow:"0 0 20px #2ECC71, 0 0 40px #27AE60"},children:"LOOPO"}),e.jsx(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8,ease:"easeOut"},style:{fontSize:"18px",fontWeight:"bold",marginBottom:"40px",color:"#ffffff",textShadow:"0 0 10px #ffffff"},children:"CONTROLADOR LOOP"}),e.jsx(F.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{width:"100px",height:"100px",border:"6px solid rgba(46, 204, 113, 0.1)",borderTop:"6px solid #2ECC71",borderRadius:"50%",marginBottom:"40px",boxShadow:"0 0 30px rgba(46, 204, 113, 0.4)"}}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},style:{fontSize:"20px",fontWeight:"bold",textAlign:"center",marginBottom:"20px",color:"#2ECC71"},children:["Cargando LOOPO... ",Math.round(o),"%"]}),o>=100&&e.jsx(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},style:{fontSize:"18px",color:"#1ABC9C",fontWeight:"bold",marginBottom:"30px",textShadow:"0 0 10px #1ABC9C"},children:"¡LOOPO listo para configurar!"}),e.jsx(F.div,{style:{width:"400px",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"40px"},children:e.jsx(F.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.1,ease:"linear"},style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #2ECC71, #27AE60, #2ECC71)",borderRadius:"4px",boxShadow:"0 0 15px rgba(46, 204, 113, 0.6)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),e.jsx(F.div,{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[0,1,2].map(t=>e.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeInOut"},style:{width:"12px",height:"12px",backgroundColor:"#2ECC71",borderRadius:"50%",boxShadow:"0 0 10px rgba(46, 204, 113, 0.6)"}},t))}),e.jsx("style",{children:"\n            @keyframes shimmer {\n              0% { background-position: -200% 0; }\n              100% { background-position: 200% 0; }\n            }\n          "})]})})},hl=({onProductChange:t})=>{const a=E.useRef(null),n=E.useRef(null),v=E.useRef(null),j=E.useRef(null),S=E.useRef(null),_=E.useRef(null),[F,N]=E.useState("normal"),[z,P]=E.useState(null),[L,T]=E.useState(()=>{const e=localStorage.getItem("loopo_chosenColors");if(e)try{return JSON.parse(e)}catch(Cl){}return{type:"configUpdate",chasis:"Gris",knobs:{}}}),[D,A]=E.useState({chasis:[],knobs:[]}),[B,$]=E.useState(!1),[U,V]=E.useState(null),[H,W]=E.useState("USD"),[G,q]=E.useState({referenceCode:`loopo_${Date.now()}`,amount:"110.00",currency:"USD",signature:"",description:"Configurador Loopo",buyerEmail:"cliente@correo.com"});E.useEffect(()=>{const e=Hr(H);q(t=>({...t,amount:e.amount,currency:H,description:`Configurador Loopo - ${H} ${e.symbol}${e.amount}`}))},[H]),E.useEffect(()=>{if(B){const e=`loopo-${Date.now()}`;q(t=>({...t,referenceCode:e}))}},[B]);const K={chasis:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},knobs:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}}},Y={normal:{pos:new h(2,1,0),target:new h(0,-.3,0)},top:{pos:new h(1,1.95,-.3),target:new h(-.35,-1,-.3)}},X=E.useCallback((e,t)=>{const o=new i(16777215,.6);e.add(o);const a=new s(16777215,1.5);a.position.set(5,4,-1),a.castShadow=!0,a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.camera.near=.5,a.shadow.camera.far=50,a.shadow.normalBias=.02,a.shadow.bias=-.001,e.add(a);const n=new s(10079487,.8);n.position.set(-8,3,-9),e.add(n);const l=new s(10079487,.8);l.position.set(-8,3,15),e.add(l);const c=new r(16777215,.5,.5);c.position.set(0,5,5),e.add(c);const d=new s(16777215,1);d.position.set(-5,30,0),d.castShadow=!0,d.shadow.mapSize.width=2048,d.shadow.mapSize.height=2048,d.shadow.camera.near=.5,d.shadow.camera.far=50,d.shadow.normalBias=.02,d.shadow.bias=-.001,e.add(d);const u=new w(16777215,.3,10,Math.PI/6,.5);u.position.set(0,8,2),u.target.position.set(0,0,0),e.add(u),e.add(u.target)},[]),J=E.useCallback(e=>{const t=(new u).setFromObject(e),o=t.getSize(new h),a=t.getCenter(new h),n=1.8/Math.max(o.x,o.y,o.z);e.scale.set(n,n,n),e.position.copy(a).multiplyScalar(-n),e.position.y-=o.y/2*n},[]),Q=E.useCallback(e=>{const t={chasis:[],knobs:[]},o={type:"configUpdate",chasis:"Gris",knobs:{}};e.traverse(e=>{var a;if(!(e instanceof l))return;e.castShadow=!0,e.receiveShadow=!0;const n="string"==typeof e.name?e.name.toLowerCase():"";if(n.includes("cubechasis"))e.material=new c({color:K.chasis.Gris.hex,metalness:.8,roughness:.35,clearcoat:.85,clearcoatRoughness:.1}),t.chasis.push(e),o.chasis="Gris";else if(n.includes("aro"))e.material=new c({color:0,metalness:0,roughness:.2,clearcoat:.8,clearcoatRoughness:.1,reflectivity:.5,transmission:.3,thickness:.5,ior:1.4,attenuationDistance:1,attenuationColor:16777215,transparent:!0,opacity:.7}),t.buttons.push(e),o.buttons[e.name]="Negro";else if(n.includes("knob")&&(null==(a=e.material)?void 0:a.color)){const a=e.material;if((a.color.r+a.color.g+a.color.b)/3<.5){const a="Negro";e.material=new d({color:K.knobs[a].hex,metalness:0,roughness:1}),t.knobs.push(e),o.knobs[e.name]=a}else e.material=new d({color:16777215})}}),A(t),T(o)},[]),Z=E.useCallback(async()=>{try{const{GLTFLoader:e}=await o(async()=>{const{GLTFLoader:e}=await import("./GLTFLoader-L0pBLRUW.js");return{GLTFLoader:e}},__vite__mapDeps([7,1,2]));(new e).load("./models/loopo.glb",e=>{var t;const o=e.scene;_.current=o,Q(o),J(o),null==(t=n.current)||t.add(o),modelOriginalPositionRef.current||(modelOriginalPositionRef.current=o.position.clone());o.traverse(e=>{e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&e.material&&"color"in e.material&&e.material.color.setHex(1842204),e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&(e.material=e.material.clone())})},void 0,e=>{})}catch(e){}},[Q,J]);E.useEffect(()=>{if(!a.current)return;const e=new p;e.background=null,e.fog=new C(0,10,50),n.current=e;const t=new m({antialias:!0,alpha:!0,preserveDrawingBuffer:!0,powerPreference:"high-performance"});t.setSize(a.current.clientWidth,a.current.clientHeight),t.setPixelRatio(Math.min(window.devicePixelRatio,3)),t.outputColorSpace=f,t.shadowMap.enabled=!0,t.shadowMap.type=x,t.toneMapping=k,t.toneMappingExposure=1.2,v.current=t,a.current.appendChild(t.domElement);const i=new g(35,a.current.clientWidth/a.current.clientHeight,.1,200);let s;i.position.copy(Y.normal.pos),j.current=i,o(async()=>{const{OrbitControls:e}=await import("./OrbitControls-DFclDx1A.js");return{OrbitControls:e}},__vite__mapDeps([8,1,2])).then(({OrbitControls:e})=>{const o=new e(i,t.domElement);o.target.copy(Y.normal.target),o.enableDamping=!0,o.dampingFactor=.05,o.minDistance=2,o.maxDistance=5,o.enablePan=!1,S.current=o}),X(e,t),Z();const r=()=>{s=requestAnimationFrame(r),S.current&&S.current.update(),t.render(e,i)};return r(),()=>{s&&cancelAnimationFrame(s),a.current&&t.domElement&&a.current.removeChild(t.domElement),t.dispose()}},[X,Z]),E.useEffect(()=>{const e=()=>{if(a.current&&j.current&&v.current){const e=a.current.clientWidth,t=a.current.clientHeight;j.current.aspect=e/t,j.current.updateProjectionMatrix(),v.current.setSize(e,t)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),E.useEffect(()=>{localStorage.setItem("loopo_currentView",F)},[F]),E.useEffect(()=>{localStorage.setItem("loopo_chosenColors",JSON.stringify(L))},[L]),E.useEffect(()=>{if(D.chasis.length>0||D.knobs.length>0){if(L.chasis&&K.chasis[L.chasis]){const e=K.chasis[L.chasis].hex;D.chasis.forEach(t=>{t.material&&"color"in t.material&&t.material.color.setHex(parseInt(e.replace("#",""),16))})}Object.entries(L.knobs).forEach(([e,t])=>{if(K.knobs[t]){const o=K.knobs[t].hex,a=D.knobs.find(t=>t.name===e);a&&a.material&&"color"in a.material&&a.material.color.setHex(parseInt(o.replace("#",""),16))}})}},[D,L]);const ee=E.useCallback(e=>{if(N(e),"chasis"===e&&D.chasis.length>0?P(D.chasis[0]):P(null),!j.current||!S.current)return;let t,o;"normal"===e?(t=Y.normal,o=!0):(t=Y.top,o=!1),S.current.enabled=o,O.to(j.current.position,{duration:1.2,ease:"power3.inOut",...t.pos}),O.to(S.current.target,{duration:1.2,ease:"power3.inOut",...t.target,onUpdate:()=>S.current.update()})},[D]);E.useCallback(e=>{if(!z)return;const t=z.name.toLowerCase();let o=null,a=null;if(t.includes("cubechasis")?(o=K.chasis,a="chasis"):t.includes("knob")&&(o=K.knobs,a=z.name),o&&a&&o[e]){const t=o[e].hex;z.material&&"color"in z.material&&z.material.color.setHex(parseInt(t.replace("#",""),16)),T(t=>({...t,["chasis"===a?"chasis":"knobs"]:"chasis"===a?e:{...t.knobs,[a]:e}}))}},[z]);const te=E.useCallback(e=>{if(!j.current||!v.current)return;if("chasis"===F)return void P(null);const t=new b,o=new y,a=v.current.domElement.getBoundingClientRect();o.x=(e.clientX-a.left)/a.width*2-1,o.y=-(e.clientY-a.top)/a.height*2+1,t.setFromCamera(o,j.current);let n=[];if(("knobs"===F||"normal"===F)&&(n=D.knobs),0===n.length)return;const i=t.intersectObjects(n,!1);if(i.length>0){const e=i[0].object;P(e)}else P(null)},[F,D]),oe=E.useCallback((e,t)=>{"chasis"===F?(T(t=>({...t,chasis:e})),D.chasis.forEach(e=>{e.material&&"color"in e.material&&e.material.color.setHex(parseInt(t.hex.replace("#",""),16))})):"knobs"===F&&z&&(T(t=>({...t,knobs:{...t.knobs,[z.name]:e}})),z.material&&"color"in z.material&&z.material.color.setHex(parseInt(t.hex.replace("#",""),16)))},[F,D,z]),ae=E.useCallback(()=>{if(v.current&&n.current&&j.current){v.current.render(n.current,j.current);const e=v.current.domElement.toDataURL("image/png");V(e)}$(!0)},[]);return e.jsxs(I,{options:{clientId:"test",currency:"USD"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,backgroundImage:"url(/textures/fondo.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}),e.jsxs("div",{className:"w-full h-screen text-gray-200 overflow-hidden relative",style:{background:"transparent"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"transparent"}}),e.jsx(R,{id:"tsparticles",init:async e=>{await Dr(e)},options:{fullScreen:{enable:!1},background:{color:{value:"transparent"}},fpsLimit:60,particles:{color:{value:"#a259ff"},links:{enable:!0,color:"#a259ff",distance:120},move:{enable:!0,speed:1},number:{value:50},opacity:{value:.5},shape:{type:"circle"},size:{value:3}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}},modes:{repulse:{distance:100,duration:.4}}}},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",top:16,left:6,zIndex:51,display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("button",{onClick:()=>window.location.href="https://www.crearttech.com/",className:"relative px-5 py-2 rounded-full font-bold text-sm uppercase tracking-wider text-white transition-all duration-300 hover:-translate-y-0.5",style:{background:"linear-gradient(90deg, rgba(0,255,255,0.18) 0%, rgba(122,0,255,0.18) 50%, rgba(255,0,255,0.18) 100%)",border:"1px solid rgba(0, 255, 255, 0.55)"},children:e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:[e.jsx("path",{d:"M3 10.5L12 3l9 7.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 9.5V21h14V9.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Inicio"})]})})}),e.jsxs("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-3",children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}),e.jsx("h1",{className:"text-2xl font-bold leading-none m-0",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #fff",letterSpacing:"0.04em"},children:"LOOPO"})]}),e.jsx("main",{className:"flex w-full h-full",style:{minHeight:"100vh",height:"100vh",position:"relative",zIndex:1,overflow:"hidden",background:"transparent"},children:e.jsx("div",{className:"flex-grow h-full",style:{position:"relative",zIndex:1,background:"transparent"},children:e.jsx("div",{ref:a,className:"w-full h-full transition-all duration-300",onClick:te,style:{position:"relative",zIndex:1}})})}),e.jsxs("div",{className:"fixed top-0 right-0 h-screen border-l border-gray-700 shadow-2xl transition-all duration-400 flex overflow-hidden z-10 "+("normal"===F?"w-28":"w-[320px]"),style:{backgroundColor:"rgba(255, 255, 0, 0.8)",background:"transparent",boxShadow:"0 0 16px 2px rgba(0, 255, 255, 0.4), -6px 0 16px 0 rgba(0, 255, 255, 0.3), inset 0 0 10px rgba(0,0,0,0.8)",borderLeft:"2px solid rgba(0, 255, 255, 0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[e.jsx("div",{className:"w-28 p-4 flex-shrink-0",style:{paddingTop:"200px"},children:e.jsx("div",{className:"flex flex-col gap-1.5",children:[{id:"normal",icon:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5M12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17M12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",title:"Vista General"},{id:"chasis",icon:"loopo.png",title:"Chasis",isImage:!0},{id:"knobs",icon:"M9.42 4.074a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56M11.554 8.8a.5.5 0 0 1 0 .707l-1.78 1.78a.5.5 0 1 1-.708-.707l1.78-1.78a.5.5 0 0 1 .708 0 M9.42 15.444c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.03 1.32-3.19 1.32m0-1.1a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82M6.757 5.2a.56.56 0 1 0-.965.567l.465.809l.005.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm5.315.012a.55.55 0 0 1 .761-.206c.277.152.36.5.203.764l-.458.797a.56.56 0 0 1-.478.277a.564.564 0 0 1-.487-.834zm7.598 5.722a.5.5 0 0 1 .5-.5h2.52a.5.5 0 1 1 0 1h-2.52a.5.5 0 0 1-.5-.5 M22.69 15.454c2.49 0 4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52s2.03 4.52 4.52 4.52m0-1.11a3.41 3.41 0 1 1 0-6.82a3.41 3.41 0 0 1 0 6.82m-.56-9.7c0-.308.252-.56.56-.56s.56.252.56.56v.945a.566.566 0 0 1-.56.535a.56.56 0 0 1-.56-.56zm-2.103.566a.557.557 0 0 0-.763-.202a.566.566 0 0 0-.204.753l.468.815l.004.006a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.075a.566.566 0 0 0 .205-.753zm6.086-.204a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759a.5.5 0 0 0 .282.077a.6.6 0 0 0 .478-.261l.005-.007l.463-.805a.55.55 0 0 0-.203-.764 M11.93 22.636H9.42a.5.5 0 0 0 0 1h2.51a.5.5 0 1 0 0-1 M4.9 23.136c0 2.49 2.03 4.52 4.52 4.52s4.52-2.03 4.52-4.52s-2.03-4.52-4.52-4.52s-4.52 2.03-4.52 4.52m7.93 0a3.41 3.41 0 1 1-6.82 0a3.41 3.41 0 0 1 6.82 0m-3.41-6.86a.56.56 0 0 0-.56.56v.93c0 .308.252.56.56.56s.56-.252.56-.56v-.93a.56.56 0 0 0-.56-.56m-3.418.93a.566.566 0 0 1 .755.206l.464.807c.137.258.06.6-.205.753a.53.53 0 0 1-.276.074a.58.58 0 0 1-.478-.261l-.005-.007l-.468-.814a.566.566 0 0 1 .207-.755zm6.08.209a.55.55 0 0 1 .761-.206c.277.151.36.499.203.764l-.462.802a.567.567 0 0 1-.766.194a.55.55 0 0 1-.194-.76zm8.475 3.588a.5.5 0 0 1 .707 0l1.78 1.78a.5.5 0 0 1-.707.707l-1.78-1.78a.5.5 0 0 1 0-.707 M22.69 27.656c-1.16 0-2.32-.44-3.2-1.32a4.527 4.527 0 0 1 0-6.39a4.527 4.527 0 0 1 6.39 0a4.527 4.527 0 0 1 0 6.39c-.88.88-2.04 1.32-3.19 1.32m0-1.11a3.41 3.41 0 1 0 0-6.82a3.41 3.41 0 0 0 0 6.82 M22.13 16.836c0-.308.252-.56.56-.56s.56.252.56.56v.945a.57.57 0 0 1-.56.545a.56.56 0 0 1-.56-.56zm-2.103.576a.566.566 0 0 0-.755-.206l-.006.003a.565.565 0 0 0-.206.755l.468.814l.004.007a.58.58 0 0 0 .478.262a.53.53 0 0 0 .276-.074a.566.566 0 0 0 .205-.753zm6.086-.203a.55.55 0 0 0-.761.206l-.458.795a.55.55 0 0 0 .194.759a.5.5 0 0 0 .282.077a.6.6 0 0 0 .478-.261l.005-.007l.463-.805a.55.55 0 0 0-.203-.764 M1 5.75A4.75 4.75 0 0 1 5.75 1h20.52a4.75 4.75 0 0 1 4.75 4.75v20.48a4.75 4.75 0 0 1-4.75 4.75H5.75A4.75 4.75 0 0 1 1 26.23zM5.75 3A2.75 2.75 0 0 0 3 5.75v20.48a2.75 2.75 0 0 0 2.75 2.75h20.52a2.75 2.75 0 0 0 2.75-2.75V5.75A2.75 2.75 0 0 0 26.27 3z",title:"Knobs"}].map(({id:t,icon:o,title:a,isImage:n})=>e.jsx("button",{onClick:"faders"===t?void 0:()=>ee(t),className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white relative "+(F===t?"bg-gradient-to-br from-[#00FFFF] to-[#0080FF] border-[#00FFFF] shadow-lg":"border-[#00FFFF] bg-gradient-to-br from-[#000000] to-[#1a1a1a] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg"),title:a,disabled:"faders"===t,style:"faders"===t?{cursor:"not-allowed"}:{},children:n?e.jsx("img",{src:`textures/${o}`,alt:a,className:"w-full h-full mx-auto my-auto object-contain",style:{},onError:e=>{}}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"knobs"===t?"0 0 32 32":"faders"===t?"0 0 256 256":"0 0 24 24",className:"w-4/5 h-4/5 mx-auto my-auto fill-white text-white",fill:"#fff",children:e.jsx("path",{d:o})})},t))})}),e.jsxs("div",{className:"flex-1 p-4 flex flex-col",children:[e.jsx("div",{className:"flex items-center pb-5 border-b border-gray-600 pl-0 "+("normal"===F?"justify-center items-center gap-0":"justify-center gap-2"),style:"normal"===F?{minHeight:"48px"}:{},children:"normal"===F?e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-6 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}),e.jsx("h2",{className:"m-0 font-bold tracking-widest text-xl md:text-3xl whitespace-normal break-words text-left",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #fff",letterSpacing:"0.04em",marginLeft:"-0.25em",overflowWrap:"anywhere"},children:"LOOPO"})]})}),e.jsxs("div",{className:"mt-6 animate-fadeIn",children:[e.jsx("p",{className:"font-black text-sm tracking-wide uppercase m-0 mb-3 text-gray-200 text-left animate-fadeIn",children:"chasis"===F?"CHASIS":"knobs"===F?"KNOBS":"LOOPO"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-0 gap-y-0 p-0 justify-items-end ml-auto animate-scaleIn",children:Object.entries("chasis"===F?K.chasis:"knobs"===F?K.knobs:K.chasis).map(([t,o],a)=>e.jsx("div",{className:"w-10 h-10 rounded-full cursor-pointer border border-[#a259ff] shadow-[0_0_6px_1px_#a259ff55] transition-all duration-200 hover:scale-110 animate-fadeInUp",style:{backgroundColor:o.hex,animationDelay:50*a+"ms"},title:t,onClick:()=>oe(t,o)},t))})]}),"knobs"===F&&z&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg animate-scaleIn",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white mb-2 animate-fadeIn",children:["Seleccionado: ",z.name]}),e.jsx("p",{className:"text-gray-300 text-sm animate-fadeIn",children:"Haz clic en un color para aplicarlo al knob seleccionado"})]})]})]}),"normal"===F&&e.jsx("button",{onClick:ae,className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 text-lg font-bold uppercase tracking-wide text-black bg-purple-400 border-none rounded cursor-pointer transition-all duration-200 shadow-lg hover:bg-yellow-200 hover:scale-105 hover:shadow-xl shadow-[0_0_8px_2px_#a259ff80,0_0_16px_4px_#0ff5]",children:"AÑADIR AL CARRITO"}),B&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#3a4060] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-4 md:py-4 md:px-8 w-full max-w-4xl mx-4 animate-fade-in",children:[e.jsx("button",{onClick:()=>$(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"PAGO SEGURO - LOOPO"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[e.jsx("div",{className:"w-full max-w-[320px] md:max-w-[380px] aspect-[4/3] flex items-center justify-center ml-16 md:ml-24",children:U&&e.jsx("img",{src:U,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-8 md:mt-0",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"Tu configuración:"}),e.jsxs("ul",{className:"text-base space-y-1",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",L.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Perillas:"})," ",Object.values(L.knobs).join(", ")||"Por defecto"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:"Selecciona tu moneda:"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>W("USD"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("USD"===H?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"USD $110.00"}),e.jsx("button",{onClick:()=>W("COP"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("COP"===H?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"COP $440,000"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-2",children:["Precio seleccionado: ",H," ",Hr(H).symbol,Hr(H).amount]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("div",{className:"w-full py-3 rounded-lg bg-gray-600 text-gray-400 font-bold text-lg text-center",children:"PayPal temporalmente no disponible"}),e.jsxs("button",{onClick:()=>{const e="payu_checkout";if(!window.open("",e))return void alert("Por favor, permite popups para continuar con el pago");const t=Hr(H),o=`${Ar.API_KEY}~${Ar.MERCHANT_ID}~${G.referenceCode}~${t.amount}~${H}`,a=M(o).toString(),n=document.createElement("form");n.method="POST",n.action=t.url,n.target=e;const i={merchantId:Ar.MERCHANT_ID,accountId:t.accountId,description:`Configurador Loopo - ${H} ${t.symbol}${t.amount}`,referenceCode:G.referenceCode,amount:t.amount,currency:H,buyerEmail:G.buyerEmail,signature:a,test:"1",confirmationUrl:Ar.CONFIRMATION_URL,responseUrl:Ar.RESPONSE_URL,lng:t.language,extra1:"Loopo",extra2:L.chasis||"Personalizado",extra3:`Colores aplicados - Knobs: ${Object.keys(L.knobs||{}).length}`,extra4:`Configurador Loopo - ${H} ${t.symbol}${t.amount}`,payerCountry:"CO",payerCity:"Bogota",payerPhone:"+57-300-1234567",country:"CO",ipAddress:"8.8.4.4"};Object.entries(i).forEach(([e,t])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,n.appendChild(o)}),document.body.appendChild(n),n.submit(),document.body.removeChild(n)},className:"w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-cyan-400 text-white font-bold text-lg shadow-[0_0_12px_2px_#0ff580] hover:scale-105 transition-all mt-2",children:["Pagar con PayU (",H," ",Hr(H).symbol,Hr(H).amount,")"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:"Tu compra es 100% segura y protegida."})]})})]})]})},pl=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"})),ml=({className:t="",style:o={}})=>{const[a,n]=E.useState(!1),[i]=E.useState(Date.now());return E.useEffect(()=>{const e=setTimeout(()=>{n(!0)},3e3);return()=>clearTimeout(e)},[]),e.jsxs("div",{className:t,style:o,children:[e.jsx(ul,{isVisible:!a}),e.jsx("div",{style:{width:"100%",height:"100%",opacity:a?1:0,transition:"opacity 0.8s ease-in-out"},children:e.jsx(hl,{})})]})},fl=Object.freeze(Object.defineProperty({__proto__:null,default:ml},Symbol.toStringTag,{value:"Module"})),xl=({isVisible:t})=>{const[o,a]=E.useState(0),[n]=E.useState(Date.now());return E.useEffect(()=>{if(t){const e=setInterval(()=>{const e=Date.now()-n,t=Math.min(e/3e3*100,100);a(t)},50);return()=>clearInterval(e)}a(0)},[t,n]),e.jsx(_,{children:t&&e.jsxs(F.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:1.2,ease:"easeInOut"},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#0a0a0a",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999,color:"white",fontFamily:"Arial, sans-serif"},children:[e.jsx(F.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},style:{fontSize:"32px",fontWeight:"bold",marginBottom:"20px",color:"#E91E63",textShadow:"0 0 20px #E91E63, 0 0 40px #C2185B"},children:"FADO"}),e.jsx(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8,ease:"easeOut"},style:{fontSize:"18px",fontWeight:"bold",marginBottom:"40px",color:"#ffffff",textShadow:"0 0 10px #ffffff"},children:"8 FADERS"}),e.jsx(F.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},style:{width:"100px",height:"100px",border:"6px solid rgba(233, 30, 99, 0.1)",borderTop:"6px solid #E91E63",borderRadius:"50%",marginBottom:"40px",boxShadow:"0 0 30px rgba(233, 30, 99, 0.4)"}}),e.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},style:{fontSize:"20px",fontWeight:"bold",textAlign:"center",marginBottom:"20px",color:"#E91E63"},children:["Cargando FADO... ",Math.round(o),"%"]}),o>=100&&e.jsx(F.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.8},style:{fontSize:"18px",color:"#FF4081",fontWeight:"bold",marginBottom:"30px",textShadow:"0 0 10px #FF4081"},children:"¡FADO listo para configurar!"}),e.jsx(F.div,{style:{width:"400px",height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden",boxShadow:"inset 0 2px 4px rgba(0, 0, 0, 0.3)",marginBottom:"40px"},children:e.jsx(F.div,{initial:{width:0},animate:{width:`${o}%`},transition:{duration:.1,ease:"linear"},style:{width:"100%",height:"100%",background:"linear-gradient(90deg, #E91E63, #C2185B, #E91E63)",borderRadius:"4px",boxShadow:"0 0 15px rgba(233, 30, 99, 0.6)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}),e.jsx(F.div,{style:{display:"flex",gap:"12px",marginTop:"20px"},children:[0,1,2].map(t=>e.jsx(F.div,{animate:{scale:[1,1.3,1],opacity:[.4,1,.4]},transition:{duration:2,repeat:1/0,delay:.3*t,ease:"easeInOut"},style:{width:"12px",height:"12px",backgroundColor:"#E91E63",borderRadius:"50%",boxShadow:"0 0 10px rgba(233, 30, 99, 0.6)"}},t))}),e.jsx("style",{children:"\n            @keyframes shimmer {\n              0% { background-position: -200% 0; }\n              100% { background-position: 200% 0; }\n            }\n          "})]})})},gl=({onProductChange:t})=>{const a=E.useRef(null),n=E.useRef(null),v=E.useRef(null),j=E.useRef(null),S=E.useRef(null),_=E.useRef(null),F=E.useRef(null),[N,z]=E.useState("normal"),[P,L]=E.useState(null),[T,D]=E.useState(()=>{const e=localStorage.getItem("fado_chosenColors");if(e)try{return JSON.parse(e)}catch(Cl){}return{type:"configUpdate",chasis:"Gris",faders:{}}}),[A,B]=E.useState({chasis:[],faders:[]}),[$,U]=E.useState([]),[V,H]=E.useState(!1),[W,G]=E.useState(null),[q,K]=E.useState("USD"),[Y,X]=E.useState({referenceCode:`fado_${Date.now()}`,amount:"150.00",currency:"USD",signature:"",description:"Configurador Fado",buyerEmail:"cliente@correo.com"});E.useEffect(()=>{const e=Wr(q);X(t=>({...t,amount:e.amount,currency:q,description:`Configurador Fado - ${q} ${e.symbol}${e.amount}`}))},[q]),E.useEffect(()=>{if(V){const e=`fado-${Date.now()}`;X(t=>({...t,referenceCode:e}))}},[V]);const J={chasis:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},faders:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}},knobs:{Verde:{hex:"#7CBA40"},Amarillo:{hex:"#F3E600"},Azul:{hex:"#325EB7"},Blanco:{hex:"#F5F5F5"},Naranja:{hex:"#F47119"},Morado:{hex:"#7B217E"},Rojo:{hex:"#E52421"},Negro:{hex:"#1C1C1C"},Rosa:{hex:"#FF007F"},Gris:{hex:"#808080"}}},Q={normal:{pos:new h(2,1,-.1),target:new h(0,-.3,-.1)},top:{pos:new h(1,1.65,-.3),target:new h(-.35,-.9,-.3)}},Z=E.useCallback((e,t)=>{e.material&&"emissive"in e.material&&e.material.emissive.setHex(t)},[]),ee=E.useCallback((e,t)=>{const o=new i(16777215,.6);e.add(o);const a=new s(16777215,1.5);a.position.set(5,4,-1),a.castShadow=!0,a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.camera.near=.5,a.shadow.camera.far=50,a.shadow.normalBias=.02,a.shadow.bias=-.001,e.add(a);const n=new s(10079487,.8);n.position.set(-8,3,-9),e.add(n);const l=new s(10079487,.8);l.position.set(-8,3,15),e.add(l);const c=new r(16777215,.5,.5);c.position.set(0,5,5),e.add(c);const d=new s(16777215,1);d.position.set(-5,30,0),d.castShadow=!0,d.shadow.mapSize.width=2048,d.shadow.mapSize.height=2048,d.shadow.camera.near=.5,d.shadow.camera.far=50,d.shadow.normalBias=.02,d.shadow.bias=-.001,e.add(d);const u=new w(16777215,.3,10,Math.PI/6,.5);u.position.set(0,8,2),u.target.position.set(0,0,0),e.add(u),e.add(u.target)},[]),te=E.useCallback(e=>{const t=(new u).setFromObject(e),o=t.getSize(new h),a=t.getCenter(new h),n=1.8/Math.max(o.x,o.y,o.z);e.scale.set(n,n,n),e.position.copy(a).multiplyScalar(-n),e.position.y-=o.y/2*n},[]),oe=E.useCallback(e=>{const t={chasis:[],faders:[]},o={type:"configUpdate",chasis:"Gris",faders:{}},a=[],n=(e,t=0)=>{"  ".repeat(t),e.type,e.name;e.children.forEach(e=>n(e,t+1))};n(e);const i=e=>{if("faders"===e.name.toLowerCase())return e;for(const t of e.children){const e=i(t);if(e)return e}return null},s=i(e);s&&s.children.forEach((e,t)=>{}),e.traverse(e=>{if(!(e instanceof l))return;e.castShadow=!0,e.receiveShadow=!0;const n="string"==typeof e.name?e.name.toLowerCase():"";if(a.push(e.name),n.includes("fader"),n.includes("cubechasis"))e.material=new c({color:J.chasis.Gris.hex,metalness:.8,roughness:.35,clearcoat:.85,clearcoatRoughness:.1}),t.chasis.push(e),o.chasis="Gris";else if(n.includes("aro"))e.material=new c({color:0,metalness:0,roughness:.2,clearcoat:.8,clearcoatRoughness:.1,reflectivity:.5,transmission:.3,thickness:.5,ior:1.4,attenuationDistance:1,attenuationColor:16777215,transparent:!0,opacity:.7});else if(n.includes("fader"))if("fader1_1"===n||"fader2_1"===n||"fader3_1"===n||"fader4_1"===n||"fader5_1"===n||"fader6_1"===n||"fader7_1"===n||"fader8_1"===n){const a="Negro";e.material=new d({color:J.faders[a].hex,metalness:0,roughness:1}),t.faders.push(e),o.faders[e.name]=a}else if(e.material){const a=e.material;if(a.color){if((a.color.r+a.color.g+a.color.b)/3<.8){const n="Negro";a.color.setHex(parseInt(J.faders[n].hex.replace("#",""),16)),t.faders.push(e),o.faders[e.name]=n}}}}),B(t),D(o)},[]),ae=E.useCallback(async()=>{try{const{GLTFLoader:e}=await o(async()=>{const{GLTFLoader:e}=await import("./GLTFLoader-L0pBLRUW.js");return{GLTFLoader:e}},__vite__mapDeps([7,1,2]));(new e).load("./models/fado.glb",e=>{var t;const o=e.scene;_.current=o,oe(o),te(o),null==(t=n.current)||t.add(o),F.current||(F.current=o.position.clone());o.traverse(e=>{e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&e.material&&"color"in e.material&&e.material.color.setHex(1842204),e.isMesh&&"string"==typeof e.name&&e.name.toLowerCase().includes("aro")&&(e.material=e.material.clone())})},void 0,e=>{})}catch(e){}},[oe,te]);E.useEffect(()=>{if(!a.current)return;const e=new p;e.background=null,e.fog=new C(0,10,50),n.current=e;const t=new m({antialias:!0,alpha:!0,preserveDrawingBuffer:!0,powerPreference:"high-performance"});t.setSize(a.current.clientWidth,a.current.clientHeight),t.setPixelRatio(Math.min(window.devicePixelRatio,3)),t.outputColorSpace=f,t.shadowMap.enabled=!0,t.shadowMap.type=x,t.toneMapping=k,t.toneMappingExposure=1.2,v.current=t,a.current.appendChild(t.domElement);const i=new g(35,a.current.clientWidth/a.current.clientHeight,.1,200);let s;i.position.copy(Q.normal.pos),j.current=i,o(async()=>{const{OrbitControls:e}=await import("./OrbitControls-DFclDx1A.js");return{OrbitControls:e}},__vite__mapDeps([8,1,2])).then(({OrbitControls:e})=>{const o=new e(i,t.domElement);o.target.copy(Q.normal.target),o.enableDamping=!0,o.dampingFactor=.05,o.minDistance=2,o.maxDistance=5,o.enablePan=!1,S.current=o}),ee(e,t),ae();const r=()=>{s=requestAnimationFrame(r),S.current&&S.current.update(),t.render(e,i)};return r(),()=>{s&&cancelAnimationFrame(s),a.current&&t.domElement&&a.current.removeChild(t.domElement),t.dispose()}},[ee,ae]),E.useEffect(()=>{const e=()=>{if(a.current&&j.current&&v.current){const e=a.current.clientWidth,t=a.current.clientHeight;j.current.aspect=e/t,j.current.updateProjectionMatrix(),v.current.setSize(e,t)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),E.useEffect(()=>{localStorage.setItem("fado_currentView",N)},[N]),E.useEffect(()=>{localStorage.setItem("fado_chosenColors",JSON.stringify(T))},[T]),E.useEffect(()=>{if(A.chasis.length>0||A.faders.length>0){if(T.chasis&&J.chasis[T.chasis]){const e=J.chasis[T.chasis].hex;A.chasis.forEach(t=>{t.material&&"color"in t.material&&t.material.color.setHex(parseInt(e.replace("#",""),16))})}Object.entries(T.faders).forEach(([e,t])=>{if(J.faders[t]){const o=J.faders[t].hex,a=A.faders.find(t=>t.name===e);a&&(a.material=new d({color:o,metalness:0,roughness:1}))}})}},[A,T]),E.useEffect(()=>{A.faders.length>0&&A.faders.forEach((e,t)=>{const o=J.faders.Negro.hex;e.material=new d({color:o,metalness:0,roughness:1})})},[A.faders.length]);const ne=E.useCallback(e=>{if(z(e),P&&Z(P,0),$.forEach(e=>Z(e,0)),"chasis"===e&&A.chasis.length>0?L(A.chasis[0]):L(null),!j.current||!S.current)return;let t,o;"normal"===e?(t=Q.normal,o=!0):(t=Q.top,o=!1),S.current.enabled=o,O.to(j.current.position,{duration:1.2,ease:"power3.inOut",...t.pos}),O.to(S.current.target,{duration:1.2,ease:"power3.inOut",...t.target,onUpdate:()=>S.current.update()})},[A,P,Z,$]);E.useCallback(e=>{if(!P)return;const t=P.name.toLowerCase();let o=null,a=null;if(t.includes("cubechasis")?(o=J.chasis,a="chasis"):t.includes("fader")&&(o=J.knobs,a=P.name),o&&a&&o[e]){const t=o[e].hex;P.material&&"color"in P.material&&P.material.color.setHex(parseInt(t.replace("#",""),16)),D(t=>"chasis"===a?{...t,chasis:e}:{...t,faders:{...t.faders,[a]:e}})}},[P]);const ie=E.useCallback(e=>{if(!j.current||!v.current)return;if("chasis"===N)return void L(null);const t=new b,o=new y,a=v.current.domElement.getBoundingClientRect();o.x=(e.clientX-a.left)/a.width*2-1,o.y=-(e.clientY-a.top)/a.height*2+1,t.setFromCamera(o,j.current);let n=[];if(("faders"===N||"normal"===N)&&(n=A.faders),0===n.length)return;const i=t.intersectObjects(n,!1);if(i.length>0){const t=i[0].object,o=t.name.toLowerCase();o.includes("fader")?e.shiftKey?0===$.length&&P&&P!==t?(U([P,t]),L(null),Z(P,4473924),Z(t,4473924)):(L(null),U(e=>{if(0===e.length)return Z(t,4473924),[t];let o;return e.includes(t)?(o=e.filter(e=>e!==t),Z(t,0)):(o=[...e,t],Z(t,4473924)),o.forEach(e=>Z(e,4473924)),o})):(U([]),L(t),Z(t,4473924)):o.includes("cubechasis")&&(U([]),L(t))}else L(null),U([])},[N,A,P,Z,$]),se=E.useCallback((e,t)=>{if("chasis"===N)D(t=>({...t,chasis:e})),A.chasis.forEach(e=>{e.material&&"color"in e.material&&e.material.color.setHex(parseInt(t.hex.replace("#",""),16))});else{if("faders"===N&&$.length>0){const o={...T,faders:{...T.faders}};return $.forEach(a=>{a.material=new d({color:t.hex,metalness:0,roughness:1}),o.faders[a.name]=e}),D(o),void U([])}"faders"===N&&P&&(D(t=>({...t,faders:{...t.faders,[P.name]:e}})),P.material=new d({color:t.hex,metalness:0,roughness:1}))}},[N,A,P,$,T]),re=E.useCallback(()=>{if(v.current&&n.current&&j.current){v.current.render(n.current,j.current);const e=v.current.domElement.toDataURL("image/png");G(e)}H(!0)},[]);return e.jsxs(I,{options:{clientId:"test",currency:"USD"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,backgroundImage:"url(/textures/fondo.jpg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}}),e.jsxs("div",{className:"w-full h-screen text-gray-200 overflow-hidden relative",style:{background:"transparent"},children:[e.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none",background:"transparent"}}),e.jsx(R,{id:"tsparticles",init:async e=>{await Dr(e)},options:{fullScreen:{enable:!1},background:{color:{value:"transparent"}},fpsLimit:60,particles:{color:{value:"#a259ff"},links:{enable:!0,color:"#a259ff",distance:120},move:{enable:!0,speed:1},number:{value:50},opacity:{value:.5},shape:{type:"circle"},size:{value:3}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}},modes:{repulse:{distance:100,duration:.4}}}},style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:0,pointerEvents:"none"}}),e.jsx("div",{style:{position:"fixed",top:16,left:6,zIndex:51,display:"flex",alignItems:"center",gap:"12px"},children:e.jsx("button",{onClick:()=>window.location.href="https://www.crearttech.com/",className:"relative px-5 py-2 rounded-full font-bold text-sm uppercase tracking-wider text-white transition-all duration-300 hover:-translate-y-0.5",style:{background:"linear-gradient(90deg, rgba(0,255,255,0.18) 0%, rgba(122,0,255,0.18) 50%, rgba(255,0,255,0.18) 100%)",border:"1px solid rgba(0, 255, 255, 0.55)"},children:e.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:[e.jsx("path",{d:"M3 10.5L12 3l9 7.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 9.5V21h14V9.5",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Inicio"})]})})}),e.jsxs("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 z-10 flex items-center gap-3",children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}),e.jsx("h1",{className:"text-2xl font-bold leading-none m-0",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #fff",letterSpacing:"0.04em"},children:"FADO"})]}),e.jsx("main",{className:"flex w-full h-full",style:{minHeight:"100vh",height:"100vh",position:"relative",zIndex:1,overflow:"hidden",background:"transparent"},children:e.jsx("div",{className:"flex-grow h-full",style:{position:"relative",zIndex:1,background:"transparent"},children:e.jsx("div",{ref:a,className:"w-full h-full transition-all duration-300",onClick:ie,style:{position:"relative",zIndex:1}})})}),e.jsxs("div",{className:"fixed top-0 right-0 h-screen border-l border-gray-700 shadow-2xl transition-all duration-400 flex overflow-hidden z-10 "+("normal"===N?"w-28":"w-[320px]"),style:{backgroundColor:"rgba(255, 255, 0, 0.8)",background:"transparent",boxShadow:"0 0 16px 2px rgba(0, 255, 255, 0.4), -6px 0 16px 0 rgba(0, 255, 255, 0.3), inset 0 0 10px rgba(0,0,0,0.8)",borderLeft:"2px solid rgba(0, 255, 255, 0.8)",backdropFilter:"blur(10px)",zIndex:10},children:[e.jsx("div",{className:"w-28 p-4 flex-shrink-0",style:{paddingTop:"200px"},children:e.jsx("div",{className:"flex flex-col gap-1.5",children:[{id:"normal",icon:"M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5M12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17M12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z",title:"🎵 Vista General"},{id:"chasis",icon:"fado.png",title:"🎛️ Chasis",isImage:!0},{id:"faders",icon:"M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z",title:"🎚️ Faders"}].map(({id:t,icon:o,title:a,isImage:n})=>e.jsx("button",{onClick:()=>ne(t),className:"w-full aspect-square border-2 rounded-lg flex items-center justify-center p-2 transition-all duration-300 text-white relative "+(N===t?"bg-gradient-to-br from-[#00FFFF] to-[#0080FF] border-[#00FFFF] shadow-lg":"border-[#00FFFF] bg-gradient-to-br from-[#000000] to-[#1a1a1a] hover:from-[#00FFFF] hover:to-[#0080FF] hover:border-[#00FFFF] hover:shadow-lg"),title:a,children:n?e.jsx("img",{src:`textures/${o}`,alt:a,className:"w-full h-full mx-auto my-auto object-contain",style:{},onError:e=>{}}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4/5 h-4/5 mx-auto my-auto fill-white text-white",fill:"#fff",children:e.jsx("path",{d:o})})},t))})}),e.jsxs("div",{className:"flex-1 p-2 flex flex-col",children:[e.jsx("div",{className:"flex items-center pb-5 border-b border-gray-600 pl-0 "+("normal"===N?"justify-center items-center gap-0":"justify-center gap-2"),style:"normal"===N?{minHeight:"48px"}:{},children:"normal"===N?e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-6 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:"models/logo.png",alt:"Logo",className:"h-8 w-auto",style:{filter:"drop-shadow(0 0 8px #a259ff) drop-shadow(0 0 16px #0ff)"}}),e.jsx("h2",{className:"m-0 font-bold tracking-widest text-xl md:text-3xl whitespace-normal break-words text-left",style:{fontFamily:"Gotham Black, Arial, sans-serif",color:"#fff",textShadow:"0 0 12px #a259ff, 0 0 24px #0ff, 0 0 2px #fff",letterSpacing:"0.04em",marginLeft:"-0.25em",overflowWrap:"anywhere"},children:"FADO"})]})}),e.jsxs("div",{className:"mt-6 animate-fadeIn",children:[e.jsx("p",{className:"font-black text-sm tracking-wide uppercase m-0 mb-3 text-gray-200 text-left animate-fadeIn",children:"chasis"===N?"🎛️ CHASIS":"faders"===N?"🎚️ FADERS":"🎵 FADO"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-0 gap-y-0 p-0 justify-items-start ml-8 animate-scaleIn",children:Object.entries("chasis"===N?J.chasis:"faders"===N?J.faders:J.chasis).map(([t,o],a)=>e.jsx("div",{className:"w-10 h-10 rounded-full cursor-pointer border border-[#a259ff] shadow-[0_0_6px_1px_#a259ff55] transition-all duration-200 hover:scale-110 animate-fadeInUp",style:{backgroundColor:o.hex,animationDelay:50*a+"ms"},title:t,onClick:()=>se(t,o)},t))})]}),"faders"===N&&P||"faders"===N&&$.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-800 rounded-lg animate-scaleIn",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2 animate-fadeIn",children:$.length>0?`Selección múltiple (${$.length} elementos)`:`Seleccionado: ${P?P.name:""}`}),e.jsx("p",{className:"text-gray-300 text-sm animate-fadeIn",children:$.length>0?"Haz clic en un color para aplicarlo a todos los faders seleccionados":"Haz clic en un color para aplicarlo al fader seleccionado"})]})]})]}),"normal"===N&&e.jsx("button",{onClick:re,className:"fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 text-lg font-bold uppercase tracking-wide text-black bg-purple-400 border-none rounded cursor-pointer transition-all duration-200 shadow-lg hover:bg-yellow-200 hover:scale-105 hover:shadow-xl shadow-[0_0_8px_2px_#a259ff80,0_0_16px_4px_#0ff5]",children:"AÑADIR AL CARRITO"}),V&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:e.jsxs("div",{className:"relative bg-[#3a4060] rounded-2xl shadow-2xl border-2 border-[#a259ff] p-4 md:py-4 md:px-8 w-full max-w-4xl mx-4 animate-fade-in",children:[e.jsx("button",{onClick:()=>H(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-pink-400 text-2xl font-bold",children:"×"}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-purple-400 mb-4 text-center tracking-widest",children:"PAGO SEGURO - FADO"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4",children:[e.jsx("div",{className:"w-full max-w-[320px] md:max-w-[380px] aspect-[4/3] flex items-center justify-center ml-16 md:ml-24",children:W&&e.jsx("img",{src:W,alt:"Controlador personalizado",className:"w-full h-full object-contain",style:{background:"none",boxShadow:"none",border:"none"}})}),e.jsxs("div",{className:"flex-1 mt-8 md:mt-0",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"Tu configuración:"}),e.jsxs("ul",{className:"text-base space-y-1",children:[e.jsxs("li",{children:[e.jsx("b",{children:"Chasis:"})," ",T.chasis]}),e.jsxs("li",{children:[e.jsx("b",{children:"Faders:"})," ",Object.values(T.faders).join(", ")||"Por defecto"]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-cyan-400",children:"Selecciona tu moneda:"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>K("USD"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("USD"===q?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"USD $150.00"}),e.jsx("button",{onClick:()=>K("COP"),className:"px-6 py-3 rounded-lg font-bold text-lg transition-all "+("COP"===q?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-[0_0_12px_2px_#3b82f6]":"bg-gray-600 text-gray-300 hover:bg-gray-500"),children:"COP $600,000"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-400 mt-2",children:["Precio seleccionado: ",q," ",Wr(q).symbol,Wr(q).amount]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx("div",{className:"w-full py-3 rounded-lg bg-gray-600 text-gray-400 font-bold text-lg text-center",children:"PayPal temporalmente no disponible"}),e.jsxs("button",{onClick:()=>{const e="payu_checkout";if(!window.open("",e))return void alert("Por favor, permite popups para continuar con el pago");const t=Wr(q),o=`${Ar.API_KEY}~${Ar.MERCHANT_ID}~${Y.referenceCode}~${t.amount}~${q}`,a=M(o).toString(),n=document.createElement("form");n.method="POST",n.action=t.url,n.target=e;const i={merchantId:Ar.MERCHANT_ID,accountId:t.accountId,description:`Configurador Fado - ${q} ${t.symbol}${t.amount}`,referenceCode:Y.referenceCode,amount:t.amount,currency:q,buyerEmail:Y.buyerEmail,signature:a,test:"1",confirmationUrl:Ar.CONFIRMATION_URL,responseUrl:Ar.RESPONSE_URL,lng:t.language,extra1:"Fado",extra2:T.chasis||"Personalizado",extra3:`Colores aplicados - Faders: ${Object.keys(T.faders||{}).length}`,extra4:`Configurador Fado - ${q} ${t.symbol}${t.amount}`,payerCountry:"CO",payerCity:"Bogota",payerPhone:"+57-300-1234567",country:"CO",ipAddress:"8.8.4.4"};Object.entries(i).forEach(([e,t])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=t,n.appendChild(o)}),document.body.appendChild(n),n.submit(),document.body.removeChild(n)},className:"w-full py-3 rounded-lg bg-gradient-to-r from-green-400 to-cyan-400 text-white font-bold text-lg shadow-[0_0_12px_2px_#0ff580] hover:scale-105 transition-all mt-2",children:["Pagar con PayU (",q," ",Wr(q).symbol,Wr(q).amount,")"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-6 text-center",children:"Tu compra es 100% segura y protegida."})]})})]})]})},bl=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"})),yl=({className:t="",style:o={}})=>{const[a,n]=E.useState(!1),[i]=E.useState(Date.now());return E.useEffect(()=>{const e=setTimeout(()=>{n(!0)},3e3);return()=>clearTimeout(e)},[]),e.jsxs("div",{className:t,style:o,children:[e.jsx(xl,{isVisible:!a}),e.jsx("div",{style:{width:"100%",height:"100%",opacity:a?1:0,transition:"opacity 0.8s ease-in-out"},children:e.jsx(gl,{})})]})},vl=Object.freeze(Object.defineProperty({__proto__:null,default:yl},Symbol.toStringTag,{value:"Module"}));function wl(){const[a,n]=E.useState("beato8"),[i,s]=E.useState(!1),[r,l]=E.useState(null),{isLoading:c}=(()=>{const{progress:e,total:o,loaded:a}=t(),[n,i]=E.useState(!0),[s,r]=E.useState(!1),[l]=E.useState(Date.now());return E.useEffect(()=>{0!==o?e>=100&&a>=o&&r(!0):i(!1)},[e,o,a]),E.useEffect(()=>{if(s){const e=Date.now()-l,t=5e3,o=Math.max(0,t-e),a=setTimeout(()=>{i(!1)},o);return()=>clearTimeout(a)}},[s,l]),{isLoading:n,progress:e,total:o,loaded:a}})(),{prefetchOnHover:d,prefetchOnIntersection:u}=(()=>{const e=E.useCallback(e=>{e().catch(e=>{})},[]),t=E.useCallback((t,o)=>{e(t)},[e]),o=E.useCallback((t,o)=>{if(!o)return;const a=new IntersectionObserver(o=>{o.forEach(o=>{o.isIntersecting&&(e(t),a.disconnect())})},{threshold:.1});return a.observe(o),()=>a.disconnect()},[e]);return{prefetchComponent:e,prefetchOnHover:t,prefetchOnIntersection:o}})(),h=E.useRef(null);E.useEffect(()=>{const e=new URLSearchParams(window.location.search);(e.has("referenceCode")||e.has("reference_sale")||e.has("status")||e.has("state_pol"))&&(s(!0),l({referenceCode:e.get("referenceCode")||e.get("reference_sale"),status:e.get("status")||e.get("state_pol"),amount:e.get("amount")||e.get("value"),currency:e.get("currency"),description:e.get("description"),transactionId:e.get("transaction_id")||e.get("transactionId")}))},[]),E.useEffect(()=>{h.current&&u(()=>o(()=>Promise.resolve().then(()=>Yr),void 0),h.current)},[u]);return i?e.jsx(pt,{children:e.jsx(E.Suspense,{fallback:e.jsx(ht,{type:"payment"}),children:e.jsx(mt,{})})}):e.jsxs("div",{className:"App",children:[e.jsx(ut,{isVisible:c}),e.jsx("div",{className:"product-menu",children:[{id:"beato8",name:"BEATO8",icon:"textures/beato.png",description:"Controlador MIDI",isImage:!0},{id:"beato16",name:"BEATO16",icon:"textures/beato16.png",description:"16 Botones + 4 Knobs",isImage:!0},{id:"knobo",name:"KNOBO",icon:"textures/knobo.png",description:"Controlador de Knobs",isImage:!0},{id:"mixo",name:"MIXO",icon:"textures/mixo.png",description:"Mixer con Faders",isImage:!0},{id:"loopo",name:"LOOPO",icon:"textures/loopo.png",description:"Controlador Loop",isImage:!0},{id:"fado",name:"FADO",icon:"textures/fado.png",description:"8 Faders",isImage:!0}].map(t=>e.jsxs("button",{className:"product-menu-item",onClick:()=>{return e=t.id,void n(e);var e},ref:"beato8"===t.id?h:void 0,style:{backgroundColor:a===t.id?"rgba(4, 19, 19, 0.3)":"transparent",background:a===t.id?"linear-gradient(135deg, rgba(0, 255, 255, 0.3) 0%, rgba(0, 128, 255, 0.2) 100%)":"transparent",border:a===t.id?"1px solid #00FFFF":"1px solid rgba(0, 255, 255, 0.3)",color:a===t.id?"#00FFFF":"#ffffff",boxShadow:a===t.id?"0 0 8px 2px rgba(0, 255, 255, 0.4)":"none"},onMouseEnter:e=>{var n;n=t.id,d({beato8:()=>o(()=>Promise.resolve().then(()=>Yr),void 0),beato16:()=>o(()=>Promise.resolve().then(()=>el),void 0),knobo:()=>o(()=>Promise.resolve().then(()=>il),void 0),mixo:()=>o(()=>Promise.resolve().then(()=>dl),void 0),loopo:()=>o(()=>Promise.resolve().then(()=>fl),void 0),fado:()=>o(()=>Promise.resolve().then(()=>vl),void 0)}[n],{}),a!==t.id&&(e.currentTarget.style.backgroundColor="rgba(0, 255, 255, 0.2)",e.currentTarget.style.transform="translateX(3px) scale(1.02)",e.currentTarget.style.boxShadow="0 8px 25px rgba(0, 255, 255, 0.4)")},onMouseLeave:e=>{a!==t.id&&(e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.transform="translateX(0) scale(1)",e.currentTarget.style.boxShadow="none")},children:[t.isImage?e.jsx("img",{src:t.icon,alt:t.name,style:{width:"30px",height:"30px",objectFit:"contain",filter:a===t.id?"drop-shadow(0 1px 2px rgba(0,0,0,0.3))":"none"},onError:e=>{e.currentTarget.style.display="none"}}):e.jsx("span",{style:{fontSize:"14px",filter:a===t.id?"drop-shadow(0 1px 2px rgba(0,0,0,0.3))":"none"},children:t.icon}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"8px",fontWeight:"bold",marginBottom:"1px"},children:t.name}),e.jsx("div",{style:{fontSize:"6px",opacity:.7,fontWeight:"normal"},children:t.description})]}),a===t.id&&e.jsx("div",{style:{position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",width:"2px",height:"50%",backgroundColor:"#00FFFF",borderRadius:"1px",boxShadow:"0 0 4px 1px rgba(6, 27, 27, 0.6)"}})]},t.id))}),e.jsx("main",{className:"canvas-wrap",children:e.jsx(pt,{children:e.jsx(E.Suspense,{fallback:e.jsx(ht,{type:"configurator"}),children:e.jsxs(ft,{children:["beato8"===a&&e.jsx(Kr,{}),"knobo"===a&&e.jsx(nl,{}),"mixo"===a&&e.jsx(cl,{}),"beato16"===a&&e.jsx(Zr,{}),"loopo"===a&&e.jsx(ml,{}),"fado"===a&&e.jsx(yl,{})]})})})})]})}j(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(nt,{children:e.jsx(wl,{})})}));export{lt as u};
